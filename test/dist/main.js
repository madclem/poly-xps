!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="/dist/",e(0)}(function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))switch(typeof t[e]){case"function":break;case"object":t[e]=function(e){var n=e.slice(1),i=t[e[0]];return function(t,e,r){i.apply(this,[t,e,r].concat(n))}}(t[e]);break;default:t[e]=t[t[e]]}return t}([function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}var o=n(19),s=r(o),a=n(1),u=i(a),c=void 0,l=function(){var t=document.getElementById("canvas");u.init(t),c=new s.default,window.addEventListener("resize",h),h()},h=function(){c.resize()};l()},function(t,e,n){(function(t){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.loaders=e.helpers=e.FrameBuffer=e.geometry=e.State=e.control=e.cameras=e.CONST=e.DataTexture=e.Texture=e.utils=e.GL=e.Program=e.init=void 0;var o=n(13),s=r(o),a=n(57),u=r(a),c=n(45),l=r(c),h=n(36),d=r(h),f=n(37),p=r(f),v=n(59),_=r(v),m=n(58),g=r(m),b=n(39),y=r(b),x=n(41),w=r(x),E=n(4),M=r(E),T=n(14),O=r(T),P=n(54),A=r(P),S=n(61),L=i(S),R=function(t){var e=void 0;try{e=t.getContext("webgl"),POLY.gl=e,POLY.GL.init(e)}catch(t){}e||console.warn("Could not initialise WebGL")};e.init=R,e.Program=s.default,e.GL=p.default,e.utils=L,e.Texture=_.default,e.DataTexture=g.default,e.CONST=O.default,e.cameras=y.default,e.control=w.default,e.State=M.default,e.geometry=l.default,e.FrameBuffer=d.default,e.helpers=A.default,e.loaders=u.default,t.POLY=e}).call(e,function(){return this}())},function(t,e,n){!function(e,n){t.exports=n()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e,n){"use strict";function i(t){e.ARRAY_TYPE=a=t}function r(t){return t*u}function o(t,e){return Math.abs(t-e)<=s*Math.max(1,Math.abs(t),Math.abs(e))}Object.defineProperty(e,"__esModule",{value:!0}),e.setMatrixArrayType=i,e.toRadian=r,e.equals=o;var s=e.EPSILON=1e-6,a=e.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,u=(e.RANDOM=Math.random,Math.PI/180)},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(){var t=new j.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function s(t){var e=new j.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function a(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function u(t,e,n,i,r,o,s,a,u){var c=new j.ARRAY_TYPE(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=i,c[4]=r,c[5]=o,c[6]=s,c[7]=a,c[8]=u,c}function c(t,e,n,i,r,o,s,a,u,c){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=o,t[5]=s,t[6]=a,t[7]=u,t[8]=c,t}function l(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function h(t,e){if(t===e){var n=e[1],i=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=i,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function d(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],u=e[6],c=e[7],l=e[8],h=l*s-a*c,d=-l*o+a*u,f=c*o-s*u,p=n*h+i*d+r*f;return p?(p=1/p,t[0]=h*p,t[1]=(-l*i+r*c)*p,t[2]=(a*i-r*s)*p,t[3]=d*p,t[4]=(l*n-r*u)*p,t[5]=(-a*n+r*o)*p,t[6]=f*p,t[7]=(-c*n+i*u)*p,t[8]=(s*n-i*o)*p,t):null}function f(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],u=e[6],c=e[7],l=e[8];return t[0]=s*l-a*c,t[1]=r*c-i*l,t[2]=i*a-r*s,t[3]=a*u-o*l,t[4]=n*l-r*u,t[5]=r*o-n*a,t[6]=o*c-s*u,t[7]=i*u-n*c,t[8]=n*s-i*o,t}function p(t){var e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],s=t[5],a=t[6],u=t[7],c=t[8];return e*(c*o-s*u)+n*(-c*r+s*a)+i*(u*r-o*a)}function v(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=e[6],l=e[7],h=e[8],d=n[0],f=n[1],p=n[2],v=n[3],_=n[4],m=n[5],g=n[6],b=n[7],y=n[8];return t[0]=d*i+f*s+p*c,t[1]=d*r+f*a+p*l,t[2]=d*o+f*u+p*h,t[3]=v*i+_*s+m*c,t[4]=v*r+_*a+m*l,t[5]=v*o+_*u+m*h,t[6]=g*i+b*s+y*c,t[7]=g*r+b*a+y*l,t[8]=g*o+b*u+y*h,t}function _(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=e[6],l=e[7],h=e[8],d=n[0],f=n[1];return t[0]=i,t[1]=r,t[2]=o,t[3]=s,t[4]=a,t[5]=u,t[6]=d*i+f*s+c,t[7]=d*r+f*a+l,t[8]=d*o+f*u+h,t}function m(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=e[6],l=e[7],h=e[8],d=Math.sin(n),f=Math.cos(n);return t[0]=f*i+d*s,t[1]=f*r+d*a,t[2]=f*o+d*u,t[3]=f*s-d*i,t[4]=f*a-d*r,t[5]=f*u-d*o,t[6]=c,t[7]=l,t[8]=h,t}function g(t,e,n){var i=n[0],r=n[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function b(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function y(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=-n,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function x(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function w(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function E(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n+n,a=i+i,u=r+r,c=n*s,l=i*s,h=i*a,d=r*s,f=r*a,p=r*u,v=o*s,_=o*a,m=o*u;return t[0]=1-h-p,t[3]=l-m,t[6]=d+_,t[1]=l+m,t[4]=1-c-p,t[7]=f-v,t[2]=d-_,t[5]=f+v,t[8]=1-c-h,t}function M(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],u=e[6],c=e[7],l=e[8],h=e[9],d=e[10],f=e[11],p=e[12],v=e[13],_=e[14],m=e[15],g=n*a-i*s,b=n*u-r*s,y=n*c-o*s,x=i*u-r*a,w=i*c-o*a,E=r*c-o*u,M=l*v-h*p,T=l*_-d*p,O=l*m-f*p,P=h*_-d*v,A=h*m-f*v,S=d*m-f*_,L=g*S-b*A+y*P+x*O-w*T+E*M;return L?(L=1/L,t[0]=(a*S-u*A+c*P)*L,t[1]=(u*O-s*S-c*T)*L,t[2]=(s*A-a*O+c*M)*L,t[3]=(r*A-i*S-o*P)*L,t[4]=(n*S-r*O+o*T)*L,t[5]=(i*O-n*A-o*M)*L,t[6]=(v*E-_*w+m*x)*L,t[7]=(_*y-p*E-m*b)*L,t[8]=(p*w-v*y+m*g)*L,t):null}function T(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function O(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function P(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))}function A(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function S(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function L(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function R(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t[4]=e[4]+n[4]*i,t[5]=e[5]+n[5]*i,t[6]=e[6]+n[6]*i,t[7]=e[7]+n[7]*i,t[8]=e[8]+n[8]*i,t}function C(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function k(t,e){var n=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5],u=t[6],c=t[7],l=t[8],h=e[0],d=e[1],f=e[2],p=e[3],v=e[4],_=e[5],m=e[6],g=e[7],b=e[8];return Math.abs(n-h)<=j.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(i-d)<=j.EPSILON*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(r-f)<=j.EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(o-p)<=j.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(s-v)<=j.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(a-_)<=j.EPSILON*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(u-m)<=j.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(c-g)<=j.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(l-b)<=j.EPSILON*Math.max(1,Math.abs(l),Math.abs(b))}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=r,e.fromMat4=o,e.clone=s,e.copy=a,e.fromValues=u,e.set=c,e.identity=l,e.transpose=h,e.invert=d,e.adjoint=f,e.determinant=p,e.multiply=v,e.translate=_,e.rotate=m,e.scale=g,e.fromTranslation=b,e.fromRotation=y,e.fromScaling=x,e.fromMat2d=w,e.fromQuat=E,e.normalFromMat4=M,e.projection=T,e.str=O,e.frob=P,e.add=A,e.subtract=S,e.multiplyScalar=L,e.multiplyScalarAndAdd=R,e.exactEquals=C,e.equals=k;var N=n(0),j=i(N);e.mul=v,e.sub=S},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(){var t=new G.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t}function o(t){var e=new G.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function s(t){var e=t[0],n=t[1],i=t[2];return Math.sqrt(e*e+n*n+i*i)}function a(t,e,n){var i=new G.ARRAY_TYPE(3);return i[0]=t,i[1]=e,i[2]=n,i}function u(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function c(t,e,n,i){return t[0]=e,t[1]=n,t[2]=i,t}function l(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function h(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function d(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function f(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function p(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function v(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function _(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function m(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function g(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function b(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function y(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t}function x(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return Math.sqrt(n*n+i*i+r*r)}function w(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return n*n+i*i+r*r}function E(t){var e=t[0],n=t[1],i=t[2];return e*e+n*n+i*i}function M(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function T(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function O(t,e){var n=e[0],i=e[1],r=e[2],o=n*n+i*i+r*r;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}function P(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function A(t,e,n){var i=e[0],r=e[1],o=e[2],s=n[0],a=n[1],u=n[2];return t[0]=r*u-o*a,t[1]=o*s-i*u,t[2]=i*a-r*s,t}function S(t,e,n,i){var r=e[0],o=e[1],s=e[2];return t[0]=r+i*(n[0]-r),t[1]=o+i*(n[1]-o),t[2]=s+i*(n[2]-s),t}function L(t,e,n,i,r,o){var s=o*o,a=s*(2*o-3)+1,u=s*(o-2)+o,c=s*(o-1),l=s*(3-2*o);return t[0]=e[0]*a+n[0]*u+i[0]*c+r[0]*l,t[1]=e[1]*a+n[1]*u+i[1]*c+r[1]*l,t[2]=e[2]*a+n[2]*u+i[2]*c+r[2]*l,t}function R(t,e,n,i,r,o){var s=1-o,a=s*s,u=o*o,c=a*s,l=3*o*a,h=3*u*s,d=u*o;return t[0]=e[0]*c+n[0]*l+i[0]*h+r[0]*d,t[1]=e[1]*c+n[1]*l+i[1]*h+r[1]*d,t[2]=e[2]*c+n[2]*l+i[2]*h+r[2]*d,t}function C(t,e){e=e||1;var n=2*G.RANDOM()*Math.PI,i=2*G.RANDOM()-1,r=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(n)*r,t[1]=Math.sin(n)*r,t[2]=i*e,t}function k(t,e,n){var i=e[0],r=e[1],o=e[2],s=n[3]*i+n[7]*r+n[11]*o+n[15];return s=s||1,t[0]=(n[0]*i+n[4]*r+n[8]*o+n[12])/s,t[1]=(n[1]*i+n[5]*r+n[9]*o+n[13])/s,t[2]=(n[2]*i+n[6]*r+n[10]*o+n[14])/s,t}function N(t,e,n){var i=e[0],r=e[1],o=e[2];return t[0]=i*n[0]+r*n[3]+o*n[6],t[1]=i*n[1]+r*n[4]+o*n[7],t[2]=i*n[2]+r*n[5]+o*n[8],t}function j(t,e,n){var i=e[0],r=e[1],o=e[2],s=n[0],a=n[1],u=n[2],c=n[3],l=c*i+a*o-u*r,h=c*r+u*i-s*o,d=c*o+s*r-a*i,f=-s*i-a*r-u*o;return t[0]=l*c+f*-s+h*-u-d*-a,t[1]=h*c+f*-a+d*-s-l*-u,t[2]=d*c+f*-u+l*-a-h*-s,t}function D(t,e,n,i){var r=[],o=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[0],o[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),o[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function U(t,e,n,i){var r=[],o=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),o[1]=r[1],o[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function F(t,e,n,i){var r=[],o=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),o[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),o[2]=r[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function I(t,e){var n=a(t[0],t[1],t[2]),i=a(e[0],e[1],e[2]);O(n,n),O(i,i);var r=P(n,i);return r>1?0:r<-1?Math.PI:Math.acos(r)}function B(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function q(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Y(t,e){var n=t[0],i=t[1],r=t[2],o=e[0],s=e[1],a=e[2];return Math.abs(n-o)<=G.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-s)<=G.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-a)<=G.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0,e.create=r,e.clone=o,e.length=s,e.fromValues=a,e.copy=u,e.set=c,e.add=l,e.subtract=h,e.multiply=d,e.divide=f,e.ceil=p,e.floor=v,e.min=_,e.max=m,e.round=g,e.scale=b,e.scaleAndAdd=y,e.distance=x,e.squaredDistance=w,e.squaredLength=E,e.negate=M,e.inverse=T,e.normalize=O,e.dot=P,e.cross=A,e.lerp=S,e.hermite=L,e.bezier=R,e.random=C,e.transformMat4=k,e.transformMat3=N,e.transformQuat=j,e.rotateX=D,e.rotateY=U,e.rotateZ=F,e.angle=I,e.str=B,e.exactEquals=q,e.equals=Y;var X=n(0),G=i(X);e.sub=h,e.mul=d,e.div=f,e.dist=x,e.sqrDist=w,e.len=s,e.sqrLen=E,e.forEach=function(){var t=r();return function(e,n,i,r,o,s){var a=void 0,u=void 0;for(n||(n=3),i||(i=0),u=r?Math.min(r*n+i,e.length):e.length,a=i;a<u;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],o(t,t,s),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}}()},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(){var t=new D.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function o(t){var e=new D.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function s(t,e,n,i){var r=new D.ARRAY_TYPE(4);return r[0]=t,r[1]=e,r[2]=n,r[3]=i,r}function a(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function u(t,e,n,i,r){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t}function c(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function l(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function h(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function d(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function f(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function p(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function v(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function _(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function m(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function g(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function b(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t}function y(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(n*n+i*i+r*r+o*o)}function x(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2],o=e[3]-t[3];return n*n+i*i+r*r+o*o}function w(t){var e=t[0],n=t[1],i=t[2],r=t[3];return Math.sqrt(e*e+n*n+i*i+r*r)}function E(t){var e=t[0],n=t[1],i=t[2],r=t[3];return e*e+n*n+i*i+r*r}function M(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function T(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function O(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n*n+i*i+r*r+o*o;return s>0&&(s=1/Math.sqrt(s),t[0]=n*s,t[1]=i*s,t[2]=r*s,t[3]=o*s),t}function P(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function A(t,e,n,i){var r=e[0],o=e[1],s=e[2],a=e[3];return t[0]=r+i*(n[0]-r),t[1]=o+i*(n[1]-o),t[2]=s+i*(n[2]-s),t[3]=a+i*(n[3]-a),t}function S(t,e){return e=e||1,t[0]=D.RANDOM(),t[1]=D.RANDOM(),t[2]=D.RANDOM(),t[3]=D.RANDOM(),O(t,t),g(t,t,e),t}function L(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*o+n[12]*s,t[1]=n[1]*i+n[5]*r+n[9]*o+n[13]*s,t[2]=n[2]*i+n[6]*r+n[10]*o+n[14]*s,t[3]=n[3]*i+n[7]*r+n[11]*o+n[15]*s,t}function R(t,e,n){var i=e[0],r=e[1],o=e[2],s=n[0],a=n[1],u=n[2],c=n[3],l=c*i+a*o-u*r,h=c*r+u*i-s*o,d=c*o+s*r-a*i,f=-s*i-a*r-u*o;return t[0]=l*c+f*-s+h*-u-d*-a,t[1]=h*c+f*-a+d*-s-l*-u,t[2]=d*c+f*-u+l*-a-h*-s,t[3]=e[3],t}function C(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function k(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function N(t,e){var n=t[0],i=t[1],r=t[2],o=t[3],s=e[0],a=e[1],u=e[2],c=e[3];return Math.abs(n-s)<=D.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-a)<=D.EPSILON*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(r-u)<=D.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(o-c)<=D.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0,e.create=r,e.clone=o,e.fromValues=s,e.copy=a,e.set=u,e.add=c,e.subtract=l,e.multiply=h,e.divide=d,e.ceil=f,e.floor=p,e.min=v,e.max=_,e.round=m,e.scale=g,e.scaleAndAdd=b,e.distance=y,e.squaredDistance=x,e.length=w,e.squaredLength=E,e.negate=M,e.inverse=T,e.normalize=O,e.dot=P,e.lerp=A,e.random=S,e.transformMat4=L,e.transformQuat=R,e.str=C,e.exactEquals=k,e.equals=N;var j=n(0),D=i(j);e.sub=l,e.mul=h,e.div=d,e.dist=y,e.sqrDist=x,e.len=w,e.sqrLen=E,e.forEach=function(){var t=r();return function(e,n,i,r,o,s){var a=void 0,u=void 0;for(n||(n=4),i||(i=0),u=r?Math.min(r*n+i,e.length):e.length,a=i;a<u;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],o(t,t,s),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}}()},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.vec4=e.vec3=e.vec2=e.quat=e.mat4=e.mat3=e.mat2d=e.mat2=e.glMatrix=void 0;var r=n(0),o=i(r),s=n(5),a=i(s),u=n(6),c=i(u),l=n(1),h=i(l),d=n(7),f=i(d),p=n(8),v=i(p),_=n(9),m=i(_),g=n(2),b=i(g),y=n(3),x=i(y);e.glMatrix=o,e.mat2=a,e.mat2d=c,e.mat3=h,e.mat4=f,e.quat=v,e.vec2=m,e.vec3=b,e.vec4=x},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(){var t=new S.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function o(t){var e=new S.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function s(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function a(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function u(t,e,n,i){var r=new S.ARRAY_TYPE(4);return r[0]=t,r[1]=e,r[2]=n,r[3]=i,r}function c(t,e,n,i,r){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t}function l(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function h(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n*o-r*i;return s?(s=1/s,t[0]=o*s,t[1]=-i*s,t[2]=-r*s,t[3]=n*s,t):null}function d(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function f(t){return t[0]*t[3]-t[2]*t[1]}function p(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=n[0],u=n[1],c=n[2],l=n[3];return t[0]=i*a+o*u,t[1]=r*a+s*u,t[2]=i*c+o*l,t[3]=r*c+s*l,t}function v(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(n),u=Math.cos(n);return t[0]=i*u+o*a,t[1]=r*u+s*a,t[2]=i*-a+o*u,t[3]=r*-a+s*u,t}function _(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=n[0],u=n[1];return t[0]=i*a,t[1]=r*a,t[2]=o*u,t[3]=s*u,t}function m(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=-n,t[3]=i,t}function g(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function b(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function y(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))}function x(t,e,n,i){return t[2]=i[2]/i[0],n[0]=i[0],n[1]=i[1],n[3]=i[3]-t[2]*n[1],[t,e,n]}function w(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function E(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function M(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function T(t,e){var n=t[0],i=t[1],r=t[2],o=t[3],s=e[0],a=e[1],u=e[2],c=e[3];return Math.abs(n-s)<=S.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-a)<=S.EPSILON*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(r-u)<=S.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(o-c)<=S.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))}function O(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function P(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=r,e.clone=o,e.copy=s,e.identity=a,e.fromValues=u,e.set=c,e.transpose=l,e.invert=h,e.adjoint=d,e.determinant=f,e.multiply=p,e.rotate=v,e.scale=_,e.fromRotation=m,e.fromScaling=g,e.str=b,e.frob=y,e.LDU=x,e.add=w,e.subtract=E,e.exactEquals=M,e.equals=T,e.multiplyScalar=O,e.multiplyScalarAndAdd=P;var A=n(0),S=i(A);e.mul=p,e.sub=E},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(){var t=new A.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function o(t){var e=new A.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function s(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function a(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function u(t,e,n,i,r,o){var s=new A.ARRAY_TYPE(6);return s[0]=t,s[1]=e,s[2]=n,s[3]=i,s[4]=r,s[5]=o,s}function c(t,e,n,i,r,o,s){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=o,t[5]=s,t}function l(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],u=n*o-i*r;return u?(u=1/u,t[0]=o*u,t[1]=-i*u,t[2]=-r*u,t[3]=n*u,t[4]=(r*a-o*s)*u,t[5]=(i*s-n*a)*u,t):null}function h(t){return t[0]*t[3]-t[1]*t[2]}function d(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=n[0],l=n[1],h=n[2],d=n[3],f=n[4],p=n[5];return t[0]=i*c+o*l,t[1]=r*c+s*l,t[2]=i*h+o*d,t[3]=r*h+s*d,t[4]=i*f+o*p+a,t[5]=r*f+s*p+u,t}function f(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=Math.sin(n),l=Math.cos(n);return t[0]=i*l+o*c,t[1]=r*l+s*c,t[2]=i*-c+o*l,t[3]=r*-c+s*l,t[4]=a,t[5]=u,t}function p(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=n[0],l=n[1];return t[0]=i*c,t[1]=r*c,t[2]=o*l,t[3]=s*l,t[4]=a,t[5]=u,t}function v(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=n[0],l=n[1];return t[0]=i,t[1]=r,t[2]=o,t[3]=s,t[4]=i*c+o*l+a,t[5]=r*c+s*l+u,t}function _(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=-n,t[3]=i,t[4]=0,t[5]=0,t}function m(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function g(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function b(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function y(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)}function x(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function w(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function E(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function M(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t[4]=e[4]+n[4]*i,t[5]=e[5]+n[5]*i,t}function T(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function O(t,e){var n=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5],u=e[0],c=e[1],l=e[2],h=e[3],d=e[4],f=e[5];return Math.abs(n-u)<=A.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(i-c)<=A.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(r-l)<=A.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(o-h)<=A.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(s-d)<=A.EPSILON*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(a-f)<=A.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=r,e.clone=o,e.copy=s,e.identity=a,e.fromValues=u,e.set=c,e.invert=l,e.determinant=h,e.multiply=d,e.rotate=f,e.scale=p,e.translate=v,e.fromRotation=_,e.fromScaling=m,e.fromTranslation=g,e.str=b,e.frob=y,e.add=x,e.subtract=w,e.multiplyScalar=E,e.multiplyScalarAndAdd=M,e.exactEquals=T,e.equals=O;var P=n(0),A=i(P);e.mul=d,e.sub=w},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(){var t=new J.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function o(t){var e=new J.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function s(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function a(t,e,n,i,r,o,s,a,u,c,l,h,d,f,p,v){var _=new J.ARRAY_TYPE(16);return _[0]=t,_[1]=e,_[2]=n,_[3]=i,_[4]=r,_[5]=o,_[6]=s,_[7]=a,_[8]=u,_[9]=c,_[10]=l,_[11]=h,_[12]=d,_[13]=f,_[14]=p,_[15]=v,_}function u(t,e,n,i,r,o,s,a,u,c,l,h,d,f,p,v,_){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=o,t[5]=s,t[6]=a,t[7]=u,t[8]=c,t[9]=l,t[10]=h,t[11]=d,t[12]=f,t[13]=p,t[14]=v,t[15]=_,t}function c(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function l(t,e){if(t===e){var n=e[1],i=e[2],r=e[3],o=e[6],s=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=o,t[11]=e[14],t[12]=r,t[13]=s,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function h(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],u=e[6],c=e[7],l=e[8],h=e[9],d=e[10],f=e[11],p=e[12],v=e[13],_=e[14],m=e[15],g=n*a-i*s,b=n*u-r*s,y=n*c-o*s,x=i*u-r*a,w=i*c-o*a,E=r*c-o*u,M=l*v-h*p,T=l*_-d*p,O=l*m-f*p,P=h*_-d*v,A=h*m-f*v,S=d*m-f*_,L=g*S-b*A+y*P+x*O-w*T+E*M;return L?(L=1/L,t[0]=(a*S-u*A+c*P)*L,t[1]=(r*A-i*S-o*P)*L,t[2]=(v*E-_*w+m*x)*L,t[3]=(d*w-h*E-f*x)*L,t[4]=(u*O-s*S-c*T)*L,t[5]=(n*S-r*O+o*T)*L,t[6]=(_*y-p*E-m*b)*L,t[7]=(l*E-d*y+f*b)*L,t[8]=(s*A-a*O+c*M)*L,t[9]=(i*O-n*A-o*M)*L,t[10]=(p*w-v*y+m*g)*L,t[11]=(h*y-l*w-f*g)*L,t[12]=(a*T-s*P-u*M)*L,t[13]=(n*P-i*T+r*M)*L,t[14]=(v*b-p*x-_*g)*L,t[15]=(l*x-h*b+d*g)*L,t):null}function d(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],u=e[6],c=e[7],l=e[8],h=e[9],d=e[10],f=e[11],p=e[12],v=e[13],_=e[14],m=e[15];return t[0]=a*(d*m-f*_)-h*(u*m-c*_)+v*(u*f-c*d),t[1]=-(i*(d*m-f*_)-h*(r*m-o*_)+v*(r*f-o*d)),t[2]=i*(u*m-c*_)-a*(r*m-o*_)+v*(r*c-o*u),t[3]=-(i*(u*f-c*d)-a*(r*f-o*d)+h*(r*c-o*u)),t[4]=-(s*(d*m-f*_)-l*(u*m-c*_)+p*(u*f-c*d)),t[5]=n*(d*m-f*_)-l*(r*m-o*_)+p*(r*f-o*d),t[6]=-(n*(u*m-c*_)-s*(r*m-o*_)+p*(r*c-o*u)),t[7]=n*(u*f-c*d)-s*(r*f-o*d)+l*(r*c-o*u),t[8]=s*(h*m-f*v)-l*(a*m-c*v)+p*(a*f-c*h),t[9]=-(n*(h*m-f*v)-l*(i*m-o*v)+p*(i*f-o*h)),t[10]=n*(a*m-c*v)-s*(i*m-o*v)+p*(i*c-o*a),t[11]=-(n*(a*f-c*h)-s*(i*f-o*h)+l*(i*c-o*a)),t[12]=-(s*(h*_-d*v)-l*(a*_-u*v)+p*(a*d-u*h)),t[13]=n*(h*_-d*v)-l*(i*_-r*v)+p*(i*d-r*h),t[14]=-(n*(a*_-u*v)-s*(i*_-r*v)+p*(i*u-r*a)),t[15]=n*(a*d-u*h)-s*(i*d-r*h)+l*(i*u-r*a),t}function f(t){var e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],s=t[5],a=t[6],u=t[7],c=t[8],l=t[9],h=t[10],d=t[11],f=t[12],p=t[13],v=t[14],_=t[15],m=e*s-n*o,g=e*a-i*o,b=e*u-r*o,y=n*a-i*s,x=n*u-r*s,w=i*u-r*a,E=c*p-l*f,M=c*v-h*f,T=c*_-d*f,O=l*v-h*p,P=l*_-d*p,A=h*_-d*v;return m*A-g*P+b*O+y*T-x*M+w*E}function p(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=e[6],l=e[7],h=e[8],d=e[9],f=e[10],p=e[11],v=e[12],_=e[13],m=e[14],g=e[15],b=n[0],y=n[1],x=n[2],w=n[3];return t[0]=b*i+y*a+x*h+w*v,t[1]=b*r+y*u+x*d+w*_,t[2]=b*o+y*c+x*f+w*m,t[3]=b*s+y*l+x*p+w*g,b=n[4],y=n[5],x=n[6],w=n[7],t[4]=b*i+y*a+x*h+w*v,t[5]=b*r+y*u+x*d+w*_,t[6]=b*o+y*c+x*f+w*m,t[7]=b*s+y*l+x*p+w*g,b=n[8],y=n[9],x=n[10],w=n[11],t[8]=b*i+y*a+x*h+w*v,t[9]=b*r+y*u+x*d+w*_,t[10]=b*o+y*c+x*f+w*m,t[11]=b*s+y*l+x*p+w*g,b=n[12],y=n[13],x=n[14],w=n[15],t[12]=b*i+y*a+x*h+w*v,t[13]=b*r+y*u+x*d+w*_,t[14]=b*o+y*c+x*f+w*m,t[15]=b*s+y*l+x*p+w*g,t}function v(t,e,n){var i=n[0],r=n[1],o=n[2],s=void 0,a=void 0,u=void 0,c=void 0,l=void 0,h=void 0,d=void 0,f=void 0,p=void 0,v=void 0,_=void 0,m=void 0;return e===t?(t[12]=e[0]*i+e[4]*r+e[8]*o+e[12],t[13]=e[1]*i+e[5]*r+e[9]*o+e[13],t[14]=e[2]*i+e[6]*r+e[10]*o+e[14],t[15]=e[3]*i+e[7]*r+e[11]*o+e[15]):(s=e[0],a=e[1],u=e[2],c=e[3],l=e[4],h=e[5],d=e[6],f=e[7],p=e[8],v=e[9],_=e[10],m=e[11],t[0]=s,t[1]=a,t[2]=u,t[3]=c,t[4]=l,t[5]=h,t[6]=d,t[7]=f,t[8]=p,t[9]=v,t[10]=_,t[11]=m,t[12]=s*i+l*r+p*o+e[12],t[13]=a*i+h*r+v*o+e[13],t[14]=u*i+d*r+_*o+e[14],t[15]=c*i+f*r+m*o+e[15]),t}function _(t,e,n){var i=n[0],r=n[1],o=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function m(t,e,n,i){var r=i[0],o=i[1],s=i[2],a=Math.sqrt(r*r+o*o+s*s),u=void 0,c=void 0,l=void 0,h=void 0,d=void 0,f=void 0,p=void 0,v=void 0,_=void 0,m=void 0,g=void 0,b=void 0,y=void 0,x=void 0,w=void 0,E=void 0,M=void 0,T=void 0,O=void 0,P=void 0,A=void 0,S=void 0,L=void 0,R=void 0;return Math.abs(a)<J.EPSILON?null:(a=1/a,r*=a,o*=a,s*=a,u=Math.sin(n),c=Math.cos(n),l=1-c,h=e[0],d=e[1],f=e[2],p=e[3],v=e[4],_=e[5],m=e[6],g=e[7],b=e[8],y=e[9],x=e[10],w=e[11],E=r*r*l+c,M=o*r*l+s*u,T=s*r*l-o*u,O=r*o*l-s*u,P=o*o*l+c,A=s*o*l+r*u,S=r*s*l+o*u,L=o*s*l-r*u,R=s*s*l+c,t[0]=h*E+v*M+b*T,t[1]=d*E+_*M+y*T,t[2]=f*E+m*M+x*T,t[3]=p*E+g*M+w*T,t[4]=h*O+v*P+b*A,t[5]=d*O+_*P+y*A,t[6]=f*O+m*P+x*A,t[7]=p*O+g*P+w*A,t[8]=h*S+v*L+b*R,t[9]=d*S+_*L+y*R,t[10]=f*S+m*L+x*R,t[11]=p*S+g*L+w*R,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function g(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[4],s=e[5],a=e[6],u=e[7],c=e[8],l=e[9],h=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+c*i,t[5]=s*r+l*i,t[6]=a*r+h*i,t[7]=u*r+d*i,t[8]=c*r-o*i,t[9]=l*r-s*i,t[10]=h*r-a*i,t[11]=d*r-u*i,t}function b(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],s=e[1],a=e[2],u=e[3],c=e[8],l=e[9],h=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r-c*i,t[1]=s*r-l*i,t[2]=a*r-h*i,t[3]=u*r-d*i,t[8]=o*i+c*r,t[9]=s*i+l*r,t[10]=a*i+h*r,t[11]=u*i+d*r,t}function y(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],s=e[1],a=e[2],u=e[3],c=e[4],l=e[5],h=e[6],d=e[7];
return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r+c*i,t[1]=s*r+l*i,t[2]=a*r+h*i,t[3]=u*r+d*i,t[4]=c*r-o*i,t[5]=l*r-s*i,t[6]=h*r-a*i,t[7]=d*r-u*i,t}function x(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function w(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function E(t,e,n){var i=n[0],r=n[1],o=n[2],s=Math.sqrt(i*i+r*r+o*o),a=void 0,u=void 0,c=void 0;return Math.abs(s)<J.EPSILON?null:(s=1/s,i*=s,r*=s,o*=s,a=Math.sin(e),u=Math.cos(e),c=1-u,t[0]=i*i*c+u,t[1]=r*i*c+o*a,t[2]=o*i*c-r*a,t[3]=0,t[4]=i*r*c-o*a,t[5]=r*r*c+u,t[6]=o*r*c+i*a,t[7]=0,t[8]=i*o*c+r*a,t[9]=r*o*c-i*a,t[10]=o*o*c+u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function M(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function T(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function O(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function P(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=i+i,u=r+r,c=o+o,l=i*a,h=i*u,d=i*c,f=r*u,p=r*c,v=o*c,_=s*a,m=s*u,g=s*c;return t[0]=1-(f+v),t[1]=h+g,t[2]=d-m,t[3]=0,t[4]=h-g,t[5]=1-(l+v),t[6]=p+_,t[7]=0,t[8]=d+m,t[9]=p-_,t[10]=1-(l+f),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function A(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function S(t,e){var n=e[0],i=e[1],r=e[2],o=e[4],s=e[5],a=e[6],u=e[8],c=e[9],l=e[10];return t[0]=Math.sqrt(n*n+i*i+r*r),t[1]=Math.sqrt(o*o+s*s+a*a),t[2]=Math.sqrt(u*u+c*c+l*l),t}function L(t,e){var n=e[0]+e[5]+e[10],i=0;return n>0?(i=2*Math.sqrt(n+1),t[3]=.25*i,t[0]=(e[6]-e[9])/i,t[1]=(e[8]-e[2])/i,t[2]=(e[1]-e[4])/i):e[0]>e[5]&e[0]>e[10]?(i=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/i,t[0]=.25*i,t[1]=(e[1]+e[4])/i,t[2]=(e[8]+e[2])/i):e[5]>e[10]?(i=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/i,t[0]=(e[1]+e[4])/i,t[1]=.25*i,t[2]=(e[6]+e[9])/i):(i=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/i,t[0]=(e[8]+e[2])/i,t[1]=(e[6]+e[9])/i,t[2]=.25*i),t}function R(t,e,n,i){var r=e[0],o=e[1],s=e[2],a=e[3],u=r+r,c=o+o,l=s+s,h=r*u,d=r*c,f=r*l,p=o*c,v=o*l,_=s*l,m=a*u,g=a*c,b=a*l,y=i[0],x=i[1],w=i[2];return t[0]=(1-(p+_))*y,t[1]=(d+b)*y,t[2]=(f-g)*y,t[3]=0,t[4]=(d-b)*x,t[5]=(1-(h+_))*x,t[6]=(v+m)*x,t[7]=0,t[8]=(f+g)*w,t[9]=(v-m)*w,t[10]=(1-(h+p))*w,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function C(t,e,n,i,r){var o=e[0],s=e[1],a=e[2],u=e[3],c=o+o,l=s+s,h=a+a,d=o*c,f=o*l,p=o*h,v=s*l,_=s*h,m=a*h,g=u*c,b=u*l,y=u*h,x=i[0],w=i[1],E=i[2],M=r[0],T=r[1],O=r[2];return t[0]=(1-(v+m))*x,t[1]=(f+y)*x,t[2]=(p-b)*x,t[3]=0,t[4]=(f-y)*w,t[5]=(1-(d+m))*w,t[6]=(_+g)*w,t[7]=0,t[8]=(p+b)*E,t[9]=(_-g)*E,t[10]=(1-(d+v))*E,t[11]=0,t[12]=n[0]+M-(t[0]*M+t[4]*T+t[8]*O),t[13]=n[1]+T-(t[1]*M+t[5]*T+t[9]*O),t[14]=n[2]+O-(t[2]*M+t[6]*T+t[10]*O),t[15]=1,t}function k(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n+n,a=i+i,u=r+r,c=n*s,l=i*s,h=i*a,d=r*s,f=r*a,p=r*u,v=o*s,_=o*a,m=o*u;return t[0]=1-h-p,t[1]=l+m,t[2]=d-_,t[3]=0,t[4]=l-m,t[5]=1-c-p,t[6]=f+v,t[7]=0,t[8]=d+_,t[9]=f-v,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function N(t,e,n,i,r,o,s){var a=1/(n-e),u=1/(r-i),c=1/(o-s);return t[0]=2*o*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(r+i)*u,t[10]=(s+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*c,t[15]=0,t}function j(t,e,n,i,r){var o=1/Math.tan(e/2),s=1/(i-r);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(r+i)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*r*i*s,t[15]=0,t}function D(t,e,n,i){var r=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),s=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),u=2/(s+a),c=2/(r+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-((s-a)*u*.5),t[9]=(r-o)*c*.5,t[10]=i/(n-i),t[11]=-1,t[12]=0,t[13]=0,t[14]=i*n/(n-i),t[15]=0,t}function U(t,e,n,i,r,o,s){var a=1/(e-n),u=1/(i-r),c=1/(o-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*a,t[13]=(r+i)*u,t[14]=(s+o)*c,t[15]=1,t}function F(t,e,n,i){var r=void 0,o=void 0,s=void 0,a=void 0,u=void 0,c=void 0,l=void 0,h=void 0,d=void 0,f=void 0,p=e[0],v=e[1],_=e[2],m=i[0],g=i[1],b=i[2],y=n[0],x=n[1],w=n[2];return Math.abs(p-y)<J.EPSILON&&Math.abs(v-x)<J.EPSILON&&Math.abs(_-w)<J.EPSILON?mat4.identity(t):(l=p-y,h=v-x,d=_-w,f=1/Math.sqrt(l*l+h*h+d*d),l*=f,h*=f,d*=f,r=g*d-b*h,o=b*l-m*d,s=m*h-g*l,f=Math.sqrt(r*r+o*o+s*s),f?(f=1/f,r*=f,o*=f,s*=f):(r=0,o=0,s=0),a=h*s-d*o,u=d*r-l*s,c=l*o-h*r,f=Math.sqrt(a*a+u*u+c*c),f?(f=1/f,a*=f,u*=f,c*=f):(a=0,u=0,c=0),t[0]=r,t[1]=a,t[2]=l,t[3]=0,t[4]=o,t[5]=u,t[6]=h,t[7]=0,t[8]=s,t[9]=c,t[10]=d,t[11]=0,t[12]=-(r*p+o*v+s*_),t[13]=-(a*p+u*v+c*_),t[14]=-(l*p+h*v+d*_),t[15]=1,t)}function I(t,e,n,i){var r=e[0],o=e[1],s=e[2],a=i[0],u=i[1],c=i[2],l=r-n[0],h=o-n[1],d=s-n[2],f=l*l+h*h+d*d;f>0&&(f=1/Math.sqrt(f),l*=f,h*=f,d*=f);var p=u*d-c*h,v=c*l-a*d,_=a*h-u*l;return t[0]=p,t[1]=v,t[2]=_,t[3]=0,t[4]=h*_-d*v,t[5]=d*p-l*_,t[6]=l*v-h*p,t[7]=0,t[8]=l,t[9]=h,t[10]=d,t[11]=0,t[12]=r,t[13]=o,t[14]=s,t[15]=1,t}function B(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function q(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function Y(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function X(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function G(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function H(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t[4]=e[4]+n[4]*i,t[5]=e[5]+n[5]*i,t[6]=e[6]+n[6]*i,t[7]=e[7]+n[7]*i,t[8]=e[8]+n[8]*i,t[9]=e[9]+n[9]*i,t[10]=e[10]+n[10]*i,t[11]=e[11]+n[11]*i,t[12]=e[12]+n[12]*i,t[13]=e[13]+n[13]*i,t[14]=e[14]+n[14]*i,t[15]=e[15]+n[15]*i,t}function z(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function V(t,e){var n=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5],u=t[6],c=t[7],l=t[8],h=t[9],d=t[10],f=t[11],p=t[12],v=t[13],_=t[14],m=t[15],g=e[0],b=e[1],y=e[2],x=e[3],w=e[4],E=e[5],M=e[6],T=e[7],O=e[8],P=e[9],A=e[10],S=e[11],L=e[12],R=e[13],C=e[14],k=e[15];return Math.abs(n-g)<=J.EPSILON*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(i-b)<=J.EPSILON*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(r-y)<=J.EPSILON*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(o-x)<=J.EPSILON*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(s-w)<=J.EPSILON*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(a-E)<=J.EPSILON*Math.max(1,Math.abs(a),Math.abs(E))&&Math.abs(u-M)<=J.EPSILON*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(c-T)<=J.EPSILON*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(l-O)<=J.EPSILON*Math.max(1,Math.abs(l),Math.abs(O))&&Math.abs(h-P)<=J.EPSILON*Math.max(1,Math.abs(h),Math.abs(P))&&Math.abs(d-A)<=J.EPSILON*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(f-S)<=J.EPSILON*Math.max(1,Math.abs(f),Math.abs(S))&&Math.abs(p-L)<=J.EPSILON*Math.max(1,Math.abs(p),Math.abs(L))&&Math.abs(v-R)<=J.EPSILON*Math.max(1,Math.abs(v),Math.abs(R))&&Math.abs(_-C)<=J.EPSILON*Math.max(1,Math.abs(_),Math.abs(C))&&Math.abs(m-k)<=J.EPSILON*Math.max(1,Math.abs(m),Math.abs(k))}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=r,e.clone=o,e.copy=s,e.fromValues=a,e.set=u,e.identity=c,e.transpose=l,e.invert=h,e.adjoint=d,e.determinant=f,e.multiply=p,e.translate=v,e.scale=_,e.rotate=m,e.rotateX=g,e.rotateY=b,e.rotateZ=y,e.fromTranslation=x,e.fromScaling=w,e.fromRotation=E,e.fromXRotation=M,e.fromYRotation=T,e.fromZRotation=O,e.fromRotationTranslation=P,e.getTranslation=A,e.getScaling=S,e.getRotation=L,e.fromRotationTranslationScale=R,e.fromRotationTranslationScaleOrigin=C,e.fromQuat=k,e.frustum=N,e.perspective=j,e.perspectiveFromFieldOfView=D,e.ortho=U,e.lookAt=F,e.targetTo=I,e.str=B,e.frob=q,e.add=Y,e.subtract=X,e.multiplyScalar=G,e.multiplyScalarAndAdd=H,e.exactEquals=z,e.equals=V;var W=n(0),J=i(W);e.mul=p,e.sub=X},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(){var t=new y.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function o(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function s(t,e,n){n*=.5;var i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t}function a(t,e){var n=2*Math.acos(e[3]),i=Math.sin(n/2);return 0!=i?(t[0]=e[0]/i,t[1]=e[1]/i,t[2]=e[2]/i):(t[0]=1,t[1]=0,t[2]=0),n}function u(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=n[0],u=n[1],c=n[2],l=n[3];return t[0]=i*l+s*a+r*c-o*u,t[1]=r*l+s*u+o*a-i*c,t[2]=o*l+s*c+i*u-r*a,t[3]=s*l-i*a-r*u-o*c,t}function c(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(n),u=Math.cos(n);return t[0]=i*u+s*a,t[1]=r*u+o*a,t[2]=o*u-r*a,t[3]=s*u-i*a,t}function l(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(n),u=Math.cos(n);return t[0]=i*u-o*a,t[1]=r*u+s*a,t[2]=o*u+i*a,t[3]=s*u-r*a,t}function h(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(n),u=Math.cos(n);return t[0]=i*u+r*a,t[1]=r*u-i*a,t[2]=o*u+s*a,t[3]=s*u-o*a,t}function d(t,e){var n=e[0],i=e[1],r=e[2];return t[0]=n,t[1]=i,t[2]=r,t[3]=Math.sqrt(Math.abs(1-n*n-i*i-r*r)),t}function f(t,e,n,i){var r=e[0],o=e[1],s=e[2],a=e[3],u=n[0],c=n[1],l=n[2],h=n[3],d=void 0,f=void 0,p=void 0,v=void 0,_=void 0;return f=r*u+o*c+s*l+a*h,f<0&&(f=-f,u=-u,c=-c,l=-l,h=-h),1-f>1e-6?(d=Math.acos(f),p=Math.sin(d),v=Math.sin((1-i)*d)/p,_=Math.sin(i*d)/p):(v=1-i,_=i),t[0]=v*r+_*u,t[1]=v*o+_*c,t[2]=v*s+_*l,t[3]=v*a+_*h,t}function p(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=n*n+i*i+r*r+o*o,a=s?1/s:0;return t[0]=-n*a,t[1]=-i*a,t[2]=-r*a,t[3]=o*a,t}function v(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function _(t,e){var n=e[0]+e[4]+e[8],i=void 0;if(n>0)i=Math.sqrt(n+1),t[3]=.5*i,i=.5/i,t[0]=(e[5]-e[7])*i,t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var o=(r+1)%3,s=(r+2)%3;i=Math.sqrt(e[3*r+r]-e[3*o+o]-e[3*s+s]+1),t[r]=.5*i,i=.5/i,t[3]=(e[3*o+s]-e[3*s+o])*i,t[o]=(e[3*o+r]+e[3*r+o])*i,t[s]=(e[3*s+r]+e[3*r+s])*i}return t}function m(t,e,n,i){var r=.5*Math.PI/180;e*=r,n*=r,i*=r;var o=Math.sin(e),s=Math.cos(e),a=Math.sin(n),u=Math.cos(n),c=Math.sin(i),l=Math.cos(i);return t[0]=o*u*l-s*a*c,t[1]=s*a*l+o*u*c,t[2]=s*u*c-o*a*l,t[3]=s*u*l+o*a*c,t}function g(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}Object.defineProperty(e,"__esModule",{value:!0}),e.setAxes=e.sqlerp=e.rotationTo=e.equals=e.exactEquals=e.normalize=e.sqrLen=e.squaredLength=e.len=e.length=e.lerp=e.dot=e.scale=e.mul=e.add=e.set=e.copy=e.fromValues=e.clone=void 0,e.create=r,e.identity=o,e.setAxisAngle=s,e.getAxisAngle=a,e.multiply=u,e.rotateX=c,e.rotateY=l,e.rotateZ=h,e.calculateW=d,e.slerp=f,e.invert=p,e.conjugate=v,e.fromMat3=_,e.fromEuler=m,e.str=g;var b=n(0),y=i(b),x=n(1),w=i(x),E=n(2),M=i(E),T=n(3),O=i(T),P=(e.clone=O.clone,e.fromValues=O.fromValues,e.copy=O.copy,e.set=O.set,e.add=O.add,e.mul=u,e.scale=O.scale,e.dot=O.dot,e.lerp=O.lerp,e.length=O.length),A=(e.len=P,e.squaredLength=O.squaredLength),S=(e.sqrLen=A,e.normalize=O.normalize);e.exactEquals=O.exactEquals,e.equals=O.equals,e.rotationTo=function(){var t=M.create(),e=M.fromValues(1,0,0),n=M.fromValues(0,1,0);return function(i,r,o){var a=M.dot(r,o);return a<-.999999?(M.cross(t,e,r),M.len(t)<1e-6&&M.cross(t,n,r),M.normalize(t,t),s(i,t,Math.PI),i):a>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(M.cross(t,r,o),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+a,S(i,i))}}(),e.sqlerp=function(){var t=r(),e=r();return function(n,i,r,o,s,a){return f(t,i,s,a),f(e,r,o,a),f(n,t,e,2*a*(1-a)),n}}(),e.setAxes=function(){var t=w.create();return function(e,n,i,r){return t[0]=i[0],t[3]=i[1],t[6]=i[2],t[1]=r[0],t[4]=r[1],t[7]=r[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],S(e,_(e,t))}}()},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(){var t=new I.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t}function o(t){var e=new I.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e}function s(t,e){var n=new I.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n}function a(t,e){return t[0]=e[0],t[1]=e[1],t}function u(t,e,n){return t[0]=e,t[1]=n,t}function c(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function l(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function h(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function d(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function f(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function p(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function v(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function _(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function m(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function g(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function b(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t}function y(t,e){var n=e[0]-t[0],i=e[1]-t[1];return Math.sqrt(n*n+i*i)}function x(t,e){var n=e[0]-t[0],i=e[1]-t[1];return n*n+i*i}function w(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}function E(t){var e=t[0],n=t[1];return e*e+n*n}function M(t,e){return t[0]=-e[0],t[1]=-e[1],t}function T(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function O(t,e){var n=e[0],i=e[1],r=n*n+i*i;return r>0&&(r=1/Math.sqrt(r),t[0]=e[0]*r,t[1]=e[1]*r),t}function P(t,e){return t[0]*e[0]+t[1]*e[1]}function A(t,e,n){var i=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=i,t}function S(t,e,n,i){var r=e[0],o=e[1];return t[0]=r+i*(n[0]-r),t[1]=o+i*(n[1]-o),t}function L(t,e){e=e||1;var n=2*I.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function R(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t}function C(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[2]*r+n[4],t[1]=n[1]*i+n[3]*r+n[5],t}function k(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[3]*r+n[6],t[1]=n[1]*i+n[4]*r+n[7],t}function N(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t}function j(t){return"vec2("+t[0]+", "+t[1]+")"}function D(t,e){return t[0]===e[0]&&t[1]===e[1]}function U(t,e){var n=t[0],i=t[1],r=e[0],o=e[1];return Math.abs(n-r)<=I.EPSILON*Math.max(1,Math.abs(n),Math.abs(r))&&Math.abs(i-o)<=I.EPSILON*Math.max(1,Math.abs(i),Math.abs(o))}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.sqrDist=e.dist=e.div=e.mul=e.sub=e.len=void 0,e.create=r,e.clone=o,e.fromValues=s,e.copy=a,e.set=u,e.add=c,e.subtract=l,e.multiply=h,e.divide=d,e.ceil=f,e.floor=p,e.min=v,e.max=_,e.round=m,e.scale=g,e.scaleAndAdd=b,e.distance=y,e.squaredDistance=x,e.length=w,e.squaredLength=E,e.negate=M,e.inverse=T,e.normalize=O,e.dot=P,e.cross=A,e.lerp=S,e.random=L,e.transformMat2=R,e.transformMat2d=C,e.transformMat3=k,e.transformMat4=N,e.str=j,e.exactEquals=D,e.equals=U;var F=n(0),I=i(F);e.len=w,e.sub=l,e.mul=h,e.div=d,e.dist=y,e.sqrDist=x,e.sqrLen=E,e.forEach=function(){var t=r();return function(e,n,i,r,o,s){var a=void 0,u=void 0;for(n||(n=2),i||(i=0),u=r?Math.min(r*n+i,e.length):e.length,a=i;a<u;a+=n)t[0]=e[a],t[1]=e[a+1],o(t,t,s),e[a]=t[0],e[a+1]=t[1];return e}}()}])})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(4),c=i(u),l=n(44),h=i(l),d=n(2),f=function(t){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;r(this,e);var s=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return s.uvs=[],s.normals=[],s.program=t,s.state=n||new c.default(s.program.gl),n||(s.state.depthTest=!0),s.instanceCount=0,s.drawType=i,s._attributes=[],s._vertices=[],s._indices=[],s.matrix=d.mat4.create(),s._vertexSize=0,s._numItems=0,s.indexBuffer=null,s}return s(e,t),a(e,[{key:"addIndices",value:function(t,e){var n=this.program.gl,i=e?n.DYNAMIC_DRAW:n.STATIC_DRAW;this._indices=t,this.indexBuffer||(this.indexBuffer=n.createBuffer()),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,new Uint16Array(t),i)}},{key:"addPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"aPosition",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;this._vertices=t,this._vertexSize=this._vertices.length,this._numItems=this._vertexSize/n,this.addAttribute(t,e,n)}},{key:"updatePosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"aPosition",e=arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;this._vertices=e,this._vertexSize=this._vertices.length,this._numItems=this._vertexSize/n,this.updateAttribute(t,e)}},{key:"addAttribute",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,i=arguments[3],r=this.program.gl,o=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,o),r.bufferData(r.ARRAY_BUFFER,new Float32Array(t),r.STATIC_DRAW),this._attributes.push({name:e,data:t,itemSize:n,numItems:this._numItems,buffer:o,instance:i}),this.program.addAttributeLocation(e)}},{key:"updateAttribute",value:function(t,e){for(var n=this.program.gl,i=0;i<this._attributes.length;i++){var r=this._attributes[i];if(r.name===t){var o=r.buffer;n.bindBuffer(n.ARRAY_BUFFER,o),n.bufferData(n.ARRAY_BUFFER,new Float32Array(e),n.STATIC_DRAW),r.data=e;break}}}}]),e}(h.default);e.default=f,t.exports=e.default},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=0,o=1,s=2,a=3,u=4,c=function(){function t(e){n(this,t),this.gl=e,this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.data=0,this.blendMode=0,this.blendModes={source:{alpha:this.gl.SRC_ALPHA},dest:{one:this.gl.ONE}}}return i(t,[{key:"setState",value:function(t){this.setBlend(t.activeState[r]),this.setDepthTest(t.activeState[o]),this.setFrontFace(t.activeState[s]),this.setCullFace(t.activeState[a]),this.setBlendMode(t.activeState[u])}},{key:"setBlend",value:function(t){t=t?1:0,this.activeState[r]!==t&&(this.activeState[r]=t,this.gl[t?"enable":"disable"](this.gl.BLEND))}},{key:"setBlendMode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"alpha",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"one";t!==this.activeState[u]&&(this.activeState[u]=t,this.gl.blendFunc(this.blendModes.source[e],this.blendModes.dest[n]))}},{key:"setDepthTest",value:function(t){t=t?1:0,this.activeState[o]!==t&&(this.activeState[o]=t,this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST))}},{key:"setCullFace",value:function(t){t=t?1:0,this.activeState[a]!==t&&(this.activeState[a]=t,this.gl[t?"enable":"disable"](this.gl.CULL_FACE))}},{key:"setFrontFace",value:function(t){t=t?1:0,this.activeState[s]!==t&&(this.activeState[s]=t,this.gl.frontFace(this.gl[t?"CW":"CCW"]))}},{key:"blend",get:function(){return this.activeState[r]},set:function(t){this.activeState[r]=t}},{key:"culling",get:function(){return this.activeState[CULLING]},set:function(t){this.activeState[CULLING]=t}},{key:"depthTest",get:function(){return this.activeState[o]},set:function(t){this.activeState[o]=t}},{key:"clockwiseFrontFace",get:function(){return this.activeState[s]},set:function(t){this.activeState[s]=t}},{key:"blendMode",get:function(){return this.activeState[u]},set:function(t){this.activeState[u]=t}}]),t}();e.default=c,t.exports=e.default},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(){n(this,t),this.indexUniq=0,this.middlePointIndexCache={},this.vertices=[],this.isNormalised=!0}return i(t,[{key:"multiplyTriangles",value:function(t,e,n){this.indexUniq=n.length,this.vertices=n;var i=e.slice();this.isNormalised=!0;for(var r=0;r<this.vertices.length&&this.isNormalised;r++)for(var o=0;o<this.vertices[r].length;o++)Math.abs(this.vertices[r][o])>1&&(this.isNormalised=!1);for(var r=0;r<t;r++){for(var s=[],o=0;o<i.length;o++){var a=i[o],u=this.getMiddlePoint(a[0],a[1]),c=this.getMiddlePoint(a[1],a[2]),l=this.getMiddlePoint(a[2],a[0]);s.push([a[0],u,l]),s.push([a[1],c,u]),s.push([a[2],c,l]),s.push([u,c,l])}i=s.slice()}return i}},{key:"addVertex",value:function(t){var e=this.isNormalised?Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]):1;return this.vertices.push([t[0]/e,t[1]/e,t[2]/e]),this.indexUniq++}},{key:"getMiddlePoint",value:function(t,e){var n=t<e,i=n?t:e,r=n?e:t,o=(i<<32)+r,s=this.vertices[t],a=this.vertices[e],u=[(s[0]+a[0])/2,(s[1]+a[1])/2,(s[2]+a[2])/2],c=this.addVertex(u);return this.middlePointIndexCache[o]=c,c}}]),t}();e.default=new r,t.exports=e.default},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(){n(this,t)}return i(t,[{key:"separate",value:function(t,e){for(var n=[],i=[],r=0;r<t.length;r++)n.push(t[r][0],t[r][1],t[r][2]),i.push(t[r][0],t[r][1],t[r][2]);for(var o=e.slice(),s=[],a=0;a<n.length;a++)s[a]=o[n[a]].slice(),n[a]=a;return{faces:n,vertices:s}}}]),t}();e.default=new r,t.exports=e.default},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(14);e.default=new(function(){function t(){i(this,t),this.extensions={}}return r(t,[{key:"init",value:function(){for(var t=POLY.gl,e=0;e<o.extensions.length;e++)this.extensions[o.extensions[e]]=t.getExtension(o.extensions[e])}},{key:"checkExtension",value:function(t){return!!this.extensions[t]}},{key:"getExtension",value:function(t){return this.extensions[t]}}]),t}()),t.exports=e.default},function(t,e,n){"use strict";function i(t,e,n){if(s.call(this),n=n||{},"string"!=typeof t||"string"!=typeof e)throw new Error("Both name and url are required for constructing a resource.");this.name=t,this.url=e,this.isDataUrl=0===this.url.indexOf("data:"),this.data=null,this.crossOrigin=n.crossOrigin===!0?"anonymous":n.crossOrigin,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.isJson=!1,this.isXml=!1,this.isImage=!1,this.isAudio=!1,this.isVideo=!1,this.isComplete=!1,this.isLoading=!1,this._dequeue=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this)}function r(t){return t.toString().replace("object ","")}function o(t,e,n){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=n)}var s=n(11),a=n(12),u=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),c=null,l=0,h=200,d=204;i.prototype=Object.create(s.prototype),i.prototype.constructor=i,t.exports=i,i.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this.isComplete=!0,this.isLoading=!1,this.emit("complete",this)},i.prototype.abort=function(t){if(!this.error){if(this.error=new Error(t),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if("undefined"!=typeof this.data.src)this.data.src="";else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},i.prototype.load=function(t){if(!this.isLoading)if(this.isComplete){if(t){var e=this;setTimeout(function(){t(e)},1)}}else switch(t&&this.once("complete",t),this.isLoading=!0,this.emit("start",this),this.crossOrigin!==!1&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case i.LOAD_TYPE.IMAGE:this._loadElement("image");break;case i.LOAD_TYPE.AUDIO:this._loadSourceElement("audio");break;case i.LOAD_TYPE.VIDEO:this._loadSourceElement("video");break;case i.LOAD_TYPE.XHR:default:u&&this.crossOrigin?this._loadXdr():this._loadXhr()}},i.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&"undefined"!=typeof window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url);var e="is"+t[0].toUpperCase()+t.substring(1);this[e]===!1&&(this[e]=!0),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},i.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&"undefined"!=typeof window.Audio?this.data=new Audio:this.data=document.createElement(t),null===this.data)return void this.abort("Unsupported element "+t);if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=0;e<this.url.length;++e)this.data.appendChild(this._createSource(t,this.url[e]));else this.data.appendChild(this._createSource(t,this.url));this["is"+t[0].toUpperCase()+t.substring(1)]=!0,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()},i.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),this.xhrType===i.XHR_RESPONSE_TYPE.JSON||this.xhrType===i.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=i.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},i.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXdrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){t.send()},0)},i.prototype._createSource=function(t,e,n){n||(n=t+"/"+e.substr(e.lastIndexOf(".")+1));var i=document.createElement("source");return i.src=e,i.type=n,i},i.prototype._onError=function(t){this.abort("Failed to load element using "+t.target.nodeName)},i.prototype._onProgress=function(t){t&&t.lengthComputable&&this.emit("progress",this,t.loaded/t.total)},i.prototype._xhrOnError=function(){var t=this.xhr;this.abort(r(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},i.prototype._xhrOnAbort=function(){this.abort(r(this.xhr)+" Request was aborted by the user.")},i.prototype._xdrOnTimeout=function(){this.abort(r(this.xhr)+" Request timed out.")},i.prototype._xhrOnLoad=function(){var t=this.xhr,e="undefined"==typeof t.status?t.status:h;if(!(e===h||e===d||e===l&&t.responseText.length>0))return void this.abort("["+t.status+"]"+t.statusText+":"+t.responseURL);if(this.xhrType===i.XHR_RESPONSE_TYPE.TEXT)this.data=t.responseText;else if(this.xhrType===i.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(t.responseText),this.isJson=!0}catch(t){return void this.abort("Error trying to parse loaded json:",t)}else if(this.xhrType===i.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var n=new DOMParser;this.data=n.parseFromString(t.responseText,"text/xml")}else{var r=document.createElement("div");r.innerHTML=t.responseText,this.data=r}this.isXml=!0}catch(t){return void this.abort("Error trying to parse loaded xml:",t)}else this.data=t.response||t.responseText;this.complete()},i.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";e=e||window.location,c||(c=document.createElement("a")),c.href=t,t=a(c.href,{
strictMode:!0});var n=!t.port&&""===e.port||t.port===e.port,i=t.protocol?t.protocol+":":"";return t.host===e.hostname&&n&&i===e.protocol?"":"anonymous"},i.prototype._determineXhrType=function(){return i._xhrTypeMap[this._getExtension()]||i.XHR_RESPONSE_TYPE.TEXT},i.prototype._determineLoadType=function(){return i._loadTypeMap[this._getExtension()]||i.LOAD_TYPE.XHR},i.prototype._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var n=t.indexOf("/");e=t.substring(n+1,t.indexOf(";",n))}else{var i=t.indexOf("?");i!==-1&&(t=t.substring(0,i)),e=t.substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},i.prototype._getMimeFromXhrType=function(t){switch(t){case i.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case i.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case i.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case i.XHR_RESPONSE_TYPE.JSON:return"application/json";case i.XHR_RESPONSE_TYPE.DEFAULT:case i.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},i.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},i.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},i._loadTypeMap={gif:i.LOAD_TYPE.IMAGE,png:i.LOAD_TYPE.IMAGE,bmp:i.LOAD_TYPE.IMAGE,jpg:i.LOAD_TYPE.IMAGE,jpeg:i.LOAD_TYPE.IMAGE,tif:i.LOAD_TYPE.IMAGE,tiff:i.LOAD_TYPE.IMAGE,webp:i.LOAD_TYPE.IMAGE,tga:i.LOAD_TYPE.IMAGE,"svg+xml":i.LOAD_TYPE.IMAGE},i._xhrTypeMap={xhtml:i.XHR_RESPONSE_TYPE.DOCUMENT,html:i.XHR_RESPONSE_TYPE.DOCUMENT,htm:i.XHR_RESPONSE_TYPE.DOCUMENT,xml:i.XHR_RESPONSE_TYPE.DOCUMENT,tmx:i.XHR_RESPONSE_TYPE.DOCUMENT,tsx:i.XHR_RESPONSE_TYPE.DOCUMENT,svg:i.XHR_RESPONSE_TYPE.DOCUMENT,gif:i.XHR_RESPONSE_TYPE.BLOB,png:i.XHR_RESPONSE_TYPE.BLOB,bmp:i.XHR_RESPONSE_TYPE.BLOB,jpg:i.XHR_RESPONSE_TYPE.BLOB,jpeg:i.XHR_RESPONSE_TYPE.BLOB,tif:i.XHR_RESPONSE_TYPE.BLOB,tiff:i.XHR_RESPONSE_TYPE.BLOB,webp:i.XHR_RESPONSE_TYPE.BLOB,tga:i.XHR_RESPONSE_TYPE.BLOB,json:i.XHR_RESPONSE_TYPE.JSON,text:i.XHR_RESPONSE_TYPE.TEXT,txt:i.XHR_RESPONSE_TYPE.TEXT},i.setExtensionLoadType=function(t,e){o(i._loadTypeMap,t,e)},i.setExtensionXhrType=function(t,e){o(i._xhrTypeMap,t,e)}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=n(1),a=r(s),u=n(78),c=i(u),l=n(77),h=i(l),d=function(){function t(e){o(this,t),this.program=new a.Program(c.default,h.default,{texture:{type:"texture",value:0},gradientMap:{type:"texture",value:1}});var n=new a.State(this.program.gl);this.geom=new a.geometry.Quad(this.program,null,n),this.geom.addAttribute(this.geom.uvs,"aUv",2),this.texture=new a.Texture(e),this.textureGradient=new a.Texture(window.ASSET_URL+"image/gradient-map.jpg")}return t.prototype.render=function(){this.program.bind(),this.texture.bind(0),this.textureGradient.bind(1),a.GL.draw(this.geom)},t}();e.default=d,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=n(1),a=r(s),u=n(20),c=i(u),l=n(21),h=i(l),d=n(88),f=i(d),p=n(87),v=i(p),_=n(2),m=function(){function t(){o(this,t),this.terrain=new c.default(5),this.terrain.generate(20),this.program=new a.Program(f.default,v.default,{clipY:{type:"float",value:0},dir:{type:"float",value:0},gradientMap:{type:"texture",value:0},density:{type:"float",value:.27},gradient:{type:"float",value:5}}),this.w=10,this.texture=new a.Texture(window.ASSET_URL+"image/gradient-map.jpg"),this.quad=new h.default(this.program,{w:this.w,h:this.w,widthSegment:this.terrain.size-1,heightSegment:this.terrain.size-1}),this.quad.state.depthTest=!0,this.quad.rotation.x=-Math.PI/2,this.quad.position.y=-.6;for(var e=1/0,n=-(1/0),i=0,r=(this.terrain.size-1)/2,s=0;s<this.terrain.size;s++)for(var u=0;u<this.terrain.size;u++){var l=this.terrain.get(u,s);l<e&&(e=l),l>n&&(n=l),l<0&&(l=0),0!==s&&s!==this.terrain.size&&0!==u&&u!==this.terrain.size||(l=0),0!==s&&s!==this.terrain.size-1&&0!==u&&u!==this.terrain.size-1||(l=0);var d=Math.sqrt(Math.pow(r-u,2)+Math.pow(r-s,2));d>i&&(i=d);var p=this.map(d,0,23,0,1);this.quad._vertices[3*(s*this.terrain.size+u)+2]=l/105*Math.pow(p,2)}this.quad.updateAttribute("aPosition",this.quad._vertices),this.quad.separateFaces();for(var m=[],g=0;g<this.quad._vertices.length;g+=9){var b=[this.quad._vertices[g],this.quad._vertices[g+1],this.quad._vertices[g+2]],y=[this.quad._vertices[g+3],this.quad._vertices[g+4],this.quad._vertices[g+5]],x=[this.quad._vertices[g+6],this.quad._vertices[g+7],this.quad._vertices[g+8]],w=[],E=[];_.vec3.sub(E,b,y),_.vec3.sub(w,y,x);var M=[];_.vec3.cross(M,w,E);var T=[];T[0]=Math.abs(M[0]/(Math.abs(M[0])+Math.abs(M[1])+Math.abs(M[2]))),T[1]=Math.abs(M[1]/(Math.abs(M[0])+Math.abs(M[1])+Math.abs(M[2]))),T[2]=Math.abs(M[2]/(Math.abs(M[0])+Math.abs(M[1])+Math.abs(M[2]))),m.push(T[0],T[1],T[2]),m.push(T[0],T[1],T[2]),m.push(T[0],T[1],T[2])}this.quad.addAttribute(m,"aNormal",3)}return t.prototype.map=function(t,e,n,i,r){return(r-i)*((t-e)/(n-e))+i},t.prototype.render=function(){this.program.bind(),this.texture.bind(),a.GL.draw(this.quad)},t}();e.default=m,t.exports=e.default},function(t,e,n){"use strict";function i(){}function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(){this._events=new i,this._eventsCount=0}var s=Object.prototype.hasOwnProperty,a="~";Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(a=!1)),o.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)s.call(t,e)&&n.push(a?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},o.prototype.listeners=function(t,e){var n=a?a+t:t,i=this._events[n];if(e)return!!i;if(!i)return[];if(i.fn)return[i.fn];for(var r=0,o=i.length,s=new Array(o);r<o;r++)s[r]=i[r].fn;return s},o.prototype.emit=function(t,e,n,i,r,o){var s=a?a+t:t;if(!this._events[s])return!1;var u,c,l=this._events[s],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,i),!0;case 5:return l.fn.call(l.context,e,n,i,r),!0;case 6:return l.fn.call(l.context,e,n,i,r,o),!0}for(c=1,u=new Array(h-1);c<h;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var d,f=l.length;for(c=0;c<f;c++)switch(l[c].once&&this.removeListener(t,l[c].fn,void 0,!0),h){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,e);break;case 3:l[c].fn.call(l[c].context,e,n);break;case 4:l[c].fn.call(l[c].context,e,n,i);break;default:if(!u)for(d=1,u=new Array(h-1);d<h;d++)u[d-1]=arguments[d];l[c].fn.apply(l[c].context,u)}}return!0},o.prototype.on=function(t,e,n){var i=new r(e,n||this),o=a?a+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],i]:this._events[o].push(i):(this._events[o]=i,this._eventsCount++),this},o.prototype.once=function(t,e,n){var i=new r(e,n||this,!0),o=a?a+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],i]:this._events[o].push(i):(this._events[o]=i,this._eventsCount++),this},o.prototype.removeListener=function(t,e,n,r){var o=a?a+t:t;if(!this._events[o])return this;if(!e)return 0===--this._eventsCount?this._events=new i:delete this._events[o],this;var s=this._events[o];if(s.fn)s.fn!==e||r&&!s.once||n&&s.context!==n||(0===--this._eventsCount?this._events=new i:delete this._events[o]);else{for(var u=0,c=[],l=s.length;u<l;u++)(s[u].fn!==e||r&&!s[u].once||n&&s[u].context!==n)&&c.push(s[u]);c.length?this._events[o]=1===c.length?c[0]:c:0===--this._eventsCount?this._events=new i:delete this._events[o]}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=a?a+t:t,this._events[e]&&(0===--this._eventsCount?this._events=new i:delete this._events[e])):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=a,o.EventEmitter=o,t.exports=o},function(t,e){"use strict";t.exports=function(t,e){e=e||{};for(var n={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},i=n.parser[e.strictMode?"strict":"loose"].exec(t),r={},o=14;o--;)r[n.key[o]]=i[o]||"";return r[n.q.name]={},r[n.key[12]].replace(n.q.parser,function(t,e,i){e&&(r[n.q.name][e]=i)}),r}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(2),a=n(74),u=i(a),c=n(73),l=i(c),h=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r(this,t),e=e||u.default,n=n||l.default;var o=POLY.gl;this.gl=o,this.cacheAttributesLocation={},this.cacheUniformsLocation={},this.program=o.createProgram();var s=this._createShader(e,!0),a=this._createShader(n,!1);if(this._attachShaders(s,a),o.linkProgram(this.program),!o.getProgramParameter(this.program,o.LINK_STATUS))throw"Couldn't initialise program";o.useProgram(this.program),this._checkIfBasicMatrices(i),this._createGetterSetterUniforms(i);for(var c in i){this.addUniformLocation(c);var h=i[c].value;this.uniforms[c]=h}this.bind()}return o(t,[{key:"bind",value:function(){this.gl.useProgram(this.program)}},{key:"addUniformLocation",value:function(t){this.cacheUniformsLocation[t]=this.gl.getUniformLocation(this.program,t)}},{key:"getUniformLocation",value:function(t){return void 0!==this.cacheUniformsLocation[t]?this.cacheUniformsLocation[t]:(this.addUniformLocation(t),this.getUniformLocation(t))}},{key:"_checkIfBasicMatrices",value:function(t){for(var e=["projectionMatrix","modelMatrix","viewMatrix"],n=0;n<e.length;n++)t[e[n]]||(t[e[n]]={value:s.mat4.create(),type:"mat4"})}},{key:"_createGetterSetterUniforms",value:function(t){var e=this.gl,n=(this.program,this);this.uniforms=new Proxy(t,{get:function(t,e){return e in t?t[e].value:void console.log("Getting non-existant property '"+e+"'")},set:function(t,i,r){if(!(i in t))return console.log("Setting non-existant property '"+i+"', initial value: "+r),!1;t[i].value=r;var o=t[i].type,s=POLY.CONST.uniformTypes[o];return o.indexOf("mat")===-1?"texture"===o?e[s](n.getUniformLocation(i),r,t[i].index):e[s](n.getUniformLocation(i),r):e[s](n.getUniformLocation(i),!1,r),!0}})}},{key:"addAttributeLocation",value:function(t){void 0===this.cacheAttributesLocation[t]&&(this.cacheAttributesLocation[t]=this.gl.getAttribLocation(this.program,t))}},{key:"getAttributeLocation",value:function(t){return void 0!==this.cacheAttributesLocation[t]?this.cacheAttributesLocation[t]:(this.addAttributeLocation(t),this.getAttributeLocation(t))}},{key:"_attachShaders",value:function(t,e){this.gl.attachShader(this.program,t),this.gl.attachShader(this.program,e)}},{key:"_createShader",value:function(t,e){var n=this.gl,i=void 0;if(i=e?n.createShader(n.VERTEX_SHADER):n.createShader(n.FRAGMENT_SHADER),this.gl.shaderSource(i,t),this.gl.compileShader(i),!n.getShaderParameter(i,n.COMPILE_STATUS))throw n.getShaderInfoLog(i);return i}}]),t}();e.default=h,t.exports=e.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={uniformTypes:{float:"uniform1f",vec2:"uniform2fv",vec3:"uniform3fv",vec4:"uniform4fv",int:"uniform1i",texture:"uniform1i",mat3:"uniformMatrix3fv",mat4:"uniformMatrix4fv"},extensions:["EXT_shader_texture_lod","EXT_sRGB","EXT_frag_depth","OES_texture_float","OES_texture_half_float","OES_texture_float_linear","OES_texture_half_float_linear","OES_standard_derivatives","WEBGL_depth_texture","EXT_texture_filter_anisotropic","ANGLE_instanced_arrays","WEBGL_draw_buffers"]},t.exports=e.default},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(t){if(l===setTimeout)return setTimeout(t,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function o(t){if(h===clearTimeout)return clearTimeout(t);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function s(){v&&f&&(v=!1,f.length?p=f.concat(p):_=-1,p.length&&a())}function a(){if(!v){var t=r(s);v=!0;for(var e=p.length;e;){for(f=p,p=[];++_<e;)f&&f[_].run();_=-1,e=p.length}f=null,v=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var l,h,d=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(t){l=n}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(t){h=i}}();var f,p=[],v=!1,_=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];p.push(new u(t,e)),1!==p.length||v||r(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(t){return[]},d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(t,e){"use strict";function n(){}function i(t,e,n){var i=0,r=t.length;!function o(s){return s||i===r?void(n&&n(s)):void e(t[i++],o)}()}function r(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}function o(t,e){function i(t,e,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");if(a.started=!0,null==t&&a.idle())return void setTimeout(function(){a.drain()},1);var r={data:t,callback:"function"==typeof i?i:n};e?a._tasks.unshift(r):a._tasks.push(r),setTimeout(function(){a.process()},1)}function o(t){return function(){s-=1,t.callback.apply(t,arguments),null!=arguments[0]&&a.error(arguments[0],t.data),s<=a.concurrency-a.buffer&&a.unsaturated(),a.idle()&&a.drain(),a.process()}}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var s=0,a={_tasks:[],concurrency:e,saturated:n,unsaturated:n,buffer:e/4,empty:n,drain:n,error:n,started:!1,paused:!1,push:function(t,e){i(t,!1,e)},kill:function(){a.drain=n,a._tasks=[]},unshift:function(t,e){i(t,!0,e)},process:function(){for(;!a.paused&&s<a.concurrency&&a._tasks.length;){var e=a._tasks.shift();0===a._tasks.length&&a.empty(),s+=1,s===a.concurrency&&a.saturated(),t(e.data,r(o(e)))}},length:function(){return a._tasks.length},running:function(){return s},idle:function(){return a._tasks.length+s===0},pause:function(){a.paused!==!0&&(a.paused=!0)},resume:function(){if(a.paused!==!1){a.paused=!1;for(var t=1;t<=a.concurrency;t++)a.process()}}};return a}t.exports={eachSeries:i,queue:o}},function(t,e){t.exports="\nprecision highp float;\n\nuniform sampler2D refraction;\nuniform sampler2D reflection;\nuniform sampler2D dudvMap;\nuniform float time;\n\n// varying vec4 clipSpace;\nvarying vec4 clipSpace;\nvarying vec2 vUv;\nvarying vec3 vPos;\nvarying float visibility;\nuniform vec3 cameraPosition;\n\nuniform sampler2D gradientMap;\n\nfloat luma(vec3 color) {\n  return dot(color, vec3(0.299, 0.587, 0.114));\n}\n\n\nconst float waveStrength = 0.005;\n#define SKY_COLOR vec3(27./255., 27./255., 27./255.)\n\nvoid main(void)\n{\n    vec2 uv = vec2(clipSpace.xy / clipSpace.w) / 2. + .5;\n\n    vec2 refractTexCoord = vec2(uv.x, uv.y);\n    vec2 reflectTexCoord = vec2(uv.x, uv.y);\n\n    vec2 distortion1 = (texture2D(dudvMap, vec2(vUv.x + time, vUv.y)).rg * 2.0 - 1.0) * waveStrength;\n    vec2 distortion2 = (texture2D(dudvMap, vec2(-vUv.x + time, vUv.y + time)).rg * 2.0 - 1.0) * waveStrength;\n\n    vec2 totalDistortion = distortion1 + distortion2;\n    // vec2 totalDistortion = distortion1 + distortion2;\n\n    refractTexCoord += totalDistortion;\n    refractTexCoord = clamp(refractTexCoord, 0.001, 0.999);\n\n    reflectTexCoord += totalDistortion;\n    // reflectTexCoord = clamp(refractTexCoord, 0.001, 0.999);\n    reflectTexCoord.x = clamp(reflectTexCoord.x, 0.001, 0.999);\n    // reflectTexCoord.y = clamp(reflectTexCoord.y, 0.001, 0.999);\n\n    vec3 refractColor = texture2D(refraction, refractTexCoord).rgb;\n    vec3 reflectColor = texture2D(reflection, reflectTexCoord).rgb;\n\n    vec3 viewVector = normalize(cameraPosition);\n    float dotProduct = dot(viewVector, vec3(0.,1.,0.));\n\n    vec3 color = mix(reflectColor, refractColor, dotProduct);\n    // vec3 color = mix(refractColor, reflectColor, pow(dotProduct, 1.));\n    color = mix(color, vec3(189.0/255.,50./255.,50./255.), 0.15);\n    color = mix(SKY_COLOR, color, pow(visibility, .2));\n    // color = mix(SKY_COLOR, color, pow(visibility, .2));\n\n\n    float br = 1.0 - luma(color.rgb);\n    vec2 uvGrad = vec2(br, 0.5);\n    vec3 colorGrad = texture2D(gradientMap, uvGrad).rgb;\n    color.rgb = mix(color.rgb, colorGrad, .5);\n\n    // float dist = length(vPos) * (10.0 + sin(time * 10.) * 2.);\n    // color = mix(vec3(1.0, 0., 0.), color, dist);\n\n\n    // color +=  * dist;\n\n    // gl_FragColor = vec4(dist, dist, dist, 1.);\n    gl_FragColor = vec4(color, 1.);\n}\n"},function(t,e){t.exports="precision highp float;\n\nattribute vec3 aPosition;\nattribute vec2 aUv;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform vec3 cameraPosition;\n\nuniform float gradient;\nuniform float density;\n\nvarying vec4 clipSpace;\nvarying vec3 vPos;\nvarying vec2 vUv;\nvarying vec3 toCameraVector;\nvarying float visibility;\n\nconst float tiling = 6.0;\n\n\nvoid main(void) {\n    vUv = aUv;\n\n    vPos = aPosition;\n    vec4 worldPosition = modelMatrix * vec4(aPosition, 1.0);\n    vec4 positionRelativeToCamera = viewMatrix * worldPosition;\n    clipSpace = projectionMatrix * positionRelativeToCamera;\n    gl_Position = clipSpace;\n    gl_PointSize = 1.0;\n\n    vUv = vec2(aPosition.x / 2.0 + .5, aPosition.y / 2.0 + .5) * tiling;\n    toCameraVector = cameraPosition - worldPosition.xyz;\n\n\n\n\n    float distance = length(positionRelativeToCamera.xyz);\n    visibility = exp(-pow((distance * density), gradient));\n    // visibility = distance;\n    visibility = clamp(visibility, 0., 1.);\n\n    // float distance = length(positionRelativeToCamera.xyz);\n    // visibility = exp(-pow((distance * density), gradient));\n    // visibility = clamp(visibility, 0., 1.);\n}\n"},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=n(1),a=r(s),u=n(22),c=i(u),l=n(23),h=(i(l),n(27)),d=n(31),f=(i(d),n(72));window.ASSET_URL="./assets/";var p=function(){function t(){o(this,t),window.gui={add:function(){}};var e=document.getElementById("canvas");a.init(e),this.gl=a.gl,this.gl.clearColor(0,0,0,1),this.loader=new h.Loader,this.loader.addManifest(f.default,window.ASSET_URL),this.loader.addAssets([window.ASSET_URL+"model/monolith.obj"]),this.loader.onComplete.add(this._loadComplete,this),this.loader.load()}return t.prototype._loadComplete=function(t){a.loadedResources=t,this.scene=new c.default,this.scene.resize(),a.utils.loop.add(this._update.bind(this))},t.prototype.resize=function(){a.GL.resize(this.gl.canvas.clientWidth,this.gl.canvas.clientHeight),this.scene&&this.scene.resize()},t.prototype._update=function(){this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.scene.render()},t}();e.default=p,t.exports=e.default},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=function(){function t(e){n(this,t),this.size=Math.pow(2,e)+1,this.max=this.size-1,this.map=new Float32Array(this.size*this.size)}return t.prototype.get=function(t,e){return t<0||t>this.max||e<0||e>this.max?-1:this.map[t+this.size*e]},t.prototype.set=function(t,e,n){this.map[t+this.size*e]=n},t.prototype.generate=function(t){var e=this;this.set(0,0,e.max),this.set(this.max,0,e.max/2),this.set(this.max,this.max,0),this.set(0,this.max,e.max/2),this.divide(this.max,e,t)},t.prototype.divide=function(t,e,n){var i,r,o=t/2,s=n*t;if(!(o<1)){for(r=o;r<e.max;r+=t)for(i=o;i<e.max;i+=t)this.square(i,r,o,(Math.random()+.1)*s*2-s,e);for(r=0;r<=e.max;r+=o)for(i=(r+o)%t;i<=e.max;i+=t)this.diamond(i,r,o,(Math.random()+.1)*s*2-s,e);this.divide(t/2,e,n)}},t.prototype.average=function(t){var e=t.filter(function(t){return t!==-1}),n=e.reduce(function(t,e){return t+e},0);return n/e.length},t.prototype.square=function(t,e,n,i,r){var o=this.average([r.get(t-n,e-n),r.get(t+n,e-n),r.get(t+n,e+n),r.get(t-n,e+n)]);r.set(t,e,o+i)},t.prototype.diamond=function(t,e,n,i,r){var o=this.average([r.get(t,e-n),r.get(t+n,e),r.get(t,e+n),r.get(t-n,e)]);r.set(t,e,o+i)},t}();e.default=i,t.exports=e.default},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=n(1),u=i(a),c=function(t){function e(n,i,s){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4;r(this,e);var u=o(this,t.call(this,n,s,a));return i=i||{},u.options={w:i.w||1,h:i.h||1,widthSegment:i.widthSegment,heightSegment:i.heightSegment,positionAttributeName:i.positionAttributeName||"aPosition",axis:"xy"},u.planeTerrain(),u}return s(e,t),e.prototype.planeTerrain=function(){for(var t=this.options.w/2,e=this.options.h/2,n=Math.floor(this.options.widthSegment)||1,i=Math.floor(this.options.heightSegment)||1,r=n+1,o=i+1,s=this.options.w/n,a=this.options.h/i,u=[],c=[],l=[],h=0;h<o;h++)for(var d=h*a-e,f=0;f<r;f++){var p=f*s-t;"xy"===this.options.axis?(c.push(p,-d,0),l.push(0,0,1)):(c.push(p,0,-d),l.push(0,1,0)),this.uvs.push(f/n),this.uvs.push(1-h/i)}for(var v=0;v<i;v++)for(var _=0;_<n;_++){var m=_+r*v,g=_+r*(v+1),b=_+1+r*(v+1),y=_+1+r*v;u.push(m,g,y),u.push(g,b,y)}this.addPosition(c,this.options.positionAttributeName),this.addIndices(u,!1)},e.prototype.separateFaces=function(){for(var t=[],e=0,n=0;n<this._indices.length;n+=3)t[e]=[this._indices[n],this._indices[n+1],this._indices[n+2]],e++;for(var i=[],n=0;n<this._vertices.length;n+=3)i.push([this._vertices[n],this._vertices[n+1],this._vertices[n+2]]);for(var r=u.utils.FacesSeparator.separate(t,i),o=[],n=0;n<r.vertices.length;n++)for(var s=r.vertices[n],a=0;a<s.length;a++)o.push(s[a]);var c=r.faces;console.log(c),this.updatePosition(this.options.positionAttributeName,o),this.addIndices(c)},e}(u.geometry.Mesh);e.default=c,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=n(1),a=r(s),u=n(9),c=i(u),l=n(10),h=i(l),d=n(29),f=i(d),p=n(26),v=i(p),_=n(30),m=(i(_),n(28)),g=i(m),b=n(18),y=i(b),x=n(17),w=i(x),E=n(86),M=i(E),T=n(85),O=i(T),P=n(2),A=function(){function t(){o(this,t),this.gl=null,this.tick=0,this.gl=a.gl,this.camera=new a.cameras.PerspectiveCamera,this.camera.perspective(45,a.GL.aspectRatio,.1,100),this.orbitalControl=new v.default(this.camera.matrix,2),this.orbitalControl.lockZoom(),a.GL.setCamera(this.camera),this.viewBg=new c.default(window.ASSET_URL+"image/sky_gradient5.jpg"),this.fbo=new a.FrameBuffer(1024,1024),this.fbo2=new a.FrameBuffer(1024,1024),this.viewMonolith=new f.default,this.viewFBO1=new g.default,this.viewFBO1.setPos(-200,100),this.viewFBO2=new g.default,this.viewFBO2.setPos(-200,100),this._bPlanes=new a.helpers.BatchPlanes,this.dudvTexture=new a.Texture(window.ASSET_URL+"image/dudvmap.png"),this.bQProgram=new a.Program(y.default,w.default,{cameraPosition:{type:"vec3",value:[0,0,0]},refraction:{type:"texture",value:0},reflection:{type:"texture",value:1},dudvMap:{type:"texture",value:2},gradientMap:{type:"texture",value:3},time:{type:"float",value:0},density:{type:"float",value:.07},gradient:{type:"float",value:21}}),this.density=.065,this.gradient=21,gui.add(this,"density"),gui.add(this,"gradient"),this.bQuad=new a.geometry.Quad(this.bQProgram),this.bQuad.addAttribute(this.bQuad.uvs,"aUv",2),this.bQuad.state.blend=!0,this.bQuad.rotation.x=Math.PI/2,this.bQuad.scale.set(10),this.viewTerrain=new h.default,this.textureSky=new a.Texture(window.ASSET_URL+"image/sky_gradient5.jpg"),this.textureGradient=new a.Texture(window.ASSET_URL+"image/gradient-map.jpg"),this.programSky=new a.Program(M.default,O.default,{texture:{type:"texture",value:0},gradientMap:{type:"texture",value:1},clipY:{type:"float",value:0},dir:{type:"float",value:0}}),this.sphere=new a.geometry.Sphere(this.programSky,{radius:8,nbVert:20}),this.sphere.addAttribute(this.sphere.uvs,"aUv",2)}return t.prototype.render=function(){this.orbitalControl.update(),this.fbo.bind(),P.mat4.scale(this.camera.matrix,this.camera.matrix,[1,-1,1]),this.programSky.bind(),this.programSky.uniforms.clipY=1e3,this.programSky.uniforms.dir=1,this.textureSky.bind(0),this.textureGradient.bind(1),a.GL.draw(this.sphere),this.viewTerrain.program.bind(),this.viewTerrain.program.uniforms.clipY=0,this.viewTerrain.program.uniforms.dir=-1,this.viewTerrain.render(),this.viewMonolith.program.bind(),this.viewMonolith.program.uniforms.clipY=0,this.viewMonolith.program.uniforms.dir=-1,this.viewMonolith.render(),this.fbo.unbind(),P.mat4.scale(this.camera.matrix,this.camera.matrix,[1,-1,1]),this.fbo2.bind(),this.viewTerrain.program.bind(),this.viewTerrain.program.uniforms.clipY=0,this.viewTerrain.program.uniforms.dir=1,this.viewTerrain.render(),this.viewMonolith.program.bind(),this.viewMonolith.program.uniforms.dir=1,this.viewMonolith.render(),this.fbo2.unbind(),this.viewMonolith.program.bind(),this.viewMonolith.program.uniforms.clipY=100,this.viewMonolith.render(),this.viewTerrain.program.bind(),this.viewTerrain.program.uniforms.clipY=100,this.viewTerrain.render(),this.bQProgram.bind(),this.bQProgram.uniforms.density=this.density,this.bQProgram.uniforms.gradient=this.gradient,this.bQProgram.uniforms.cameraPosition=this.orbitalControl._vec,this.bQProgram.uniforms.time+=.001,this.bQProgram.uniforms.time%=1,this.fbo2.gltexture.bind(0),this.fbo.gltexture.bind(1),this.dudvTexture.bind(2),this.textureGradient.bind(3),a.GL.draw(this.bQuad),this.programSky.bind(),this.programSky.uniforms.clipY=1e3,this.programSky.uniforms.dir=1,this.textureSky.bind(0),this.textureGradient.bind(1),a.GL.draw(this.sphere),this.fbo.clear(),this.fbo2.clear()},t.prototype.resize=function(){this.camera.setAspectRatio(a.GL.aspectRatio)},t}();e.default=A,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=n(1),a=r(s),u=n(9),c=i(u),l=n(10),h=i(l),d=n(18),f=(i(d),n(17)),p=(i(f),n(2),function(){function t(){o(this,t),this.gl=null,this.tick=0,this.gl=a.gl,this.camera=new a.cameras.PerspectiveCamera,this.camera.perspective(45,a.GL.aspectRatio,.1,100),this.orbitalControl=new a.control.OrbitalControl(this.camera.matrix,1),a.GL.setCamera(this.camera),this.viewBg=new c.default(window.ASSET_URL+"image/sky_gradient.jpg"),this.viewTerrain=new h.default}return t.prototype.render=function(){this.orbitalControl.update(),this.viewBg.render(),this.viewTerrain.render()},t.prototype.resize=function(){this.camera.setAspectRatio(a.GL.aspectRatio)},t}());e.default=p,t.exports=e.default},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=function(){function t(){n(this,t),this._json={},this._text={}}return t.prototype.addJson=function(t,e){this._json[e]=t},t.prototype.getJson=function(t){return this._json[t]?this._json[t]:(console.warn(t+" not found in Cache"),null)},t}();e.default=i,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=n(68),s=i(o),a=n(35),u=i(a),c=n(24),l=i(c),h=n(65),d=i(h),f=n(34),p=i(f),v=function(){function t(){r(this,t),this.crossdomain=!1,this.assetsToLoad=[],window.XDomainRequest&&this.crossdomain?(this.ajaxRequest=new window.XDomainRequest,this.ajaxRequest.timeout=3e3,this.ajaxRequest.onerror=function(){},this.ajaxRequest.ontimeout=function(){},this.ajaxRequest.onprogress=function(){}):window.XMLHttpRequest&&(this.ajaxRequest=new window.XMLHttpRequest),this.ajaxRequest.onload=this._onFileLoaded.bind(this),this.ajaxRequest.onreadystatechange=function(t){},this.fileCount=0,this.filesToLoad=[],this.fontsToLoad=[],this.soundsToLoad=[],this.customToLoad=[],this.onComplete=new s.default,this.onProgress=new s.default}return t.prototype.addFonts=function(t){return this.fontsToLoad=this.fontsToLoad.concat(t),this},t.prototype.addJson=function(e,n){var n=n||u.default.basename(e,u.default.extname(e)),i={url:e,id:n,type:t.JSON};return this.filesToLoad.push(i),this},t.prototype.addAssets=function(t){return this.assetsToLoad=this.assetsToLoad.concat(t),this},t.prototype.addCSS=function(t){var e=document.createElement("link");return e.type="text/css",e.rel="stylesheet",e.href=t,document.getElementsByTagName("head")[0].appendChild(e),this},t.prototype.load=function(){this._loadFonts()},t.prototype._loadFiles=function(){this.fileCount=0,this.filesToLoad.length?this._loadNextFile():this._loadAssets()},t.prototype._loadNextFile=function(){var e=this.filesToLoad[this.fileCount];e.type===t.CUSTOM?(e.object.onLoaded.addOnce(this._onFileLoaded,this),
e.object.load()):(this.ajaxRequest.open("GET",e.url,!0),this.ajaxRequest.send())},t.prototype._onFileLoaded=function(){var e=this.filesToLoad[this.fileCount];if(e.type===t.CUSTOM);else if(0===this.ajaxRequest.status||200===this.ajaxRequest.status)switch(e.type){case t.TEXT:var n=this.ajaxRequest.responseText;l.default.addText(n,e.id);break;case t.JSON:var i=JSON.parse(this.ajaxRequest.responseText);l.default.addJson(i,e.id)}else console.warn("Loader: "+e.url+" not found");this.fileCount++,this._onProgress(),this.fileCount===this.filesToLoad.length?this._loadAssets():this._loadNextFile()},t.prototype._getFonts=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].load());return e},t.prototype._loadFonts=function(){var t=this;if(0===this.fontsToLoad.length)return void this._loadFiles();for(var e=[],n=0;n<this.fontsToLoad.length;n++){var i=new p.default(this.fontsToLoad[n]);e.push(i)}Promise.all(this._getFonts(e)).then(function(e){t._loadFiles()},function(){t._loadFiles()})},t.prototype.addManifest=function(t,e){var n=t.map(function(t){return e+t});return this.addAssets(n),this},t.prototype._loadAssets=function(){return 0===this.assetsToLoad.length?void this._onComplete():(this.assetLoader=new d.default,this.assetLoader.add(this.assetsToLoad),this.assetLoader.on("progress",this._onProgress,this),void this.assetLoader.load(this._onComplete.bind(this)))},t.prototype._onComplete=function(t,e){this.onProgress.dispatch(1),this.onComplete.dispatch(e)},t.prototype._onProgress=function(){var t=(this.filesToLoad.length+this.assetsToLoad.length,this.fileCount);this.assetLoader&&(t=this.assetLoader.progress),this.onProgress.dispatch(.01*t)},t}();v.TEXT=0,v.JSON=1,v.CUSTOM=2,e.default=v,t.exports=e.default},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=n(2),o=function(t){return t.touches?{x:t.touches[0].pageX,y:t.touches[0].pageY}:{x:t.clientX,y:t.clientY}},s=r.vec3.fromValues(0,1,0),a=(Math.PI/2-.01,function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;i(this,t),this._mtxTarget=e,this._radius=n,this._targetRadius=n,this._listenerTarget=o,this._isDown=!1,this._rotation=r.mat4.create(),this.center=r.vec3.create(),this.easing=.1,this.senstivity=1,this.senstivityRotation=1,this._isLocked=!1,this._isZoomLocked=!1,this._rx=0,this._trx=0,this._prevx=0,this._ry=0,this._try=0,this._prevy=0,this._quat=r.quat.create(),this._vec=r.vec3.create(),this._mtx=r.mat4.create(),this.extraY=0,this._mouseDown={x:0,y:0},this._mouse={x:0,y:0},this._init()}return t.prototype._init=function(){var t=this;this._listenerTarget.addEventListener("mousedown",function(e){return t._onDown(e)}),this._listenerTarget.addEventListener("mouseup",function(){return t._onUp()}),this._listenerTarget.addEventListener("mousemove",function(e){return t._onMove(e)}),this._listenerTarget.addEventListener("touchstart",function(e){return t._onDown(e)}),this._listenerTarget.addEventListener("touchend",function(){return t._onUp()}),this._listenerTarget.addEventListener("touchmove",function(e){return t._onMove(e)}),this._listenerTarget.addEventListener("mousewheel",function(e){return t._onWheel(e)}),this._listenerTarget.addEventListener("DOMMouseScroll",function(e){return t._onWheel(e)})},t.prototype.lock=function(t){this._isLocked=t},t.prototype.lockZoom=function(t){this._isZoomLocked=t},t.prototype._onWheel=function(t){if(!this._isZoomLocked){var e=t.wheelDelta,n=t.detail,i=0;i=n?e?e/n/40*n>0?1:-1:-n/3:e/120,this._targetRadius+=2*-i*this.senstivity,this._targetRadius<.01&&(this._targetRadius=.01)}},t.prototype._onDown=function(t){this._isLocked||(this._isDown=!0,this._mouseDown=o(t),this._mouse=o(t),this._prevx=this._trx=this._rx,this._prevy=this._try=this._ry)},t.prototype._onMove=function(t){this._isLocked||this._isDown&&(this._mouse=o(t))},t.prototype._onUp=function(){this._isLocked||(this._isDown=!1)},t.prototype.update=function(){var t=this._mouse.x-this._mouseDown.x,e=this._mouse.y-this._mouseDown.y,n=.02*this.senstivityRotation;this._try=this._prevy-t*n,this._trx=this._prevx-e*n,this._trx<-Math.PI/2+.01?this._trx=-Math.PI/2+.01:this._trx>Math.PI/2-.01&&(this._trx=Math.PI/2-.01),this._ry+=(this._try-this._ry)*this.easing+this.extraY,r.quat.identity(this._quat),r.quat.rotateY(this._quat,this._quat,this._ry),r.quat.rotateX(this._quat,this._quat,-.12),r.quat.rotateX(this._quat,this._quat,this._rx),r.vec3.set(this._vec,0,0,this._radius),r.vec3.transformQuat(this._vec,this._vec,this._quat),r.mat4.identity(this._mtx),r.mat4.lookAt(this._mtx,this._vec,this.center,s),this._mtxTarget&&r.mat4.copy(this._mtxTarget,this._mtx)},t}());e.default=a,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.Loader=void 0;var r=n(25),o=i(r);e.Loader=o.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=n(1),a=r(s),u=n(80),c=i(u),l=n(79),h=i(l),d=function(){function t(e){o(this,t),this.program=new a.Program(c.default,h.default),this.bigTriangle=new a.geometry.BigTriangle(this.program)}return t.prototype.setPos=function(t,e){this.bigTriangle.position.x=t,this.bigTriangle.position.y=e},t.prototype.render=function(t,e){this.program.bind(),t.bind(e),a.GL.draw(this.bigTriangle)},t}();e.default=d,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=n(1),a=r(s),u=n(84),c=i(u),l=n(83),h=i(l),d=function(){function t(e){o(this,t),this.program=new a.Program(c.default,h.default,{texture:{type:"texture",value:0},gradientMap:{type:"texture",value:0},clipY:{type:"float",value:0},dir:{type:"float",value:0},ambientLight:{type:"vec3",value:[.5,.5,.5]},directionalLightColor:{type:"vec3",value:[1,1,1]},directionalVector:{type:"vec3",value:[1,-1,-.5]}}),this.textureTop=new a.Texture(window.ASSET_URL+"image/texture-monolyth.jpg"),this.textureGradient=new a.Texture(window.ASSET_URL+"image/gradient-map.jpg");var n=a.loaders.OBJLoader.parse(a.loadedResources[window.ASSET_URL+"model/monolith.obj"].data);this.monolith=new a.geometry.Mesh(this.program),this.monolith.addPosition(n.positions),this.monolith.addIndices(n.indices),this.monolith.addAttribute(n.coords,"aUv",2),this.monolith.addAttribute(n.normals,"aNormal",3),this.monolith.scale.set(.006),this.monolith.position.y=.2,this.monolith.rotation.y=-Math.PI/4}return t.prototype.render=function(){this.program.bind(),this.textureTop.bind(0),this.textureGradient.bind(1),a.GL.draw(this.monolith)},t}();e.default=d,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=n(1),a=r(s),u=n(82),c=i(u),l=n(81),h=i(l),d=function(){function t(e){o(this,t),this.program=new a.Program,this.spheres=[];for(var n=0;n<5;n++){var i=new a.geometry.Sphere(this.program,{radius:.35*Math.random()+.1});i.state.depthTest=!0,i.position.x=2*Math.random()-1,i.position.y=.2*-Math.random()-.4,i.position.z=2*Math.random()-1,this.spheres.push(i)}this.programQuad=new a.Program(c.default,h.default,{texture:{type:"texture",value:0}})}return t.prototype.render=function(){this.program.bind();for(var t=0;t<this.spheres.length;t++)a.GL.draw(this.spheres[t])},t}();e.default=d,t.exports=e.default},function(t,e,n){t.exports=n(33),t.exports.color=n(32)},function(t,e){var n=t.exports=n||{};n.color=n.color||{},n.utils=n.utils||{},n.utils.common=function(){var t=Array.prototype.forEach,e=Array.prototype.slice;return{BREAK:{},extend:function(t){return this.each(e.call(arguments,1),function(e){for(var n in e)this.isUndefined(e[n])||(t[n]=e[n])},this),t},defaults:function(t){return this.each(e.call(arguments,1),function(e){for(var n in e)this.isUndefined(t[n])&&(t[n]=e[n])},this),t},compose:function(){var t=e.call(arguments);return function(){for(var n=e.call(arguments),i=t.length-1;i>=0;i--)n=[t[i].apply(this,n)];return n[0]}},each:function(e,n,i){if(t&&e.forEach===t)e.forEach(n,i);else if(e.length===e.length+0){for(var r=0,o=e.length;r<o;r++)if(r in e&&n.call(i,e[r],r)===this.BREAK)return}else for(var r in e)if(n.call(i,e[r],r)===this.BREAK)return},defer:function(t){setTimeout(t,0)},toArray:function(t){return t.toArray?t.toArray():e.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){return t!==t},isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return t===!1||t===!0},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)}}}(),n.color.toString=function(t){return function(e){if(1==e.a||t.isUndefined(e.a)){for(var n=e.hex.toString(16);n.length<6;)n="0"+n;return"#"+n}return"rgba("+Math.round(e.r)+","+Math.round(e.g)+","+Math.round(e.b)+","+e.a+")"}}(n.utils.common),n.Color=n.color.Color=function(t,e,n,i){function r(t,e,n){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space?this.__state[e]:(s(this,e,n),this.__state[e])},set:function(t){"RGB"!==this.__state.space&&(s(this,e,n),this.__state.space="RGB"),this.__state[e]=t}})}function o(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space?this.__state[e]:(a(this),this.__state[e])},set:function(t){"HSV"!==this.__state.space&&(a(this),this.__state.space="HSV"),this.__state[e]=t}})}function s(t,n,r){if("HEX"===t.__state.space)t.__state[n]=e.component_from_hex(t.__state.hex,r);else{if("HSV"!==t.__state.space)throw"Corrupted color state";i.extend(t.__state,e.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}}function a(t){var n=e.rgb_to_hsv(t.r,t.g,t.b);i.extend(t.__state,{s:n.s,v:n.v}),i.isNaN(n.h)?i.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=n.h}var u=function(){if(this.__state=t.apply(this,arguments),this.__state===!1)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return u.COMPONENTS=["r","g","b","h","s","v","hex","a"],i.extend(u.prototype,{toString:function(){return n(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),r(u.prototype,"r",2),r(u.prototype,"g",1),r(u.prototype,"b",0),o(u.prototype,"h"),o(u.prototype,"s"),o(u.prototype,"v"),Object.defineProperty(u.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(u.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=e.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}}),u}(n.color.interpret=function(t,e){var n,i,r=function(){i=!1;var t=arguments.length>1?e.toArray(arguments):arguments[0];return e.each(o,function(r){if(r.litmus(t))return e.each(r.conversions,function(r,o){if(n=r.read(t),i===!1&&n!==!1)return i=n,n.conversionName=o,n.conversion=r,e.BREAK}),e.BREAK}),i},o=[{litmus:e.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString())}},write:t},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString())}},write:t},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:t},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:t}}},{litmus:e.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:e.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3==t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4==t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:e.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b)&&e.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v)&&e.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}];return r}(n.color.toString,n.utils.common),n.color.math=function(){var t;return{hsv_to_rgb:function(t,e,n){var i=Math.floor(t/60)%6,r=t/60-Math.floor(t/60),o=n*(1-e),s=n*(1-r*e),a=n*(1-(1-r)*e),u=[[n,a,o],[s,n,o],[o,n,a],[o,s,n],[a,o,n],[n,o,s]][i];return{r:255*u[0],g:255*u[1],b:255*u[2]}},rgb_to_hsv:function(t,e,n){var i,r,o=Math.min(t,e,n),s=Math.max(t,e,n),a=s-o;return 0==s?{h:NaN,s:0,v:0}:(r=a/s,i=t==s?(e-n)/a:e==s?2+(n-t)/a:4+(t-e)/a,i/=6,i<0&&(i+=1),{h:360*i,s:r,v:s/255})},rgb_to_hex:function(t,e,n){var i=this.hex_with_component(0,2,t);return i=this.hex_with_component(i,1,e),i=this.hex_with_component(i,0,n)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(e,n,i){return i<<(t=8*n)|e&~(255<<t)}}}(),n.color.toString,n.utils.common)},function(t,e){var n=t.exports=n||{};n.gui=n.gui||{},n.utils=n.utils||{},n.controllers=n.controllers||{},n.dom=n.dom||{},n.color=n.color||{},n.utils.css=function(){return{load:function(t,e){e=e||document;var n=e.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=t,e.getElementsByTagName("head")[0].appendChild(n)},inject:function(t,e){e=e||document;var n=document.createElement("style");n.type="text/css",n.innerHTML=t,e.getElementsByTagName("head")[0].appendChild(n)}}}(),n.utils.common=function(){var t=Array.prototype.forEach,e=Array.prototype.slice;return{BREAK:{},extend:function(t){return this.each(e.call(arguments,1),function(e){for(var n in e)this.isUndefined(e[n])||(t[n]=e[n])},this),t},defaults:function(t){return this.each(e.call(arguments,1),function(e){for(var n in e)this.isUndefined(t[n])&&(t[n]=e[n])},this),t},compose:function(){var t=e.call(arguments);return function(){for(var n=e.call(arguments),i=t.length-1;i>=0;i--)n=[t[i].apply(this,n)];return n[0]}},each:function(e,n,i){if(t&&e.forEach===t)e.forEach(n,i);else if(e.length===e.length+0){for(var r=0,o=e.length;r<o;r++)if(r in e&&n.call(i,e[r],r)===this.BREAK)return}else for(var r in e)if(n.call(i,e[r],r)===this.BREAK)return},defer:function(t){setTimeout(t,0)},toArray:function(t){return t.toArray?t.toArray():e.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){return t!==t},isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return t===!1||t===!0},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)}}}(),n.controllers.Controller=function(t){var e=function(t,e){this.initialValue=t[e],this.domElement=document.createElement("div"),this.object=t,this.property=e,this.__onChange=void 0,this.__onFinishChange=void 0};return t.extend(e.prototype,{onChange:function(t){return this.__onChange=t,this},onFinishChange:function(t){return this.__onFinishChange=t,this},setValue:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),e}(n.utils.common),n.dom.dom=function(t){function e(e){if("0"===e||t.isUndefined(e))return 0;var n=e.match(r);return t.isNull(n)?0:parseFloat(n[1])}var n={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},i={};t.each(n,function(e,n){t.each(e,function(t){i[t]=n})});var r=/(\d+(\.\d+)?)px/,o={makeSelectable:function(t,e){void 0!==t&&void 0!==t.style&&(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(e,n,i){t.isUndefined(n)&&(n=!0),t.isUndefined(i)&&(i=!0),e.style.position="absolute",n&&(e.style.left=0,e.style.right=0),i&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,n,r,o){r=r||{};var s=i[n];if(!s)throw new Error("Event type "+n+" not supported.");var a=document.createEvent(s);switch(s){case"MouseEvents":var u=r.x||r.clientX||0,c=r.y||r.clientY||0;a.initMouseEvent(n,r.bubbles||!1,r.cancelable||!0,window,r.clickCount||1,0,0,u,c,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var l=a.initKeyboardEvent||a.initKeyEvent;t.defaults(r,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),l(n,r.bubbles||!1,r.cancelable,window,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.keyCode,r.charCode);break;default:a.initEvent(n,r.bubbles||!1,r.cancelable||!0)}t.defaults(a,o),e.dispatchEvent(a)},bind:function(t,e,n,i){return i=i||!1,t.addEventListener?t.addEventListener(e,n,i):t.attachEvent&&t.attachEvent("on"+e,n),o},unbind:function(t,e,n,i){return i=i||!1,t.removeEventListener?t.removeEventListener(e,n,i):t.detachEvent&&t.detachEvent("on"+e,n),o},addClass:function(t,e){if(void 0===t.className)t.className=e;else if(t.className!==e){var n=t.className.split(/ +/);n.indexOf(e)==-1&&(n.push(e),t.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return o},removeClass:function(t,e){if(e)if(void 0===t.className);else if(t.className===e)t.removeAttribute("class");else{var n=t.className.split(/ +/),i=n.indexOf(e);i!=-1&&(n.splice(i,1),t.className=n.join(" "))}else t.className=void 0;return o},hasClass:function(t,e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){var n=getComputedStyle(t);return e(n["border-left-width"])+e(n["border-right-width"])+e(n["padding-left"])+e(n["padding-right"])+e(n.width)},getHeight:function(t){var n=getComputedStyle(t);return e(n["border-top-width"])+e(n["border-bottom-width"])+e(n["padding-top"])+e(n["padding-bottom"])+e(n.height)},getOffset:function(t){var e={left:0,top:0};if(t.offsetParent)do e.left+=t.offsetLeft,e.top+=t.offsetTop;while(t=t.offsetParent);return e},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}};return o}(n.utils.common),n.controllers.OptionController=function(t,e,n){var i=function(t,r,o){i.superclass.call(this,t,r);var s=this;if(this.__select=document.createElement("select"),n.isArray(o)){var a={};n.each(o,function(t){a[t]=t}),o=a}n.each(o,function(t,e){var n=document.createElement("option");n.innerHTML=e,n.setAttribute("value",t),s.__select.appendChild(n)}),this.updateDisplay(),e.bind(this.__select,"change",function(){var t=this.options[this.selectedIndex].value;s.setValue(t)}),this.domElement.appendChild(this.__select)};return i.superclass=t,n.extend(i.prototype,t.prototype,{setValue:function(t){var e=i.superclass.prototype.setValue.call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),e},updateDisplay:function(){return this.__select.value=this.getValue(),i.superclass.prototype.updateDisplay.call(this)}}),i}(n.controllers.Controller,n.dom.dom,n.utils.common),n.controllers.NumberController=function(t,e){function n(t){return t=t.toString(),t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}var i=function(t,r,o){i.superclass.call(this,t,r),o=o||{},this.__min=o.min,this.__max=o.max,this.__step=o.step,e.isUndefined(this.__step)?0==this.initialValue?this.__impliedStep=1:this.__impliedStep=Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10:this.__impliedStep=this.__step,this.__precision=n(this.__impliedStep)};return i.superclass=t,e.extend(i.prototype,t.prototype,{setValue:function(t){return void 0!==this.__min&&t<this.__min?t=this.__min:void 0!==this.__max&&t>this.__max&&(t=this.__max),void 0!==this.__step&&t%this.__step!=0&&(t=Math.round(t/this.__step)*this.__step),i.superclass.prototype.setValue.call(this,t)},min:function(t){return this.__min=t,this},max:function(t){return this.__max=t,this},step:function(t){return this.__step=t,this}}),i}(n.controllers.Controller,n.utils.common),n.controllers.NumberControllerBox=function(t,e,n){function i(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}var r=function(t,i,o){function s(){var t=parseFloat(d.__input.value);n.isNaN(t)||d.setValue(t)}function a(){s(),d.__onFinishChange&&d.__onFinishChange.call(d,d.getValue())}function u(t){e.bind(window,"mousemove",c),e.bind(window,"mouseup",l),h=t.clientY}function c(t){var e=h-t.clientY;d.setValue(d.getValue()+e*d.__impliedStep),h=t.clientY}function l(){e.unbind(window,"mousemove",c),e.unbind(window,"mouseup",l)}this.__truncationSuspended=!1,r.superclass.call(this,t,i,o);var h,d=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),e.bind(this.__input,"change",s),e.bind(this.__input,"blur",a),e.bind(this.__input,"mousedown",u),e.bind(this.__input,"keydown",function(t){13===t.keyCode&&(d.__truncationSuspended=!0,this.blur(),d.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return r.superclass=t,n.extend(r.prototype,t.prototype,{updateDisplay:function(){return this.__input.value=this.__truncationSuspended?this.getValue():i(this.getValue(),this.__precision),r.superclass.prototype.updateDisplay.call(this)}}),r}(n.controllers.NumberController,n.dom.dom,n.utils.common),n.controllers.NumberControllerSlider=function(t,e,n,i,r){function o(t,e,n,i,r){return i+(r-i)*((t-e)/(n-e))}var s=function(t,n,i,r,a){function u(t){e.bind(window,"mousemove",c),e.bind(window,"mouseup",l),c(t)}function c(t){t.preventDefault();var n=e.getOffset(h.__background),i=e.getWidth(h.__background);return h.setValue(o(t.clientX,n.left,n.left+i,h.__min,h.__max)),!1}function l(){e.unbind(window,"mousemove",c),e.unbind(window,"mouseup",l),h.__onFinishChange&&h.__onFinishChange.call(h,h.getValue())}s.superclass.call(this,t,n,{min:i,max:r,step:a});var h=this;this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),e.bind(this.__background,"mousedown",u),e.addClass(this.__background,"slider"),e.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)};return s.superclass=t,s.useDefaultStyles=function(){n.inject(r)},i.extend(s.prototype,t.prototype,{updateDisplay:function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+"%",s.superclass.prototype.updateDisplay.call(this)}}),s}(n.controllers.NumberController,n.dom.dom,n.utils.css,n.utils.common,".slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}"),n.controllers.FunctionController=function(t,e,n){var i=function(t,n,r){i.superclass.call(this,t,n);var o=this;this.__button=document.createElement("div"),this.__button.innerHTML=void 0===r?"Fire":r,e.bind(this.__button,"click",function(t){return t.preventDefault(),o.fire(),!1}),e.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)};return i.superclass=t,n.extend(i.prototype,t.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.getValue().call(this.object)}}),i}(n.controllers.Controller,n.dom.dom,n.utils.common),n.controllers.BooleanController=function(t,e,n){var i=function(t,n){function r(){o.setValue(!o.__prev)}i.superclass.call(this,t,n);var o=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),e.bind(this.__checkbox,"change",r,!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()};return i.superclass=t,n.extend(i.prototype,t.prototype,{setValue:function(t){var e=i.superclass.prototype.setValue.call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),e},updateDisplay:function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,i.superclass.prototype.updateDisplay.call(this)}}),i}(n.controllers.Controller,n.dom.dom,n.utils.common),n.color.toString=function(t){return function(e){if(1==e.a||t.isUndefined(e.a)){for(var n=e.hex.toString(16);n.length<6;)n="0"+n;return"#"+n}return"rgba("+Math.round(e.r)+","+Math.round(e.g)+","+Math.round(e.b)+","+e.a+")"}}(n.utils.common),n.color.interpret=function(t,e){var n,i,r=function(){i=!1;var t=arguments.length>1?e.toArray(arguments):arguments[0];return e.each(o,function(r){if(r.litmus(t))return e.each(r.conversions,function(r,o){if(n=r.read(t),i===!1&&n!==!1)return i=n,n.conversionName=o,n.conversion=r,e.BREAK}),e.BREAK}),i},o=[{litmus:e.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString())}},write:t},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString())}},write:t},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:t},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:t}}},{litmus:e.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:e.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3==t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4==t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:e.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b)&&e.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v)&&e.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}];return r}(n.color.toString,n.utils.common),n.GUI=n.gui.GUI=function(t,e,n,i,r,o,s,a,u,c,l,h,d,f,p){function v(t,e,n,o){if(void 0===e[n])throw new Error("Object "+e+' has no property "'+n+'"');var s;if(o.color)s=new l(e,n);else{var a=[e,n].concat(o.factoryArgs);s=i.apply(t,a)}o.before instanceof r&&(o.before=o.before.__li),g(t,s),f.addClass(s.domElement,"c");var u=document.createElement("span");f.addClass(u,"property-name"),u.innerHTML=s.property;var c=document.createElement("div");c.appendChild(u),c.appendChild(s.domElement);var h=_(t,c,o.before);return f.addClass(h,F.CLASS_CONTROLLER_ROW),f.addClass(h,typeof s.getValue()),m(t,h,s),t.__controllers.push(s),s}function _(t,e,n){var i=document.createElement("li");return e&&i.appendChild(e),n?t.__ul.insertBefore(i,params.before):t.__ul.appendChild(i),t.onResize(),i}function m(t,e,n){if(n.__li=e,n.__gui=t,p.extend(n,{options:function(e){return arguments.length>1?(n.remove(),v(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[p.toArray(arguments)]})):p.isArray(e)||p.isObject(e)?(n.remove(),v(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[e]})):void 0},name:function(t){return n.__li.firstElementChild.firstElementChild.innerHTML=t,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof u){var i=new a(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});p.each(["updateDisplay","onChange","onFinishChange"],function(t){var e=n[t],r=i[t];n[t]=i[t]=function(){var t=Array.prototype.slice.call(arguments);return e.apply(n,t),r.apply(i,t)}}),f.addClass(e,"has-slider"),n.domElement.insertBefore(i.domElement,n.domElement.firstElementChild)}else if(n instanceof a){var r=function(e){return p.isNumber(n.__min)&&p.isNumber(n.__max)?(n.remove(),v(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]})):e};n.min=p.compose(r,n.min),n.max=p.compose(r,n.max)}else n instanceof o?(f.bind(e,"click",function(){f.fakeEvent(n.__checkbox,"click")}),f.bind(n.__checkbox,"click",function(t){t.stopPropagation()})):n instanceof s?(f.bind(e,"click",function(){f.fakeEvent(n.__button,"click")}),f.bind(e,"mouseover",function(){f.addClass(n.__button,"hover")}),f.bind(e,"mouseout",function(){f.removeClass(n.__button,"hover")})):n instanceof l&&(f.addClass(e,"color"),n.updateDisplay=p.compose(function(t){return e.style.borderLeftColor=n.__color.toString(),t},n.updateDisplay),n.updateDisplay());n.setValue=p.compose(function(e){return t.getRoot().__preset_select&&n.isModified()&&O(t.getRoot(),!0),e},n.setValue)}function g(t,e){var n=t.getRoot(),i=n.__rememberedObjects.indexOf(e.object);if(i!=-1){var r=n.__rememberedObjectIndecesToControllers[i];if(void 0===r&&(r={},n.__rememberedObjectIndecesToControllers[i]=r),r[e.property]=e,n.load&&n.load.remembered){var o,s=n.load.remembered;if(s[t.preset])o=s[t.preset];else{if(!s[k])return;o=s[k]}if(o[i]&&void 0!==o[i][e.property]){var a=o[i][e.property];e.initialValue=a,e.setValue(a)}}}}function b(t,e){return document.location.href+"."+e}function y(t){function e(){c.style.display=t.useLocalStorage?"block":"none"}var n=t.__save_row=document.createElement("li");f.addClass(t.domElement,"has-save"),t.__ul.insertBefore(n,t.__ul.firstChild),
f.addClass(n,"save-row");var i=document.createElement("span");i.innerHTML="&nbsp;",f.addClass(i,"button gears");var r=document.createElement("span");r.innerHTML="Save",f.addClass(r,"button"),f.addClass(r,"save");var o=document.createElement("span");o.innerHTML="New",f.addClass(o,"button"),f.addClass(o,"save-as");var s=document.createElement("span");s.innerHTML="Revert",f.addClass(s,"button"),f.addClass(s,"revert");var a=t.__preset_select=document.createElement("select");if(t.load&&t.load.remembered?p.each(t.load.remembered,function(e,n){M(t,n,n==t.preset)}):M(t,k,!1),f.bind(a,"change",function(){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].innerHTML=t.__preset_select[e].value;t.preset=this.value}),n.appendChild(a),n.appendChild(i),n.appendChild(r),n.appendChild(o),n.appendChild(s),N){var u=document.getElementById("dg-save-locally"),c=document.getElementById("dg-local-explain");u.style.display="block";var l=document.getElementById("dg-local-storage");"true"===localStorage.getItem(b(t,"isLocal"))&&l.setAttribute("checked","checked"),e(),f.bind(l,"change",function(){t.useLocalStorage=!t.useLocalStorage,e()})}var h=document.getElementById("dg-new-constructor");f.bind(h,"keydown",function(t){!t.metaKey||67!==t.which&&67!=t.keyCode||A.hide()}),f.bind(i,"click",function(){h.innerHTML=JSON.stringify(t.getSaveObject(),void 0,2),A.show(),h.focus(),h.select()}),f.bind(r,"click",function(){t.save()}),f.bind(o,"click",function(){var e=prompt("Enter a new preset name.");e&&t.saveAs(e)}),f.bind(s,"click",function(){t.revert()})}function x(t){function e(e){return e.preventDefault(),r=e.clientX,f.addClass(t.__closeButton,F.CLASS_DRAG),f.bind(window,"mousemove",n),f.bind(window,"mouseup",i),!1}function n(e){return e.preventDefault(),t.width+=r-e.clientX,t.onResize(),r=e.clientX,!1}function i(){f.removeClass(t.__closeButton,F.CLASS_DRAG),f.unbind(window,"mousemove",n),f.unbind(window,"mouseup",i)}t.__resize_handle=document.createElement("div"),p.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});var r;f.bind(t.__resize_handle,"mousedown",e),f.bind(t.__closeButton,"mousedown",e),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}function w(t,e){t.domElement.style.width=e+"px",t.__save_row&&t.autoPlace&&(t.__save_row.style.width=e+"px"),t.__closeButton&&(t.__closeButton.style.width=e+"px")}function E(t,e){var n={};return p.each(t.__rememberedObjects,function(i,r){var o={},s=t.__rememberedObjectIndecesToControllers[r];p.each(s,function(t,n){o[n]=e?t.initialValue:t.getValue()}),n[r]=o}),n}function M(t,e,n){var i=document.createElement("option");i.innerHTML=e,i.value=e,t.__preset_select.appendChild(i),n&&(t.__preset_select.selectedIndex=t.__preset_select.length-1)}function T(t){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].value==t.preset&&(t.__preset_select.selectedIndex=e)}function O(t,e){var n=t.__preset_select[t.__preset_select.selectedIndex];e?n.innerHTML=n.value+"*":n.innerHTML=n.value}function P(t){0!=t.length&&h(function(){P(t)}),p.each(t,function(t){t.updateDisplay()})}t.inject(n);var A,S,L="dg",R=72,C=20,k="Default",N=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(t){return!1}}(),j=!0,D=!1,U=[],F=function(t){function e(){localStorage.setItem(b(i,"gui"),JSON.stringify(i.getSaveObject()))}function n(){var t=i.getRoot();t.width+=1,p.defer(function(){t.width-=1})}var i=this;this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),f.addClass(this.domElement,L),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],t=t||{},t=p.defaults(t,{autoPlace:!0,width:F.DEFAULT_WIDTH}),t=p.defaults(t,{resizable:t.autoPlace,hideable:t.autoPlace}),p.isUndefined(t.load)?t.load={preset:k}:t.preset&&(t.load.preset=t.preset),p.isUndefined(t.parent)&&t.hideable&&U.push(this),t.resizable=p.isUndefined(t.parent)&&t.resizable,t.autoPlace&&p.isUndefined(t.scrollable)&&(t.scrollable=!0);var r=N&&"true"===localStorage.getItem(b(this,"isLocal"));if(Object.defineProperties(this,{parent:{get:function(){return t.parent}},scrollable:{get:function(){return t.scrollable}},autoPlace:{get:function(){return t.autoPlace}},preset:{get:function(){return i.parent?i.getRoot().preset:t.load.preset},set:function(e){i.parent?i.getRoot().preset=e:t.load.preset=e,T(this),i.revert()}},width:{get:function(){return t.width},set:function(e){t.width=e,w(i,e)}},name:{get:function(){return t.name},set:function(e){t.name=e,s&&(s.innerHTML=t.name)}},closed:{get:function(){return t.closed},set:function(e){t.closed=e,t.closed?f.addClass(i.__ul,F.CLASS_CLOSED):f.removeClass(i.__ul,F.CLASS_CLOSED),this.onResize(),i.__closeButton&&(i.__closeButton.innerHTML=e?F.TEXT_OPEN:F.TEXT_CLOSED)}},load:{get:function(){return t.load}},useLocalStorage:{get:function(){return r},set:function(t){N&&(r=t,t?f.bind(window,"unload",e):f.unbind(window,"unload",e),localStorage.setItem(b(i,"isLocal"),t))}}}),p.isUndefined(t.parent)){if(t.closed=!1,f.addClass(this.domElement,F.CLASS_MAIN),f.makeSelectable(this.domElement,!1),N&&r){i.useLocalStorage=!0;var o=localStorage.getItem(b(this,"gui"));o&&(t.load=JSON.parse(o))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=F.TEXT_CLOSED,f.addClass(this.__closeButton,F.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),f.bind(this.__closeButton,"click",function(){i.closed=!i.closed})}else{void 0===t.closed&&(t.closed=!0);var s=document.createTextNode(t.name);f.addClass(s,"controller-name");var a=_(i,s),u=function(t){return t.preventDefault(),i.closed=!i.closed,!1};f.addClass(this.__ul,F.CLASS_CLOSED),f.addClass(a,"title"),f.bind(a,"click",u),t.closed||(this.closed=!1)}t.autoPlace&&(p.isUndefined(t.parent)&&(j&&(S=document.createElement("div"),f.addClass(S,L),f.addClass(S,F.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(S),j=!1),S.appendChild(this.domElement),f.addClass(this.domElement,F.CLASS_AUTO_PLACE)),this.parent||w(i,t.width)),f.bind(window,"resize",function(){i.onResize()}),f.bind(this.__ul,"webkitTransitionEnd",function(){i.onResize()}),f.bind(this.__ul,"transitionend",function(){i.onResize()}),f.bind(this.__ul,"oTransitionEnd",function(){i.onResize()}),this.onResize(),t.resizable&&x(this);i.getRoot();t.parent||n()};return F.toggleHide=function(){D=!D,p.each(U,function(t){t.domElement.style.zIndex=D?-999:999,t.domElement.style.opacity=D?0:1})},F.CLASS_AUTO_PLACE="a",F.CLASS_AUTO_PLACE_CONTAINER="ac",F.CLASS_MAIN="main",F.CLASS_CONTROLLER_ROW="cr",F.CLASS_TOO_TALL="taller-than-window",F.CLASS_CLOSED="closed",F.CLASS_CLOSE_BUTTON="close-button",F.CLASS_DRAG="drag",F.DEFAULT_WIDTH=245,F.TEXT_CLOSED="Close Controls",F.TEXT_OPEN="Open Controls",f.bind(window,"keydown",function(t){"text"===document.activeElement.type||t.which!==R&&t.keyCode!=R||F.toggleHide()},!1),p.extend(F.prototype,{add:function(t,e){return v(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,e){return v(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.slice(this.__controllers.indexOf(t),1);var e=this;p.defer(function(){e.onResize()})},destroy:function(){this.autoPlace&&S.removeChild(this.domElement)},addFolder:function(t){if(void 0!==this.__folders[t])throw new Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]);var n=new F(e);this.__folders[t]=n;var i=_(this,n.domElement);return f.addClass(i,"folder"),n},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=f.getOffset(t.__ul).top,n=0;p.each(t.__ul.childNodes,function(e){t.autoPlace&&e===t.__save_row||(n+=f.getHeight(e))}),window.innerHeight-e-C<n?(f.addClass(t.domElement,F.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-C+"px"):(f.removeClass(t.domElement,F.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&p.defer(function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"}),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},remember:function(){if(p.isUndefined(A)&&(A=new d,A.domElement.innerHTML=e),this.parent)throw new Error("You can only call remember on a top level GUI.");var t=this;p.each(Array.prototype.slice.call(arguments),function(e){0==t.__rememberedObjects.length&&y(t),t.__rememberedObjects.indexOf(e)==-1&&t.__rememberedObjects.push(e)}),this.autoPlace&&w(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,this.__rememberedObjects.length>0&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=E(this)),t.folders={},p.each(this.__folders,function(e,n){t.folders[n]=e.getSaveObject()}),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=E(this),O(this,!1)},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered[k]=E(this,!0)),this.load.remembered[t]=E(this),this.preset=t,M(this,t,!0)},revert:function(t){p.each(this.__controllers,function(e){this.getRoot().load.remembered?g(t||this.getRoot(),e):e.setValue(e.initialValue)},this),p.each(this.__folders,function(t){t.revert(t)}),t||O(this.getRoot(),!1)},listen:function(t){var e=0==this.__listening.length;this.__listening.push(t),e&&P(this.__listening)}}),F}(n.utils.css,'<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>',".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n",n.controllers.factory=function(t,e,n,i,r,o,s){return function(a,u){var c=a[u];return s.isArray(arguments[2])||s.isObject(arguments[2])?new t(a,u,arguments[2]):s.isNumber(c)?s.isNumber(arguments[2])&&s.isNumber(arguments[3])?new n(a,u,arguments[2],arguments[3]):new e(a,u,{min:arguments[2],max:arguments[3]}):s.isString(c)?new i(a,u):s.isFunction(c)?new r(a,u,""):s.isBoolean(c)?new o(a,u):void 0}}(n.controllers.OptionController,n.controllers.NumberControllerBox,n.controllers.NumberControllerSlider,n.controllers.StringController=function(t,e,n){var i=function(t,n){function r(){s.setValue(s.__input.value)}function o(){s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}i.superclass.call(this,t,n);var s=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),e.bind(this.__input,"keyup",r),e.bind(this.__input,"change",r),e.bind(this.__input,"blur",o),e.bind(this.__input,"keydown",function(t){13===t.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return i.superclass=t,n.extend(i.prototype,t.prototype,{updateDisplay:function(){return e.isActive(this.__input)||(this.__input.value=this.getValue()),i.superclass.prototype.updateDisplay.call(this)}}),i}(n.controllers.Controller,n.dom.dom,n.utils.common),n.controllers.FunctionController,n.controllers.BooleanController,n.utils.common),n.controllers.Controller,n.controllers.BooleanController,n.controllers.FunctionController,n.controllers.NumberControllerBox,n.controllers.NumberControllerSlider,n.controllers.OptionController,n.controllers.ColorController=function(t,e,n,i,r){function o(t,e,n,i){t.style.background="",r.each(u,function(r){t.style.cssText+="background: "+r+"linear-gradient("+e+", "+n+" 0%, "+i+" 100%); "})}function s(t){t.style.background="",t.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",t.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var a=function(t,u){function c(t){f(t),e.bind(window,"mousemove",f),e.bind(window,"mouseup",l)}function l(){e.unbind(window,"mousemove",f),e.unbind(window,"mouseup",l)}function h(){var t=i(this.value);t!==!1?(v.__color.__state=t,v.setValue(v.__color.toOriginal())):this.value=v.__color.toString()}function d(){e.unbind(window,"mousemove",p),e.unbind(window,"mouseup",d)}function f(t){t.preventDefault();var n=e.getWidth(v.__saturation_field),i=e.getOffset(v.__saturation_field),r=(t.clientX-i.left+document.body.scrollLeft)/n,o=1-(t.clientY-i.top+document.body.scrollTop)/n;return o>1?o=1:o<0&&(o=0),r>1?r=1:r<0&&(r=0),v.__color.v=o,v.__color.s=r,v.setValue(v.__color.toOriginal()),!1}function p(t){t.preventDefault();var n=e.getHeight(v.__hue_field),i=e.getOffset(v.__hue_field),r=1-(t.clientY-i.top+document.body.scrollTop)/n;return r>1?r=1:r<0&&(r=0),v.__color.h=360*r,v.setValue(v.__color.toOriginal()),!1}a.superclass.call(this,t,u),this.__color=new n(this.getValue()),this.__temp=new n(0);var v=this;this.domElement=document.createElement("div"),e.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",e.bind(this.__input,"keydown",function(t){13===t.keyCode&&h.call(this)}),e.bind(this.__input,"blur",h),e.bind(this.__selector,"mousedown",function(t){e.addClass(this,"drag").bind(window,"mouseup",function(t){e.removeClass(v.__selector,"drag")})});var _=document.createElement("div");r.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),r.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(this.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),r.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),r.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),r.extend(_.style,{width:"100%",height:"100%",background:"none"}),o(_,"top","rgba(0,0,0,0)","#000"),r.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),s(this.__hue_field),r.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),e.bind(this.__saturation_field,"mousedown",c),e.bind(this.__field_knob,"mousedown",c),e.bind(this.__hue_field,"mousedown",function(t){p(t),e.bind(window,"mousemove",p),e.bind(window,"mouseup",d)}),this.__saturation_field.appendChild(_),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()};a.superclass=t,r.extend(a.prototype,t.prototype,{updateDisplay:function(){var t=i(this.getValue());if(t!==!1){var e=!1;r.each(n.COMPONENTS,function(n){if(!r.isUndefined(t[n])&&!r.isUndefined(this.__color.__state[n])&&t[n]!==this.__color.__state[n])return e=!0,{}},this),e&&r.extend(this.__color.__state,t)}r.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var s=this.__color.v<.5||this.__color.s>.5?255:0,a=255-s;r.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+s+","+s+","+s+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,o(this.__saturation_field,"left","#fff",this.__temp.toString()),r.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+s+","+s+","+s+")",textShadow:this.__input_textShadow+"rgba("+a+","+a+","+a+",.7)"})}});var u=["-moz-","-o-","-webkit-","-ms-",""];return a}(n.controllers.Controller,n.dom.dom,n.color.Color=function(t,e,n,i){function r(t,e,n){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space?this.__state[e]:(s(this,e,n),this.__state[e])},set:function(t){"RGB"!==this.__state.space&&(s(this,e,n),this.__state.space="RGB"),this.__state[e]=t}})}function o(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space?this.__state[e]:(a(this),this.__state[e])},set:function(t){"HSV"!==this.__state.space&&(a(this),this.__state.space="HSV"),this.__state[e]=t}})}function s(t,n,r){if("HEX"===t.__state.space)t.__state[n]=e.component_from_hex(t.__state.hex,r);else{if("HSV"!==t.__state.space)throw"Corrupted color state";i.extend(t.__state,e.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}}function a(t){var n=e.rgb_to_hsv(t.r,t.g,t.b);i.extend(t.__state,{s:n.s,v:n.v}),i.isNaN(n.h)?i.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=n.h}var u=function(){if(this.__state=t.apply(this,arguments),this.__state===!1)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return u.COMPONENTS=["r","g","b","h","s","v","hex","a"],i.extend(u.prototype,{toString:function(){return n(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),r(u.prototype,"r",2),r(u.prototype,"g",1),r(u.prototype,"b",0),o(u.prototype,"h"),o(u.prototype,"s"),o(u.prototype,"v"),Object.defineProperty(u.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(u.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=e.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}}),u}(n.color.interpret,n.color.math=function(){var t;return{hsv_to_rgb:function(t,e,n){var i=Math.floor(t/60)%6,r=t/60-Math.floor(t/60),o=n*(1-e),s=n*(1-r*e),a=n*(1-(1-r)*e),u=[[n,a,o],[s,n,o],[o,n,a],[o,s,n],[a,o,n],[n,o,s]][i];return{r:255*u[0],g:255*u[1],b:255*u[2]}},rgb_to_hsv:function(t,e,n){var i,r,o=Math.min(t,e,n),s=Math.max(t,e,n),a=s-o;return 0==s?{h:NaN,s:0,v:0}:(r=a/s,i=t==s?(e-n)/a:e==s?2+(n-t)/a:4+(t-e)/a,i/=6,i<0&&(i+=1),{h:360*i,s:r,v:s/255})},rgb_to_hex:function(t,e,n){var i=this.hex_with_component(0,2,t);return i=this.hex_with_component(i,1,e),i=this.hex_with_component(i,0,n)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(e,n,i){return i<<(t=8*n)|e&~(255<<t)}}}(),n.color.toString,n.utils.common),n.color.interpret,n.utils.common),n.utils.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){window.setTimeout(t,1e3/60)}}(),n.dom.CenteredDiv=function(t,e){var n=function(){this.backgroundElement=document.createElement("div"),e.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"}),t.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),e.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var n=this;t.bind(this.backgroundElement,"click",function(){n.hide()})};return n.prototype.show=function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),e.defer(function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"})},n.prototype.hide=function(){var e=this,n=function(){e.domElement.style.display="none",e.backgroundElement.style.display="none",t.unbind(e.domElement,"webkitTransitionEnd",n),t.unbind(e.domElement,"transitionend",n),t.unbind(e.domElement,"oTransitionEnd",n)};t.bind(this.domElement,"webkitTransitionEnd",n),t.bind(this.domElement,"transitionend",n),t.bind(this.domElement,"oTransitionEnd",n),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},n.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-t.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-t.getHeight(this.domElement)/2+"px"},n}(n.dom.dom,n.utils.common),n.dom.dom,n.utils.common)},function(t,e,n){!function(){function e(t,e){document.addEventListener?t.addEventListener("scroll",e,!1):t.attachEvent("scroll",e)}function n(t){document.body?t():document.addEventListener?document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e),t()}):document.attachEvent("onreadystatechange",function e(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",e),t())})}function i(t){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(t)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function r(t,e){t.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;left:-999px;white-space:nowrap;font:"+e+";"}function o(t){var e=t.a.offsetWidth,n=e+100;return t.f.style.width=n+"px",t.c.scrollLeft=n,t.b.scrollLeft=t.b.scrollWidth+100,t.g!==e&&(t.g=e,!0)}function s(t,n){function i(){var t=r;o(t)&&t.a.parentNode&&n(t.g)}var r=t;e(t.b,i),e(t.c,i),o(t)}function a(t,e){var n=e||{};this.family=t,this.style=n.style||"normal",this.weight=n.weight||"normal",this.stretch=n.stretch||"normal"}function u(){if(null===d){var t=document.createElement("div");try{t.style.font="condensed 100px sans-serif"}catch(t){}d=""!==t.style.font}return d}function c(t,e){return[t.style,t.weight,u()?t.stretch:"","100px",e].join(" ")}var l=null,h=null,d=null,f=null;a.prototype.load=function(t,e){var o=this,a=t||"BESbswy",u=0,d=e||3e3,p=(new Date).getTime();return new Promise(function(t,e){var v;if(null===f&&(f=!!document.fonts),(v=f)&&(null===h&&(h=/OS X.*Version\/10\..*Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)),v=!h),v){v=new Promise(function(t,e){function n(){(new Date).getTime()-p>=d?e():document.fonts.load(c(o,'"'+o.family+'"'),a).then(function(e){1<=e.length?t():setTimeout(n,25)},function(){e()})}n()});var _=new Promise(function(t,e){u=setTimeout(e,d)});Promise.race([_,v]).then(function(){clearTimeout(u),t(o)},function(){e(o)})}else n(function(){function n(){var e;(e=-1!=m&&-1!=g||-1!=m&&-1!=b||-1!=g&&-1!=b)&&((e=m!=g&&m!=b&&g!=b)||(null===l&&(e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),l=!!e&&(536>parseInt(e[1],10)||536===parseInt(e[1],10)&&11>=parseInt(e[2],10))),e=l&&(m==y&&g==y&&b==y||m==x&&g==x&&b==x||m==w&&g==w&&b==w)),e=!e),e&&(E.parentNode&&E.parentNode.removeChild(E),clearTimeout(u),t(o))}function h(){if((new Date).getTime()-p>=d)E.parentNode&&E.parentNode.removeChild(E),e(o);else{var t=document.hidden;!0!==t&&void 0!==t||(m=f.a.offsetWidth,g=v.a.offsetWidth,b=_.a.offsetWidth,n()),u=setTimeout(h,50)}}var f=new i(a),v=new i(a),_=new i(a),m=-1,g=-1,b=-1,y=-1,x=-1,w=-1,E=document.createElement("div");E.dir="ltr",r(f,c(o,"sans-serif")),r(v,c(o,"serif")),r(_,c(o,"monospace")),E.appendChild(f.a),E.appendChild(v.a),E.appendChild(_.a),document.body.appendChild(E),y=f.a.offsetWidth,x=v.a.offsetWidth,w=_.a.offsetWidth,h(),s(f,function(t){m=t,n()}),r(f,c(o,'"'+o.family+'",sans-serif')),s(v,function(t){g=t,n()}),r(v,c(o,'"'+o.family+'",serif')),s(_,function(t){b=t,n()}),r(_,c(o,'"'+o.family+'",monospace'))})})},t.exports=a}()},function(t,e,n){(function(e){"use strict";function i(t,e){for(var n=[],i=0;i<t.length;i++){var r=t[i];r&&"."!==r&&(".."===r?n.length&&".."!==n[n.length-1]?n.pop():e&&n.push(".."):n.push(r))}return n}function r(t){for(var e=t.length-1,n=0;n<=e&&!t[n];n++);for(var i=e;i>=0&&!t[i];i--);return 0===n&&i===e?t:n>i?[]:t.slice(n,i+1)}function o(t){var e=h.exec(t),n=(e[1]||"")+(e[2]||""),i=e[3]||"",r=d.exec(i),o=r[1],s=r[2],a=r[3];return[n,o,s,a]}function s(t){var e=h.exec(t),n=e[1]||"",i=!!n&&":"!==n[1];return{device:n,isUnc:i,isAbsolute:i||!!e[2],tail:e[3]}}function a(t){return"\\\\"+t.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\");
}function u(t){return p.exec(t).slice(1)}var c="win32"===e.platform,l=n(71),h=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,d=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,f={};f.resolve=function(){for(var t="",n="",r=!1,o=arguments.length-1;o>=-1;o--){var u;if(o>=0?u=arguments[o]:t?(u=e.env["="+t],u&&u.substr(0,3).toLowerCase()===t.toLowerCase()+"\\"||(u=t+"\\")):u=e.cwd(),!l.isString(u))throw new TypeError("Arguments to path.resolve must be strings");if(u){var c=s(u),h=c.device,d=c.isUnc,f=c.isAbsolute,p=c.tail;if((!h||!t||h.toLowerCase()===t.toLowerCase())&&(t||(t=h),r||(n=p+"\\"+n,r=f),t&&r))break}}return d&&(t=a(t)),n=i(n.split(/[\\\/]+/),!r).join("\\"),t+(r?"\\":"")+n||"."},f.normalize=function(t){var e=s(t),n=e.device,r=e.isUnc,o=e.isAbsolute,u=e.tail,c=/[\\\/]$/.test(u);return u=i(u.split(/[\\\/]+/),!o).join("\\"),u||o||(u="."),u&&c&&(u+="\\"),r&&(n=a(n)),n+(o?"\\":"")+u},f.isAbsolute=function(t){return s(t).isAbsolute},f.join=function(){for(var t=[],e=0;e<arguments.length;e++){var n=arguments[e];if(!l.isString(n))throw new TypeError("Arguments to path.join must be strings");n&&t.push(n)}var i=t.join("\\");return/^[\\\/]{2}[^\\\/]/.test(t[0])||(i=i.replace(/^[\\\/]{2,}/,"\\")),f.normalize(i)},f.relative=function(t,e){t=f.resolve(t),e=f.resolve(e);for(var n=t.toLowerCase(),i=e.toLowerCase(),o=r(e.split("\\")),s=r(n.split("\\")),a=r(i.split("\\")),u=Math.min(s.length,a.length),c=u,l=0;l<u;l++)if(s[l]!==a[l]){c=l;break}if(0==c)return e;for(var h=[],l=c;l<s.length;l++)h.push("..");return h=h.concat(o.slice(c)),h.join("\\")},f._makeLong=function(t){if(!l.isString(t))return t;if(!t)return"";var e=f.resolve(t);return/^[a-zA-Z]\:\\/.test(e)?"\\\\?\\"+e:/^\\\\[^?.]/.test(e)?"\\\\?\\UNC\\"+e.substring(2):t},f.dirname=function(t){var e=o(t),n=e[0],i=e[1];return n||i?(i&&(i=i.substr(0,i.length-1)),n+i):"."},f.basename=function(t,e){var n=o(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},f.extname=function(t){return o(t)[3]},f.format=function(t){if(!l.isObject(t))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof t);var e=t.root||"";if(!l.isString(e))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof t.root);var n=t.dir,i=t.base||"";return n?n[n.length-1]===f.sep?n+i:n+f.sep+i:i},f.parse=function(t){if(!l.isString(t))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var e=o(t);if(!e||4!==e.length)throw new TypeError("Invalid path '"+t+"'");return{root:e[0],dir:e[0]+e[1].slice(0,-1),base:e[2],ext:e[3],name:e[2].slice(0,e[2].length-e[3].length)}},f.sep="\\",f.delimiter=";";var p=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,v={};v.resolve=function(){for(var t="",n=!1,r=arguments.length-1;r>=-1&&!n;r--){var o=r>=0?arguments[r]:e.cwd();if(!l.isString(o))throw new TypeError("Arguments to path.resolve must be strings");o&&(t=o+"/"+t,n="/"===o[0])}return t=i(t.split("/"),!n).join("/"),(n?"/":"")+t||"."},v.normalize=function(t){var e=v.isAbsolute(t),n=t&&"/"===t[t.length-1];return t=i(t.split("/"),!e).join("/"),t||e||(t="."),t&&n&&(t+="/"),(e?"/":"")+t},v.isAbsolute=function(t){return"/"===t.charAt(0)},v.join=function(){for(var t="",e=0;e<arguments.length;e++){var n=arguments[e];if(!l.isString(n))throw new TypeError("Arguments to path.join must be strings");n&&(t+=t?"/"+n:n)}return v.normalize(t)},v.relative=function(t,e){t=v.resolve(t).substr(1),e=v.resolve(e).substr(1);for(var n=r(t.split("/")),i=r(e.split("/")),o=Math.min(n.length,i.length),s=o,a=0;a<o;a++)if(n[a]!==i[a]){s=a;break}for(var u=[],a=s;a<n.length;a++)u.push("..");return u=u.concat(i.slice(s)),u.join("/")},v._makeLong=function(t){return t},v.dirname=function(t){var e=u(t),n=e[0],i=e[1];return n||i?(i&&(i=i.substr(0,i.length-1)),n+i):"."},v.basename=function(t,e){var n=u(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},v.extname=function(t){return u(t)[3]},v.format=function(t){if(!l.isObject(t))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof t);var e=t.root||"";if(!l.isString(e))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof t.root);var n=t.dir?t.dir+v.sep:"",i=t.base||"";return n+i},v.parse=function(t){if(!l.isString(t))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var e=u(t);if(!e||4!==e.length)throw new TypeError("Invalid path '"+t+"'");return e[1]=e[1]||"",e[2]=e[2]||"",e[3]=e[3]||"",{root:e[0],dir:e[0]+e[1].slice(0,-1),base:e[2],ext:e[3],name:e[2].slice(0,e[2].length-e[3].length)}},v.sep="/",v.delimiter=":",c?t.exports=f:t.exports=v,t.exports.posix=v,t.exports.win32=f}).call(e,n(15))},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(7),a=i(s),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:512,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:512;arguments[2];r(this,t),this.gl=POLY.gl;var i=this.gl;this.width=e,this.height=n;a.default.getExtension("OES_texture_float");if(!a.default.getExtension("OES_texture_float"))throw new Error("float textures not supported");var o=(a.default.getExtension("OES_texture_half_float"),i.UNSIGNED_BYTE),s=a.default.getExtension("OES_texture_half_float");a.default.getExtension("OES_texture_float_linear"),a.default.checkExtension("OES_texture_float")?o=i.FLOAT:s&&(o=s.HALF_FLOAT_OES),this.textures=[],this.framebuffer=i.createFramebuffer(),i.bindFramebuffer(i.FRAMEBUFFER,this.framebuffer),this.texture=i.createTexture(),this.gltexture=new POLY.Texture(this.texture,!0),this.textures.push(this.gltexture),i.bindTexture(i.TEXTURE_2D,this.texture),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.generateMipmap(i.TEXTURE_2D),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,this.width,this.height,0,i.RGBA,o,null);var u=i.createRenderbuffer();i.bindRenderbuffer(i.RENDERBUFFER,u),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_COMPONENT16,this.width,this.height),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,this.texture,0),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,u),this.clean()}return o(t,[{key:"bind",value:function(){var t=this.gl;t.viewport(0,0,this.width,this.height),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)}},{key:"unbind",value:function(){var t=this.gl;t.bindTexture(t.TEXTURE_2D,this.gltexture._texture),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,t.canvas.width,t.canvas.height)}},{key:"clean",value:function(){var t=this.gl;t.bindTexture(t.TEXTURE_2D,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null)}},{key:"clear",value:function(){this.bind(),this.gl.clear(0,0,0,0),this.unbind()}}]),t}();e.default=u,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(4),a=i(s),u=n(7),c=i(u);e.default=new(function(){function t(){r(this,t),this._lastMesh=null,this._lastProgram=null,this.aspectRatio=0,this.state=null,this.enabledVertexAttributes=[],this.instancedAttributes=[]}return o(t,[{key:"init",value:function(t){this.state=new a.default(t),c.default.init(),this._hasInstance=c.default.checkExtension("ANGLE_instanced_arrays"),this._instanceExt=c.default.getExtension("ANGLE_instanced_arrays")}},{key:"_bindBuffers",value:function(t){for(var e=t.program.gl,n=0;n<t._attributes.length;n++){var i=t._attributes[n];e.bindBuffer(e.ARRAY_BUFFER,i.buffer);var r=t.program.getAttributeLocation(i.name);e.vertexAttribPointer(r,i.itemSize,e.FLOAT,!1,0,0),t.instanceCount>0&&i.instance&&this._hasInstance&&(this._instanceExt.vertexAttribDivisorANGLE(r,1),this.instancedAttributes.push(r)),this.enabledVertexAttributes.indexOf(r)===-1&&(this.enabledVertexAttributes.push(r),e.enableVertexAttribArray(r))}t.indexBuffer&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.indexBuffer)}},{key:"setCamera",value:function(t){this._camera=t}},{key:"_updateMatrices",value:function(t){var e=t.program;e.uniforms.projectionMatrix=this._camera.projectionMatrix,e.uniforms.viewMatrix=this._camera.matrix,e.uniforms.modelMatrix=t._matrix}},{key:"draw",value:function(t){this._lastMesh!==t&&(this.resetInstancedAttribute(),this._bindBuffers(t),this._lastMesh=t),this._lastProgram!==t.program&&(this._lastProgram=t.program),t.update();var e=t.program.gl;t.state&&this.state.setState(t.state),this._camera&&this._updateMatrices(t),t.instanceCount>0&&this._hasInstance?t.indexBuffer?this._instanceExt.drawElementsInstancedANGLE(t.drawType,t._indices.length,e.UNSIGNED_SHORT,0,t.instanceCount):this._instanceExt.drawArraysInstancedANGLE(t.drawType,0,t._numItems,t.instanceCount):t.indexBuffer?e.drawElements(t.drawType,t._indices.length,e.UNSIGNED_SHORT,0):e.drawArrays(t.drawType,0,t._numItems)}},{key:"resetInstancedAttribute",value:function(){if(this.instancedAttributes.length>0&&this._hasInstance){for(var t=0;t<this.instancedAttributes.length;t++){var e=this.instancedAttributes[t];this._instanceExt.vertexAttribDivisorANGLE(e,0)}this.instancedAttributes=[]}}},{key:"resize",value:function(t,e){var n=POLY.gl;n.canvas.width=t,n.canvas.height=e,n.viewportWidth=t,n.viewportHeight=e,n.viewport(0,0,n.viewportWidth,n.viewportHeight),this.aspectRatio=t/e}}]),t}()),t.exports=e.default},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(2),s=function(){function t(){i(this,t),this.aspectRatio=o.mat4.create(),this.matrix=o.mat4.create(),this.projectionMatrix=o.mat4.create(),this.mRX=o.mat4.create(),this.mRY=o.mat4.create(),this.mRZ=o.mat4.create(),this.mT=o.mat4.create(),this.position=o.vec3.create()}return r(t,[{key:"lookAt",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,1,0];o.mat4.lookAt(this.matrix,this.position,t,e)}},{key:"rotateY",value:function(t){o.mat4.fromYRotation(this.mRY,t)}},{key:"rotateX",value:function(t){o.mat4.identity(this.mRX),o.mat4.fromXRotation(this.mRX,t)}},{key:"rotateZ",value:function(t){o.mat4.identity(this.mRZ),o.mat4.fromXRotation(this.mRZ,t)}},{key:"setRotation",value:function(t,e,n){}},{key:"setPosition",value:function(t,e,n){this.position=[t,e,n],o.mat4.identity(this.mT,this.mT),o.mat4.translate(this.mT,this.mT,[t,e,n])}},{key:"setAspectRatio",value:function(t){this.aspectRatio=t,this.perspective(this.fov,t,this.near,this.far)}},{key:"perspective",value:function(t,e,n,i){o.mat4.perspective(this.projectionMatrix,t,e,n,i),this.fov=t,this.near=n,this.far=i,this.aspect=e}},{key:"orthographic",value:function(t,e,n,i,r,o,s){return s=s||new Float32Array(16),s[0]=2/(e-t),s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=2/(i-n),s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2/(r-o),s[11]=0,s[12]=(t+e)/(t-e),s[13]=(n+i)/(n-i),s[14]=(r+o)/(r-o),s[15]=1,s}}]),t}();e.default=s,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(38),o=i(r);e.default={PerspectiveCamera:o.default},t.exports=e.default},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(2),s=function(t){return t.touches?{x:t.touches[0].pageX,y:t.touches[0].pageY}:{x:t.clientX,y:t.clientY}},a=o.vec3.fromValues(0,1,0),u=(Math.PI/2-.01,function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;i(this,t),this._mtxTarget=e,this._radius=n,this._targetRadius=n,this._listenerTarget=r,this._isDown=!1,this._rotation=o.mat4.create(),this.center=o.vec3.create(),this.easing=.1,this.senstivity=1,this.senstivityRotation=1,this._isLocked=!1,this._isZoomLocked=!1,this._rx=0,this._trx=0,this._prevx=0,this._ry=0,this._try=0,this._prevy=0,this._quat=o.quat.create(),this._vec=o.vec3.create(),this._mtx=o.mat4.create(),this._mouseDown={x:0,y:0},this._mouse={x:0,y:0},this._init()}return r(t,[{key:"_init",value:function(){var t=this;this._listenerTarget.addEventListener("mousedown",function(e){return t._onDown(e)}),this._listenerTarget.addEventListener("mouseup",function(){return t._onUp()}),this._listenerTarget.addEventListener("mousemove",function(e){return t._onMove(e)}),this._listenerTarget.addEventListener("touchstart",function(e){return t._onDown(e)}),this._listenerTarget.addEventListener("touchend",function(){return t._onUp()}),this._listenerTarget.addEventListener("touchmove",function(e){return t._onMove(e)}),this._listenerTarget.addEventListener("mousewheel",function(e){return t._onWheel(e)}),this._listenerTarget.addEventListener("DOMMouseScroll",function(e){return t._onWheel(e)})}},{key:"lock",value:function(t){this._isLocked=t}},{key:"lockZoom",value:function(t){this._isZoomLocked=t}},{key:"_onWheel",value:function(t){if(!this._isZoomLocked){var e=t.wheelDelta,n=t.detail,i=0;i=n?e?e/n/40*n>0?1:-1:-n/3:e/120,this._targetRadius+=2*-i*this.senstivity,this._targetRadius<.01&&(this._targetRadius=.01)}}},{key:"_onDown",value:function(t){this._isLocked||(this._isDown=!0,this._mouseDown=s(t),this._mouse=s(t),this._prevx=this._trx=this._rx,this._prevy=this._try=this._ry)}},{key:"_onMove",value:function(t){this._isLocked||this._isDown&&(this._mouse=s(t))}},{key:"_onUp",value:function(){this._isLocked||(this._isDown=!1)}},{key:"update",value:function(){var t=this._mouse.x-this._mouseDown.x,e=this._mouse.y-this._mouseDown.y,n=.02*this.senstivityRotation;this._try=this._prevy-t*n,this._trx=this._prevx-e*n,this._trx<-Math.PI/2+.01?this._trx=-Math.PI/2+.01:this._trx>Math.PI/2-.01&&(this._trx=Math.PI/2-.01),this._rx+=(this._trx-this._rx)*this.easing,this._ry+=(this._try-this._ry)*this.easing,this._radius+=(this._targetRadius-this._radius)*this.easing,o.quat.identity(this._quat),o.quat.rotateY(this._quat,this._quat,this._ry),o.quat.rotateX(this._quat,this._quat,this._rx),o.vec3.set(this._vec,0,0,this._radius),o.vec3.transformQuat(this._vec,this._vec,this._quat),o.mat4.identity(this._mtx),o.mat4.lookAt(this._mtx,this._vec,this.center,a),this._mtxTarget&&o.mat4.copy(this._mtxTarget,this._mtx)}}]),t}());e.default=u,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(40),o=i(r);e.default={OrbitalControl:o.default},t.exports=e.default},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e){return n(this,t),this.cb=e,this._x=0,this._y=0,this._z=0,this}return i(t,[{key:"set",value:function(t,e,n){t||(t=0),void 0===e&&(e=n=t),this._x=t,this._y=e,this._z=n,this.cb&&this.cb()}},{key:"x",get:function(){return this._x},set:function(t){this._x=t,this.cb&&this.cb()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this.cb&&this.cb()}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this.cb&&this.cb()}}]),t}();e.default=r,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(42),o=i(r);e.default={Vector:o.default},t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(2),a=n(43),u=i(a),c=function(){function t(){r(this,t),this._matrix=s.mat4.create(),this._needsUpdate=!1,this.position=new u.default.Vector(this._onPropertyUpdate.bind(this)),this.scale=new u.default.Vector(this._onPropertyUpdate.bind(this)),this.scale.set(1,1,1),this.rotation=new u.default.Vector(this._onPropertyUpdate.bind(this)),this._rotation=s.vec3.create(),this._scale=s.vec3.fromValues(1,1,1),this._position=s.vec3.create()}return o(t,[{key:"_onPropertyUpdate",value:function(){this._needsUpdate=!0}},{key:"_updateMatrix",value:function(){s.vec3.set(this._scale,this.scale.x,this.scale.y,this.scale.z),s.vec3.set(this._position,this.position.x,this.position.y,this.position.z),s.vec3.set(this._rotation,this.rotation.x,this.rotation.y,this.rotation.z),s.mat4.identity(this._matrix,this._matrix),s.mat4.translate(this._matrix,this._matrix,this._position),s.mat4.rotateX(this._matrix,this._matrix,this._rotation[0]),s.mat4.rotateY(this._matrix,this._matrix,this._rotation[1]),s.mat4.rotateZ(this._matrix,this._matrix,this._rotation[2]),s.mat4.scale(this._matrix,this._matrix,this._scale)}},{key:"update",value:function(){this._needsUpdate&&this._updateMatrix()}}]),t}();e.default=c,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),o=i(r),s=n(47),a=i(s),u=n(52),c=i(u),l=n(48),h=i(l),d=n(50),f=i(d),p=n(46),v=i(p),_=n(51),m=i(_),g=n(49),b=i(g);e.default={Mesh:o.default,Cube:a.default,Sphere:c.default,IcoSphere:h.default,BigTriangle:v.default,Quad:m.default,Plane:f.default,Line:b.default},t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),u=i(a),c=n(5),l=(i(c),n(6)),h=(i(l),function(t){function e(t){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments[2]),i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4;r(this,e);var s=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i)),a=[2,1,0],u=[-1,-1,-1,4,4,-1];return s.addPosition(u,"aPosition",2),s.addIndices(a,!1),s}return s(e,t),e}(u.default));e.default=h,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(3),c=i(u),l=n(5),h=i(l),d=n(6),f=(i(d),function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4;r(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,s));return n=n||{},a.options={w:n.w||1,h:n.h||1,d:n.d||1,multiFace:n.multiFace,subdivision:n.subdivision||0,positionAttributeName:n.positionAttributeName||"aPosition"},a.multiFace=a.options.multiFace,a.subdivision=a.options.subdivision,a.width=a.options.w,a.height=a.options.h,a.depth=a.options.d,a.cube(),a}return s(e,t),a(e,[{key:"cube",value:function(){var t=this.width/2,e=this.height/2,n=this.depth/2,i=[],r=[],o=[],s=[],a=0;i.push(-t,e,-n),i.push(t,e,-n),i.push(t,-e,-n),i.push(-t,-e,-n),s.push(0,0,-1),s.push(0,0,-1),s.push(0,0,-1),s.push(0,0,-1),this.multiFace?(r.push(0,0),r.push(.25,0),r.push(.25,.5),r.push(0,.5)):(r.push(0,0),r.push(1,0),r.push(1,1),r.push(0,1)),o.push(4*a+0),o.push(4*a+1),o.push(4*a+2),o.push(4*a+0),o.push(4*a+2),o.push(4*a+3),a++,i.push(t,e,-n),i.push(t,e,n),i.push(t,-e,n),i.push(t,-e,-n),s.push(1,0,0),s.push(1,0,0),s.push(1,0,0),s.push(1,0,0),this.multiFace?(r.push(.25,0),r.push(.5,0),r.push(.5,.5),r.push(.25,.5)):(r.push(0,0),r.push(1,0),r.push(1,1),r.push(0,1)),o.push(4*a+0),o.push(4*a+1),o.push(4*a+2),o.push(4*a+0),o.push(4*a+2),o.push(4*a+3),a++,i.push(t,e,n),i.push(-t,e,n),i.push(-t,-e,n),i.push(t,-e,n),s.push(0,0,1),s.push(0,0,1),s.push(0,0,1),s.push(0,0,1),this.multiFace?(r.push(.5,0),r.push(.75,0),r.push(.75,.5),r.push(.5,.5)):(r.push(0,0),r.push(1,0),r.push(1,1),r.push(0,1)),o.push(4*a+0),o.push(4*a+1),o.push(4*a+2),o.push(4*a+0),o.push(4*a+2),o.push(4*a+3),a++,i.push(-t,e,n),i.push(-t,e,-n),i.push(-t,-e,-n),i.push(-t,-e,n),s.push(-1,0,0),s.push(-1,0,0),s.push(-1,0,0),s.push(-1,0,0),this.multiFace?(r.push(0,.5),r.push(.25,.5),r.push(.25,1),r.push(0,1)):(r.push(0,0),r.push(1,0),r.push(1,1),r.push(0,1)),o.push(4*a+0),o.push(4*a+1),o.push(4*a+2),o.push(4*a+0),o.push(4*a+2),o.push(4*a+3),a++,i.push(-t,e,n),i.push(t,e,n),i.push(t,e,-n),i.push(-t,e,-n),s.push(0,1,0),s.push(0,1,0),s.push(0,1,0),s.push(0,1,0),this.multiFace?(r.push(.25,.5),r.push(.5,.5),r.push(.5,1),r.push(.25,1)):(r.push(0,0),r.push(1,0),r.push(1,1),r.push(0,1)),o.push(4*a+0),o.push(4*a+1),o.push(4*a+2),o.push(4*a+0),o.push(4*a+2),o.push(4*a+3),a++,i.push(-t,-e,-n),i.push(t,-e,-n),i.push(t,-e,n),i.push(-t,-e,n),s.push(0,-1,0),s.push(0,-1,0),s.push(0,-1,0),s.push(0,-1,0),this.multiFace?(r.push(.5,.5),r.push(.75,.5),r.push(.75,1),r.push(.5,1)):(r.push(0,0),r.push(1,0),r.push(1,1),r.push(0,1)),o.push(4*a+0),o.push(4*a+1),o.push(4*a+2),o.push(4*a+0),o.push(4*a+2),o.push(4*a+3);for(var u=[],c=0;c<o.length;c+=3)u.push(o[c],o[c+1],o[c+2]);for(var l=h.default.multiplyTriangles(this.subdivision,u,i),d=i.length-r.length,c=0;c<d;c++)r.push(0,0),s.push(0,-1,0);this.uvs=r,this.normals=s,this.addPosition(i,this.options.positionAttributeName),this.addIndices(l,!1)}}]),e}(c.default));e.default=f,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(3),c=i(u),l=n(6),h=i(l),d=n(5),f=i(d),p=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2],s=arguments[3];r(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,s));return n=n||{},a.options={subdivision:n.subdivision||1,radius:n.radius||1,positionAttributeName:n.positionAttributeName||"aPosition"},a.icosphere(),a}return s(e,t),a(e,[{key:"icosphere",value:function(){var t=[],e=[],n=1,i=(1+Math.sqrt(5))/2*n;this.positions=[],this.addVertex([-1*n,i,0],t),this.addVertex([1*n,i,0],t),this.addVertex([-1*n,-i,0],t),this.addVertex([1*n,-i,0],t),this.addVertex([0,-1*n,i],t),this.addVertex([0,1*n,i],t),this.addVertex([0,-1*n,-i],t),this.addVertex([0,1*n,-i],t),this.addVertex([i,0,-1*n],t),this.addVertex([i,0,1*n],t),this.addVertex([-i,0,-1*n],t),this.addVertex([-i,0,1*n],t),e.push([0,11,5]),e.push([0,5,1]),e.push([0,1,7]),e.push([0,7,10]),e.push([0,10,11]),e.push([1,5,9]),e.push([5,11,4]),e.push([11,10,2]),e.push([10,7,6]),e.push([7,1,8]),e.push([3,9,4]),e.push([3,4,2]),e.push([3,2,6]),e.push([3,6,8]),e.push([3,8,9]),e.push([4,9,5]),e.push([2,4,11]),e.push([6,2,10]),e.push([8,6,7]),e.push([9,8,1]),e=f.default.multiplyTriangles(this.options.subdivision,e,t);for(var r=h.default.separate(e,t),o=r.vertices,s=r.faces,a=[],u=0;u<o.length;u++){var c=o[u];c[0]*=this.options.radius,c[1]*=this.options.radius,c[2]*=this.options.radius,a.push(c[0],c[1],c[2])}this.addPosition(a,this.options.positionAttributeName),this.addIndices(s,!1)}},{key:"addVertex",value:function(t,e){var n=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);e.push([t[0]/n,t[1]/n,t[2]/n])}},{key:"render",value:function(){}}]),e}(c.default);e.default=p,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(3),c=i(u),l=[],h=[],d=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4;r(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,s));return n.length<=0&&(n=[[0,0,0],[.5,1.25,0],[.25,1,0],[0,1,0],[-.5,1.1,0],[-.35,1.5,0]]),a.positions=[],a.directions=[],a.indicesArray=[],a.counters=[],a.width=[],a.uvs=[],a.previous=[],a.next=[],a.points=n,a.line(),a}return s(e,t),a(e,[{key:"line",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.points;this.positions.length=2*e.length,this.counters.length=2*e.length;var n=0,i=0;this.previous.length=this.positions.length,this.next.length=this.positions.length;for(var r=0;r<e.length;r++){if(t){var o=r/e.length;this.counters[i++]=[o],this.counters[i++]=[o]}this.positions[n++]=e[r][0],this.positions[n++]=e[r][1],this.positions[n++]=e[r][2],this.positions[n++]=e[r][0],this.positions[n++]=e[r][1],this.positions[n++]=e[r][2]}this.process(t)}},{key:"compareV3",value:function(t,e){var n=6*t,i=6*e;return this.positions[n]===this.positions[i]&&this.positions[n+1]===this.positions[i+1]&&this.positions[n+2]===this.positions[i+2]}},{key:"copyV3",value:function(t,e){e||(e=l);var n=6*t;e[0]=this.positions[n],e[1]=this.positions[n+1],e[2]=this.positions[n+2]}},{key:"process",value:function(t){var e=this.positions.length/6,n=0,i=0;this.compareV3(0,e-1)?this.copyV3(e-2):this.copyV3(0),this.previous[n++]=l[0],this.previous[n++]=l[1],this.previous[n++]=l[2],this.previous[n++]=l[0],this.previous[n++]=l[1],this.previous[n++]=l[2];for(var r=0;r<e;r++)this.copyV3(r,l),r>0&&(this.next[i++]=l[0],this.next[i++]=l[1],this.next[i++]=l[2],this.next[i++]=l[0],this.next[i++]=l[1],this.next[i++]=l[2],this.previous[n++]=h[0],this.previous[n++]=h[1],this.previous[n++]=h[2],this.previous[n++]=h[0],this.previous[n++]=h[1],this.previous[n++]=h[2]),h[0]=l[0],h[1]=l[1],h[2]=l[2];if(this.compareV3(e-1,0)?this.copyV3(1,l):this.copyV3(e-1,l),this.next[i++]=l[0],this.next[i++]=l[1],this.next[i++]=l[2],this.next[i++]=l[0],this.next[i++]=l[1],this.next[i++]=l[2],n=0,this.addPosition(this.positions,"position"),this.addAttribute(this.next,"aNext"),this.addAttribute(this.previous,"aPrevious"),t){n=0,this.uvs=[];for(var o=void 0,s=0;s<e;s++)o=this.widthCallback?this.widthCallback(s/(e-1)):.1,this.width[n++]=o,this.width[n++]=o,this.uvs.push(s/(e-1),0),this.uvs.push(s/(e-1),1);n=0,this.indicesArray=[];for(var a=0;a<e-1;a++){var u=2*a;this.indicesArray[n++]=u,this.indicesArray[n++]=u+1,this.indicesArray[n++]=u+2,this.indicesArray[n++]=u+2,this.indicesArray[n++]=u+1,this.indicesArray[n++]=u+3}n=0,this.directions=[];for(var c=0;c<this.positions.length;c++)c%2===0?this.directions[n++]=1:this.directions[n++]=-1;this.addIndices(this.indicesArray,!1),this.addAttribute(this.directions,"direction",1),this.addAttribute(this.uvs,"aUv",2),this.addAttribute(this.counters,"aCounters",1)}}},{key:"update",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.points=t||this.points,this.line(e)}}]),e}(c.default);e.default=d,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);
}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(3),c=i(u),l=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4;r(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,s));return n=n||{},a.options={w:n.w||1,h:n.h||1,d:n.d||1,axis:n.axis||"xy",positionAttributeName:n.positionAttributeName||"aPosition",subdivision:n.subdivision||10},a.pivotX=-a.options.w/2,a.pivotY=-a.options.h/2,a.plane(a.options.w,a.options.h,a.options.subdivision,a.options.axis),a}return s(e,t),a(e,[{key:"plane",value:function(t,e,n,i){for(var r=[],o=[],s=0,a=void 0,u=void 0,c=void 0,l=0;l<n;l++){u=l/n;for(var h=0;h<n;h++)c=h/n,a=this.getPos(l,h),r.push(a[0],a[1],a[2]),a=this.getPos(l+1,h),r.push(a[0],a[1],a[2]),a=this.getPos(l+1,h+1),r.push(a[0],a[1],a[2]),a=this.getPos(l,h+1),r.push(a[0],a[1],a[2]),o.push(4*s+0),o.push(4*s+1),o.push(4*s+2),o.push(4*s+0),o.push(4*s+2),o.push(4*s+3),s++,this.uvs.push(u,c,u,c,u,c,u,c)}this.addPosition(r,this.options.positionAttributeName),this.addIndices(o,!1)}},{key:"getPos",value:function(t,e){var n=this.options.w/this.options.subdivision*t+this.pivotX,i=this.options.h/this.options.subdivision*e+this.pivotY,r=0;return"xy"===this.options.axis?[n,i,r]:[n,0,i]}}]),e}(c.default);e.default=l,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),u=i(a),c=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4;r(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,s));n=n||{};var u=new Float32Array(new Float32Array([-1,-1,0,-1,1,0,1,1,0,1,-1,0]));return a.addPosition(u,n.positionAttributeName||"aPosition"),a.addIndices([0,1,2,0,2,3]),a.uvs=[1,0,1,1,0,1,0,0],a}return s(e,t),e}(u.default);e.default=c,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(3),c=i(u),l=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2],s=arguments[3];r(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,s));return n=n||{},a.options={nbVert:n.nbVert||10,radius:n.radius||1,positionAttributeName:n.positionAttributeName||"aPosition"},a.sphere(),a}return s(e,t),a(e,[{key:"sphere",value:function(){for(var t=[],e=[],n=0,i=[],r=1/this.options.nbVert,o=void 0,s=0;s<this.options.nbVert;s++)for(var a=0;a<this.options.nbVert;a++){o=this.getAngle(s,a),t.push(o[0],o[1],o[2]),o=this.getAngle(s+1,a),t.push(o[0],o[1],o[2]),o=this.getAngle(s+1,a+1),t.push(o[0],o[1],o[2]),o=this.getAngle(s,a+1),t.push(o[0],o[1],o[2]);var u=a/this.options.nbVert,c=s/this.options.nbVert;i.push(1-u,c),i.push(1-u,c+r),i.push(1-u-r,c+r),i.push(1-u-r,c),e.push(4*n+0),e.push(4*n+1),e.push(4*n+2),e.push(4*n+0),e.push(4*n+2),e.push(4*n+3),n++}this.uvs=i,this.addPosition(t,this.options.positionAttributeName),this.addIndices(e,!1)}},{key:"getAngle",value:function(t,e){var n=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],e/this.options.nbVert*Math.PI*2-Math.PI),i=t/this.options.nbVert*Math.PI-.5*Math.PI,r=this.options.radius,o=[];o[1]=Math.sin(i)*r;var s=Math.cos(i)*r;return o[0]=Math.cos(n)*s,o[2]=Math.sin(n)*s,[o[0],o[1],o[2]]}},{key:"render",value:function(){}}]),e}(c.default);e.default=l,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(3),c=i(u),l=n(13),h=i(l),d=n(4),f=i(d),p=n(75),v=i(p),_=n(76),m=i(_),g=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:25;r(this,e);var n=new h.default(v.default,m.default,{color:{type:"vec3",value:[1,1,1]},opacity:{type:"float",value:.6}}),i=new f.default(POLY.gl);i.depthTest=!0;for(var s=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i,0)),a=0,u=[],c=[],l=-t;l<t;l++)for(var d=-t;d<t;d++)u.push(l,d,0),c.push(a),a++,u.push(l,0,d),c.push(a),a++;return s.addPosition(u,"aPosition"),s.addIndices(c),s}return s(e,t),a(e,[{key:"draw",value:function(){this.program.bind(),POLY.GL.draw(this)}}]),e}(c.default);e.default=g,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(53),o=i(r);e.default={BatchPlanes:o.default},t.exports=e.default},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(){var e=this,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n(this,t),this._req=new XMLHttpRequest,this._req.addEventListener("load",function(t){return e._onLoaded(t)}),this._req.addEventListener("progress",function(t){return e._onProgress(t)}),i&&(this._req.responseType="arraybuffer")}return i(t,[{key:"load",value:function(t,e){console.log("Loading : ",t),this._callback=e,this._req.open("GET",t),this._req.send()}},{key:"_onLoaded",value:function(){this._callback(this._req.response)}},{key:"_onProgress",value:function(){}}]),t}();e.default=r,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;if(void 0!==s)return s.call(i)},c=n(55),l=i(c),h=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),a(e,[{key:"load",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;this._drawType=i,u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"load",this).call(this,t,n)}},{key:"_onLoaded",value:function(){this.parseObj(this._req.response)}},{key:"parseObj",value:function(t){function e(t){var e=parseInt(t);return 3*(e>=0?e-1:e+d.length/3)}function n(t){var e=parseInt(t);return 3*(e>=0?e-1:e+f.length/3)}function i(t){var e=parseInt(t);return 2*(e>=0?e-1:e+p.length/2)}function r(t,e,n){c.push(d[t],d[t+1],d[t+2]),c.push(d[e],d[e+1],d[e+2]),c.push(d[n],d[n+1],d[n+2]),v.push(3*_+0),v.push(3*_+1),v.push(3*_+2),_++}function o(t,e,n){l.push(p[t],p[t+1]),l.push(p[e],p[e+1]),l.push(p[n],p[n+1])}function s(t,e,n){h.push(f[t],f[t+1],f[t+2]),h.push(f[e],f[e+1],f[e+2]),h.push(f[n],f[n+1],f[n+2])}function a(t,a,u,c,l,h,d,f,p,v,_,m){var g=e(t),b=e(a),y=e(u),x=void 0;void 0===c?r(g,b,y):(x=e(c),r(g,b,x),r(b,y,x)),void 0!==l&&(g=i(l),b=i(h),y=i(d),void 0===c?o(g,b,y):(x=i(f),o(g,b,x),o(b,y,x))),void 0!==p&&(g=n(p),b=n(v),y=n(_),void 0===c?s(g,b,y):(x=n(m),s(g,b,x),s(b,y,x)))}for(var u=t.split("\n"),c=[],l=[],h=[],d=[],f=[],p=[],v=[],_=0,m=void 0,g=/v( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,b=/vn( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,y=/vt( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,x=/f( +-?\d+)( +-?\d+)( +-?\d+)( +-?\d+)?/,w=/f( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))?/,E=/f( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))?/,M=/f( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))?/,T=0;T<u.length;T++){var O=u[T];O=O.trim(),0!==O.length&&"#"!==O.charAt(0)&&(null!==(m=g.exec(O))?d.push(parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3])):null!==(m=b.exec(O))?f.push(parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3])):null!==(m=y.exec(O))?p.push(parseFloat(m[1]),parseFloat(m[2])):null!==(m=x.exec(O))?a(m[1],m[2],m[3],m[4]):null!==(m=w.exec(O))?a(m[2],m[5],m[8],m[11],m[3],m[6],m[9],m[12]):null!==(m=E.exec(O))?a(m[2],m[6],m[10],m[14],m[3],m[7],m[11],m[15],m[4],m[8],m[12],m[16]):null!==(m=M.exec(O))&&a(m[2],m[5],m[8],m[11],void 0,void 0,void 0,void 0,m[3],m[6],m[9],m[12]))}return this._generateMeshes({positions:c,coords:l,normals:h,indices:v})}},{key:"_generateMeshes",value:function(t){var e=65535,n=t.normals.length>0,i=t.coords.length>0;if(t.positions.length>e){var r=[],o=0,s={};for(s.positions=t.positions.concat(),s.coords=t.coords.concat(),s.indices=t.indices.concat(),s.normals=t.normals.concat();t.indices.length>0;){for(var a=Math.min(e,t.positions.length),u=t.indices.splice(0,a),c=[],l=[],h=[],d=void 0,f=0,p=0;p<u.length;p++)u[p]>f&&(f=u[p]),d=u[p],c.push(s.positions[d]),i&&l.push(s.coords[d]),n&&h.push(s.normals[d]),u[p]-=o;o=f+1,console.log("here1",u,c)}return this._callback&&this._callback(r,s),r}return console.log("here1",t),this._callback,t}}]),e}(l.default);h.parse=function(t){var e=new h;return e.parseObj(t)},e.default=h,t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(56),o=i(r);e.default={OBJLoader:o.default},t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(7),a=i(s),u=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:256,o=arguments[3];r(this,t),this.gl=POLY.gl;var s=this.gl;o=o||s.RGBA;a.default.getExtension("OES_texture_float");if(!a.default.getExtension("OES_texture_float"))throw new Error("float textures not supported");var u=(a.default.getExtension("OES_texture_half_float"),s.UNSIGNED_BYTE),c=a.default.getExtension("OES_texture_half_float");a.default.getExtension("OES_texture_float_linear"),a.default.checkExtension("OES_texture_float")?u=s.FLOAT:c&&(u=c.HALF_FLOAT_OES),console.log(u,s.FLOAT),this._texture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this._texture);var l=1;s.pixelStorei(s.UNPACK_ALIGNMENT,l),s.texImage2D(s.TEXTURE_2D,0,o,n,i,0,o,u,e),POLY.utils.isPowerOfTwo(n)&&POLY.utils.isPowerOfTwo(i),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.NEAREST),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.NEAREST),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE)}return o(t,[{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.gl;e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this._texture)}}]),t}();e.default=u,t.exports=e.default},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e,i){n(this,t),this.gl=POLY.gl;var r=this.gl;i?this._texture=e:(this._texture=r.createTexture(),this.image=new Image,this.image.src=e,this.image.addEventListener("load",this.onImageLoaded.bind(this,this.image)))}return i(t,[{key:"onImageLoaded",value:function(t){var e=this.gl;e.getExtension("OES_texture_float");e.bindTexture(e.TEXTURE_2D,this._texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.FLOAT,t),POLY.utils.isPowerOfTwo(t.width)&&POLY.utils.isPowerOfTwo(t.height)&&e.generateMipmap(e.TEXTURE_2D),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.bindTexture(e.TEXTURE_2D,null)}},{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.gl;e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this._texture)}}]),t}();e.default=r,t.exports=e.default},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e.default=new(function(){function t(){n(this,t),this._loops=[],this._idLoop=1,this._active=!1}return i(t,[{key:"add",value:function(t,e){var n=this._idLoop;return this._loops.push({func:t,id:n,scope:e}),this._active||(window.requestAnimationFrame(this._update.bind(this)),this.start()),n}},{key:"clear",value:function(){this._loops=[],this.stop()}},{key:"start",value:function(){this._active=!0}},{key:"stop",value:function(){this._active=!1}},{key:"_update",value:function(){if(this._active)if(window.requestAnimationFrame(this._update.bind(this)),this._loops.length>0)for(var t=0;t<this._loops.length;t++)this._loops[t].func(this._loops[t]);else this.stop()}}]),t}()),t.exports=e.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.FacesMultiplicator=e.FacesSeparator=e.isPowerOfTwo=e.loop=void 0;var r=n(60),o=i(r),s=n(62),a=i(s),u=n(6),c=i(u),l=n(5),h=i(l);e.loop=o.default,e.isPowerOfTwo=a.default,e.FacesSeparator=c.default,e.FacesMultiplicator=h.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return!(t&t-1)};e.default=n,t.exports=e.default},function(t,e,n){"use strict";function i(t,e){a.call(this),e=e||u,this.baseUrl=t||"",this.progress=0,this.loading=!1,this._progressChunk=0,this._beforeMiddleware=[],this._afterMiddleware=[],this._boundLoadResource=this._loadResource.bind(this),this._buffer=[],this._numToLoad=0,this._queue=o.queue(this._boundLoadResource,e),this.resources={}}var r=n(12),o=n(16),s=n(8),a=n(11),u=10,c=100;i.prototype=Object.create(a.prototype),i.prototype.constructor=i,t.exports=i,i.prototype.add=i.prototype.enqueue=function(t,e,n,i){if(Array.isArray(t)){for(var r=0;r<t.length;++r)this.add(t[r]);return this}if("object"==typeof t&&(i=e||t.callback||t.onComplete,n=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(i=n,n=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof n&&(i=n,n=null),this.resources[t])throw new Error('Resource with name "'+t+'" already exists.');return e=this._prepareUrl(e),this.resources[t]=new s(t,e,n),"function"==typeof i&&this.resources[t].once("afterMiddleware",i),this._numToLoad++,this._queue.started?(this._queue.push(this.resources[t]),this._progressChunk=(c-this.progress)/(this._queue.length()+this._queue.running())):(this._buffer.push(this.resources[t]),this._progressChunk=c/this._buffer.length),this},i.prototype.before=i.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},i.prototype.after=i.prototype.use=function(t){return this._afterMiddleware.push(t),this},i.prototype.reset=function(){this.progress=0,this.loading=!1,this._progressChunk=0,this._buffer.length=0,this._numToLoad=0,this._queue.kill(),this._queue.started=!1;for(var t in this.resources){var e=this.resources[t];e.off("complete",this._onLoad,this),e.isLoading&&e.abort()}return this.resources={},this},i.prototype.load=function(t){if("function"==typeof t&&this.once("complete",t),this._queue.started)return this;this.emit("start",this),this.loading=!0;for(var e=0;e<this._buffer.length;++e)this._queue.push(this._buffer[e]);return this._buffer.length=0,this},i.prototype._prepareUrl=function(t){var e=r(t,{strictMode:!0});return e.protocol||!e.path||0===e.path.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t},i.prototype._loadResource=function(t,e){var n=this;t._dequeue=e,o.eachSeries(this._beforeMiddleware,function(e,i){e.call(n,t,function(){i(t.isComplete?{}:null)})},function(){t.isComplete?n._onLoad(t):(t.once("complete",n._onLoad,n),t.load())})},i.prototype._onComplete=function(){this.loading=!1,this.emit("complete",this,this.resources)},i.prototype._onLoad=function(t){var e=this;o.eachSeries(this._afterMiddleware,function(n,i){n.call(e,t,i)},function(){t.emit("afterMiddleware",t),e._numToLoad--,e.progress+=e._progressChunk,e.emit("progress",e,t),t.error?e.emit("error",t.error,e,t):e.emit("load",e,t),0===e._numToLoad&&(e.progress=100,e._onComplete())}),t._dequeue()},i.LOAD_TYPE=s.LOAD_TYPE,i.XHR_RESPONSE_TYPE=s.XHR_RESPONSE_TYPE},function(t,e){"use strict";t.exports={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encodeBinary:function(t){for(var e,n="",i=new Array(4),r=0,o=0,s=0;r<t.length;){for(e=new Array(3),o=0;o<e.length;o++)r<t.length?e[o]=255&t.charCodeAt(r++):e[o]=0;switch(i[0]=e[0]>>2,i[1]=(3&e[0])<<4|e[1]>>4,i[2]=(15&e[1])<<2|e[2]>>6,i[3]=63&e[2],s=r-(t.length-1)){case 2:i[3]=64,i[2]=64;break;case 1:i[3]=64}for(o=0;o<i.length;o++)n+=this._keyStr.charAt(i[o])}return n}}},function(t,e,n){"use strict";t.exports=n(63),t.exports.Resource=n(8),t.exports.middleware={caching:{memory:n(66)},parsing:{blob:n(67)}},t.exports.async=n(16)},function(t,e){"use strict";var n={};t.exports=function(){return function(t,e){n[t.url]?(t.data=n[t.url],t.complete()):t.once("complete",function(){n[this.url]=this.data}),e()}}},function(t,e,n){"use strict";var i=n(8),r=n(64),o=window.URL||window.webkitURL;t.exports=function(){return function(t,e){if(!t.data)return void e();if(t.xhr&&t.xhrType===i.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var n=o.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=n,t.isImage=!0,void(t.data.onload=function(){o.revokeObjectURL(n),t.data.onload=null,e()})}}else{var s=t.xhr.getResponseHeader("content-type");if(s&&0===s.indexOf("image"))return t.data=new Image,t.data.src="data:"+s+";base64,"+r.encodeBinary(t.xhr.responseText),t.isImage=!0,void(t.data.onload=function(){t.data.onload=null,e()})}e()}}},function(t,e,n){var i;/** @license
	 * JS Signals <http://millermedeiros.github.com/js-signals/>
	 * Released under the MIT license
	 * Author: Miller Medeiros
	 * Version: 1.0.0 - Build: 268 (2012/11/29 05:48 PM)
	 */
!function(r){function o(t,e,n,i,r){this._listener=e,this._isOnce=n,this.context=i,this._signal=t,this._priority=r||0}function s(t,e){if("function"!=typeof t)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",e))}function a(){this._bindings=[],this._prevParams=null;var t=this;this.dispatch=function(){a.prototype.dispatch.apply(t,arguments)}}o.prototype={active:!0,params:null,execute:function(t){var e,n;return this.active&&this._listener&&(n=this.params?this.params.concat(t):t,e=this._listener.apply(this.context,n),this._isOnce&&this.detach()),e},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},a.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(t,e,n,i){var r,s=this._indexOfListener(t,n);if(s!==-1){if(r=this._bindings[s],r.isOnce()!==e)throw new Error("You cannot add"+(e?"":"Once")+"() then add"+(e?"Once":"")+"() the same listener without removing the relationship first.")}else r=new o(this,t,e,n,i),this._addBinding(r);return this.memorize&&this._prevParams&&r.execute(this._prevParams),r},_addBinding:function(t){var e=this._bindings.length;do--e;while(this._bindings[e]&&t._priority<=this._bindings[e]._priority);this._bindings.splice(e+1,0,t)},_indexOfListener:function(t,e){for(var n,i=this._bindings.length;i--;)if(n=this._bindings[i],n._listener===t&&n.context===e)return i;return-1},has:function(t,e){return this._indexOfListener(t,e)!==-1},add:function(t,e,n){return s(t,"add"),this._registerListener(t,!1,e,n)},addOnce:function(t,e,n){return s(t,"addOnce"),this._registerListener(t,!0,e,n)},remove:function(t,e){s(t,"remove");var n=this._indexOfListener(t,e);return n!==-1&&(this._bindings[n]._destroy(),this._bindings.splice(n,1)),t},removeAll:function(){for(var t=this._bindings.length;t--;)this._bindings[t]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(t){if(this.active){var e,n=Array.prototype.slice.call(arguments),i=this._bindings.length;if(this.memorize&&(this._prevParams=n),i){e=this._bindings.slice(),this._shouldPropagate=!0;do i--;while(e[i]&&this._shouldPropagate&&e[i].execute(n)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var u=a;u.Signal=a,i=function(){return u}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))}(this)},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e,n){(function(t,i){function r(t,n){var i={seen:[],stylize:s};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),v(n)?i.showHidden=n:n&&e._extend(i,n),x(i.showHidden)&&(i.showHidden=!1),x(i.depth)&&(i.depth=2),x(i.colors)&&(i.colors=!1),x(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=o),u(i,t,i.depth)}function o(t,e){var n=r.styles[e];return n?"["+r.colors[n][0]+"m"+t+"["+r.colors[n][1]+"m":t}function s(t,e){return t}function a(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function u(t,n,i){if(t.customInspect&&n&&O(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var r=n.inspect(i,t);return b(r)||(r=u(t,r,i)),r}var o=c(t,n);if(o)return o;var s=Object.keys(n),v=a(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(n)),T(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return l(n);if(0===s.length){if(O(n)){var _=n.name?": "+n.name:"";return t.stylize("[Function"+_+"]","special")}if(w(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(M(n))return t.stylize(Date.prototype.toString.call(n),"date");if(T(n))return l(n)}var m="",g=!1,y=["{","}"];if(p(n)&&(g=!0,y=["[","]"]),O(n)){var x=n.name?": "+n.name:"";m=" [Function"+x+"]"}if(w(n)&&(m=" "+RegExp.prototype.toString.call(n)),M(n)&&(m=" "+Date.prototype.toUTCString.call(n)),T(n)&&(m=" "+l(n)),0===s.length&&(!g||0==n.length))return y[0]+m+y[1];if(i<0)return w(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var E;return E=g?h(t,n,i,v,s):s.map(function(e){return d(t,n,i,v,e,g)}),t.seen.pop(),f(E,m,y)}function c(t,e){if(x(e))return t.stylize("undefined","undefined");if(b(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return g(e)?t.stylize(""+e,"number"):v(e)?t.stylize(""+e,"boolean"):_(e)?t.stylize("null","null"):void 0}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,i,r){for(var o=[],s=0,a=e.length;s<a;++s)R(e,String(s))?o.push(d(t,e,n,i,String(s),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(d(t,e,n,i,r,!0))}),o}function d(t,e,n,i,r,o){var s,a,c;if(c=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]},c.get?a=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),R(i,r)||(s="["+r+"]"),a||(t.seen.indexOf(c.value)<0?(a=_(n)?u(t,c.value,null):u(t,c.value,n-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),x(s)){if(o&&r.match(/^\d+$/))return a;s=JSON.stringify(""+r),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function f(t,e,n){var i=0,r=t.reduce(function(t,e){return i++,e.indexOf("\n")>=0&&i++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return r>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function p(t){return Array.isArray(t)}function v(t){return"boolean"==typeof t}function _(t){return null===t}function m(t){return null==t}function g(t){return"number"==typeof t}function b(t){return"string"==typeof t}function y(t){return"symbol"==typeof t}function x(t){return void 0===t}function w(t){return E(t)&&"[object RegExp]"===A(t)}function E(t){return"object"==typeof t&&null!==t}function M(t){return E(t)&&"[object Date]"===A(t)}function T(t){return E(t)&&("[object Error]"===A(t)||t instanceof Error)}function O(t){return"function"==typeof t}function P(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function A(t){return Object.prototype.toString.call(t)}function S(t){return t<10?"0"+t.toString(10):t.toString(10)}function L(){var t=new Date,e=[S(t.getHours()),S(t.getMinutes()),S(t.getSeconds())].join(":");return[t.getDate(),j[t.getMonth()],e].join(" ")}function R(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var C=/%[sdj%]/g;e.format=function(t){if(!b(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(r(arguments[n]));return e.join(" ")}for(var n=1,i=arguments,o=i.length,s=String(t).replace(C,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return t}}),a=i[n];n<o;a=i[++n])s+=_(a)||!E(a)?" "+a:" "+r(a);return s},e.deprecate=function(n,r){function o(){if(!s){if(i.throwDeprecation)throw new Error(r);i.traceDeprecation?console.trace(r):console.error(r),s=!0}return n.apply(this,arguments)}if(x(t.process))return function(){return e.deprecate(n,r).apply(this,arguments)};if(i.noDeprecation===!0)return n;var s=!1;return o};var k,N={};e.debuglog=function(t){if(x(k)&&(k=i.env.NODE_DEBUG||""),t=t.toUpperCase(),!N[t])if(new RegExp("\\b"+t+"\\b","i").test(k)){var n=i.pid;N[t]=function(){var i=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,i)}}else N[t]=function(){};return N[t]},e.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=v,e.isNull=_,e.isNullOrUndefined=m,e.isNumber=g,e.isString=b,e.isSymbol=y,e.isUndefined=x,e.isRegExp=w,e.isObject=E,e.isDate=M,e.isError=T,e.isFunction=O,e.isPrimitive=P,e.isBuffer=n(70);var j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",L(),e.format.apply(e,arguments))},e.inherits=n(69),e._extend=function(t,e){if(!e||!E(e))return t;for(var n=Object.keys(e),i=n.length;i--;)t[n[i]]=e[n[i]];return t}}).call(e,function(){return this}(),n(15))},function(t,e){t.exports={default:["image/./dudvmap.png","image/./gradient-map.jpg","image/./noise.jpg","image/./pyramid-top.jpg","image/./sky_gradient.jpg","image/./sky_gradient2.jpg","image/./sky_gradient3.jpg","image/./sky_gradient4.jpg","image/./sky_gradient5.jpg","image/./sky_gradient6.jpg","image/./test1.png","image/./test2.png","image/./texture-monolyth.jpg","image/./wood.jpg"]}},function(t,e){t.exports="precision highp float;\n\nvoid main(void) {\n    gl_FragColor = vec4(1.0);\n}\n"},function(t,e){t.exports="precision highp float;\n\nattribute vec3 aPosition;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\n\nvoid main(void) {\n    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(aPosition, 1.0);\n    gl_PointSize = 1.0;\n}\n"},74,function(t,e){t.exports="precision mediump float;\n\nuniform vec3 color;\nuniform float opacity;\n\nvoid main(void) {\n    gl_FragColor = vec4(vec3(1., .2, 1.), opacity);\n    gl_FragColor.rgb *= opacity;\n}\n"},function(t,e){t.exports="\nprecision highp float;\n\nvarying vec2 vUv;\nuniform sampler2D texture;\nuniform sampler2D gradientMap;\n\nfloat luma(vec3 color) {\n  return dot(color, vec3(0.299, 0.587, 0.114));\n}\n\n\nvoid main(void)\n{\n    // vec4 color = texture2D(gradientMap, vUv);\n    vec4 color = texture2D(texture, vUv);\n\n    float br = 1.0 - luma(color.rgb);\n    vec2 uvGrad = vec2(br, 0.5);\n    vec3 colorGrad = texture2D(gradientMap, uvGrad).rgb;\n    color.rgb = mix(color.rgb, colorGrad, .5);\n\n    gl_FragColor = vec4(color.rgb, 1.);\n}\n"},function(t,e){t.exports="\nattribute vec3 aPosition;\nattribute vec2 aUv;\n\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\n\nvarying vec3 vPos;\nvarying vec3 vNormal;\nvarying vec2 vUv;\n\n\nvoid main(void) {\n\tvPos = aPosition;\n\tvUv = aUv;\n    gl_Position =  vec4(aPosition, 1.0);\n}\n"},function(t,e){t.exports="\nprecision highp float;\n\nvarying vec2 vUv;\nuniform sampler2D texture;\n\nvoid main(void)\n{\n    // vec4 color = texture2D(texture, vUv);\n    // gl_FragColor = vec4(1.);\n    // gl_FragColor = vec4(.2);\n    gl_FragColor = texture2D(texture, vUv);\n}\n"},function(t,e){t.exports="\nattribute vec2 aPosition;\n\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\n\nvarying vec2 vUv;\n\n\nvoid main(void) {\n\tvUv = aPosition * .5 + .5;\n\n\tvec3 pos = vec4( projectionMatrix * vec4(aPosition, .0, 1.)).rgb;\n\n    gl_Position =  vec4(aPosition, 0., 1.0);\n    // gl_Position =  vec4(pos, 1.0);\n}\n"},function(t,e){t.exports="\nprecision highp float;\n\nvarying vec2 vUv;\nuniform sampler2D texture;\n\nvoid main(void)\n{\n    vec4 color = texture2D(texture, vUv);\n    gl_FragColor = vec4(1.);\n    gl_FragColor = vec4(color.rgb, 1.);\n}\n"},function(t,e){t.exports="\nattribute vec3 aPosition;\nattribute vec2 aUv;\n\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\n\nvarying vec3 vPos;\nvarying vec3 vNormal;\nvarying vec2 vUv;\n\n\nvoid main(void) {\n\tvPos = aPosition;\n\tvUv = aUv;\n\tvec4 pos = projectionMatrix * viewMatrix * modelMatrix * vec4(aPosition, 1.0);\n    gl_Position =  pos;\n    // gl_Position =  vec4(pos.xyz, 1.0);\n}\n"},function(t,e){t.exports="\nprecision highp float;\n\nuniform float clipY;\nuniform float dir; // -1 or 1\n\nvarying vec4 vPos;\nvarying vec3 vWsPosition;\n\nvarying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vLighting;\nuniform sampler2D texture;\nuniform sampler2D gradientMap;\n\nfloat luma(vec3 color) {\n  return dot(color, vec3(0.299, 0.587, 0.114));\n}\n\n\nvoid main(void)\n{\n    if(vWsPosition.y  * dir > clipY * dir)\n    {\n        discard;\n    }\n\n\n    vec4 color = texture2D(texture, vUv);\n\n    float br = 1.0 - luma(color.rgb);\n    vec2 uvGrad = vec2(br, 0.5);\n    vec3 colorGrad = texture2D(gradientMap, uvGrad).rgb;\n    color.rgb = mix(color.rgb, colorGrad, .3);\n    // color += vec4(1.) * vec4(vNormal, 1.);\n    // vec4 color = vec4(vNormal, 1.);\n    gl_FragColor = vec4(color.rgb * vLighting * 1.5, 1.);\n}\n"},function(t,e){t.exports="\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aUv;\n\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\n\n\nuniform vec3 ambientLight;\nuniform vec3 directionalLightColor;\nuniform vec3 directionalVector;\n\n\nvarying vec3 vLighting;\n// varying vec3 vPos;\nvarying vec4 vPos;\nvarying vec3 vWsPosition;\nvarying vec3 vNormal;\nvarying vec2 vUv;\n\n\nvoid main(void) {\n\tvUv = aUv;\n\tvNormal = aNormal;\n\tvWsPosition\t= vec4(modelMatrix * vec4(aPosition, 1.0)).xyz;\n\n\tvPos = projectionMatrix * viewMatrix * modelMatrix * vec4(aPosition, 1.0);\n    gl_Position =  vPos;\n\n\tfloat directional = max(dot(aNormal, directionalVector), 0.0);\n\tvLighting = ambientLight + (directionalLightColor * directional);\n}\n"},function(t,e){t.exports="\nprecision highp float;\n\nuniform float clipY;\nuniform float dir; // -1 or 1\n\n\nvarying vec3 vWsPosition;\nvarying vec2 vUv;\nuniform sampler2D texture;\nuniform sampler2D gradientMap;\n\nfloat luma(vec3 color) {\n  return dot(color, vec3(0.299, 0.587, 0.114));\n}\n\nvoid main(void)\n{\n\n    if(vWsPosition.y  * dir > clipY * dir)\n    {\n        discard;\n    }\n\n    // vec4 color = vec4(0.);\n    vec4 color = texture2D(texture, vUv);\n\n    float br = 1.0 - luma(color.rgb);\n    vec2 uvGrad = vec2(br, 0.5);\n    vec3 colorGrad = texture2D(gradientMap, uvGrad).rgb;\n    color.rgb = mix(color.rgb, colorGrad, .5);\n\n    gl_FragColor = vec4(color.rgb, 1.);\n}\n"},function(t,e){t.exports="precision highp float;\n\nattribute vec3 aPosition;\nattribute vec2 aUv;\n\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\n\nvarying vec3 vPos;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vWsPosition;\n\n\n\nvoid main(void) {\n    vUv = aUv;\n    vPos = aPosition;\n    vWsPosition\t= vec4(modelMatrix * vec4(aPosition, 1.0)).xyz;\n    gl_Position =  projectionMatrix * viewMatrix * modelMatrix * vec4(aPosition, 1.0);\n}\n"},function(t,e){t.exports="precision highp float;\n\nuniform float clipY;\nuniform float dir; // -1 or 1\nuniform sampler2D gradientMap; // -1 or 1\n\nvarying vec3 vWsPosition;\nvarying vec2 vUv;\nvarying vec3 vPos;\nvarying vec3 vNormal;\nvarying float visibility;\n\n// uniform sampler2D texture;\n\nfloat luma(vec3 color) {\n  return dot(color, vec3(0.299, 0.587, 0.114));\n}\n\nfloat diffuse(vec3 N, vec3 L) {\n\treturn max(dot(N, normalize(L)), 0.0);\n}\n\n\nvec3 diffuse(vec3 N, vec3 L, vec3 C) {\n\treturn diffuse(N, L) * C;\n}\n\n\n#define fade 1.0\n#define LIGHT_YELLOW vec3(fade, fade, -fade)\n#define LIGHT_BLUE vec3(50.0, -fade, 0.0)\n\n#define LIGHT0 vec3(.5, 1.0, .8)\n#define LIGHT1 vec3(1., 0.5, 1.5)\n\n#define SKY_COLOR vec3(27./255., 27./255., 27./255.)\n\nvoid main(void)\n{\n\tif(vWsPosition.y  * dir > clipY * dir)\n    {\n        discard;\n    }\n\n    vec3 color1 = vec3(24./255.0, 24./255., 24./255.);\n    vec3 color2 = vec3(44./255.0, 42./255., 40./255.);\n    vec3 d0 = diffuse(vNormal, LIGHT0, color1) * 1.5;\n    vec3 d1 = diffuse(vNormal, LIGHT1, color2) * 1.5;\n\n    // vec3 color = vec3(visibility);\n    vec3 color = vec3(d0 + d1);\n\tcolor = mix(SKY_COLOR, color, visibility);\n\n\tfloat br = 1.0 - luma(color);\n    vec2 uvGrad = vec2(br, 0.5);\n    vec3 colorGrad = texture2D(gradientMap, uvGrad).rgb;\n    color.rgb = mix(color.rgb, colorGrad, .5);\n\n\n    gl_FragColor = vec4(color,1);\n}\n"},function(t,e){t.exports="attribute vec3 aPosition;\nattribute vec3 aNormal;\n\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\n\nuniform float gradient;\nuniform float density;\n\nvarying vec3 vPos;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vWsPosition;\nvarying float visibility;\n\n\nvoid main(void) {\n\n    // float density = .22;\n    // float gradient = 10.;\n\n    vec4 worldPosition = modelMatrix * vec4(aPosition, 1.0);\n    vWsPosition\t= vec4(modelMatrix * vec4(aPosition, 1.0)).xyz;\n\n    vPos = aPosition;\n    vNormal = aNormal;\n\n    vec4 positionRelativeToCamera = viewMatrix * worldPosition;\n\n    gl_Position =  projectionMatrix * positionRelativeToCamera;\n\n    float distance = length(worldPosition.xyz);\n    visibility = exp(-pow((distance * density), gradient));\n    // visibility = distance;\n    visibility = clamp(visibility, 0., 1.);\n}\n"}]));
//# sourceMappingURL=main.js.map